!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.falcor=t()}}(function(){var t;return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(i)return i(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var a=n[s]={exports:{}};t[s][0].call(a.exports,function(e){var n=t[s][1][e];return o(n?n:e)},a,a.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){var r=t(2),o=t(169);r.Router=o,e.exports=r},{169:169,2:2}],2:[function(t,e,n){var r=t(33),o=t(131);r.atom=o.atom,r.ref=o.ref,r.error=o.error,r.pathValue=o.pathValue,r.HttpDataSource=t(126),e.exports=r},{126:126,131:131,33:33}],3:[function(t,e,n){function r(t){var e=t||{};this._root=e._root||new o(e),this._path=e.path||e._path||[],this._scheduler=e.scheduler||e._scheduler||new l,this._source=e.source||e._source,this._request=e.request||e._request||new s(this,this._scheduler),this._ID=A++,"number"==typeof e.maxSize?this._maxSize=e.maxSize:this._maxSize=e._maxSize||r.prototype._maxSize,"number"==typeof e.collectRatio?this._collectRatio=e.collectRatio:this._collectRatio=e._collectRatio||r.prototype._collectRatio,(e.boxed||e.hasOwnProperty("_boxed"))&&(this._boxed=e.boxed||e._boxed),(e.materialized||e.hasOwnProperty("_materialized"))&&(this._materialized=e.materialized||e._materialized),"boolean"==typeof e.treatErrorsAsValues?this._treatErrorsAsValues=e.treatErrorsAsValues:e.hasOwnProperty("_treatErrorsAsValues")&&(this._treatErrorsAsValues=e._treatErrorsAsValues),e.cache&&this.setCache(e.cache)}var o=t(5),i=t(4),s=t(56),u=t(65),c=t(66),h=t(62),a=t(64),f=t(74),p=t(76),l=t(75),d=t(82),v=t(85),b=t(50),y=t(135),_=t(89),m=t(101),w=t(97),g=t(103),x=t(99),E=t(100),C=t(78),S=t(77),N=t(131),A=0,O=t(117),k=function(){},D=t(15),j=t(20),q={pathValue:!0,pathSyntax:!0,json:!0,jsonGraph:!0},P=t(73);e.exports=r,r.ref=N.ref,r.atom=N.atom,r.error=N.error,r.pathValue=N.pathValue,r.prototype.constructor=r,r.prototype._materialized=!1,r.prototype._boxed=!1,r.prototype._progressive=!1,r.prototype._treatErrorsAsValues=!1,r.prototype._maxSize=Math.pow(2,53)-1,r.prototype._collectRatio=.75,r.prototype.get=t(72),r.prototype._getWithPaths=t(71),r.prototype.set=function(){var t=O(arguments,q,"set");return t!==!0?new u(function(e){e.onError(t)}):this._set.apply(this,arguments)},r.prototype.preload=function(){var t=O(arguments,P,"preload");if(t!==!0)return new u(function(e){e.onError(t)});var e=Array.prototype.slice.call(arguments),n=this;return new u(function(t){return n.get.apply(n,e).subscribe(function(){},function(e){t.onError(e)},function(){t.onCompleted()})})},r.prototype._set=function(){var t,e=-1,n=arguments.length,r=arguments[n-1];for(w(r)?n-=1:r=void 0,t=new Array(n);++e<n;)t[e]=arguments[e];return c.create(this,t,r)},r.prototype.call=function(){var t,e=-1,n=arguments.length;for(t=new Array(n);++e<n;){var r=arguments[e];t[e]=r;var o=typeof r;if(e>1&&!Array.isArray(r)||0===e&&!Array.isArray(r)&&"string"!==o||1===e&&!Array.isArray(r)&&!g(r))return new u(function(t){t.onError(new Error("Invalid argument"))})}return h.create(this,t)},r.prototype.invalidate=function(){var t,e=-1,n=arguments.length,r=arguments[n-1];for(t=new Array(n);++e<n;)if(t[e]=y.fromPath(arguments[e]),"object"!=typeof t[e])throw new Error("Invalid argument");a.create(this,t,r).subscribe(k,function(t){throw t})},r.prototype.deref=t(6),r.prototype.getValue=t(17),r.prototype.setValue=t(80),r.prototype._getValueSync=t(25),r.prototype._setValueSync=t(81),r.prototype._derefSync=t(7),r.prototype.setCache=function(t){var e=this._root.cache;if(t!==e){var n=this._root,r=this._path;this._path=[],this._root.cache={},"undefined"!=typeof e&&b(n,n.expired,_(e),0),E(t)?S(this,[t]):x(t)?C(this,[t]):m(t)&&C(this,[{json:t}]),this._path=r}else"undefined"==typeof e&&(this._root.cache={});return this},r.prototype.getCache=function(){var t=v(arguments);if(0===t.length)return D(this._root.cache);var e=[{}],n=this._path;return j.getWithPathsAsJSONGraph(this,t,e),this._path=n,e[0].jsonGraph},r.prototype.getVersion=function(t){var e=t&&y.fromPath(t)||[];if(Array.isArray(e)===!1)throw new Error("Model#getVersion must be called with an Array path.");return this._path.length&&(e=this._path.concat(e)),this._getVersion(this,e)},r.prototype._syncCheck=function(t){if(Boolean(this._source)&&this._root.syncRefCount<=0&&this._root.unsafeMode===!1)throw new Error("Model#"+t+" may only be called within the context of a request selector.");return!0},r.prototype._clone=function(t){var e=new r(this);for(var n in t){var o=t[n];"delete"===o?delete e[n]:e[n]=o}return e.setCache=void 0,e},r.prototype.batch=function(t){var e=t;"number"==typeof e?e=new p(Math.round(Math.abs(e))):e&&e.schedule||(e=new f);var n=this._clone();return n._request=new s(n,e),n},r.prototype.unbatch=function(){var t=this._clone();return t._request=new s(t,new l),t},r.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})},r.prototype.asDataSource=function(){return new i(this)},r.prototype._materialize=function(){return this._clone({_materialized:!0})},r.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})},r.prototype.boxValues=function(){return this._clone({_boxed:!0})},r.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})},r.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})},r.prototype.toJSON=function(){return{$type:"ref",value:this._path}},r.prototype.getPath=function(){return d(this._path)},r.prototype._getBoundValue=t(14),r.prototype._getVersion=t(19),r.prototype._getValueSync=t(18),r.prototype._getPathValuesAsPathMap=j.getWithPathsAsPathMap,r.prototype._getPathValuesAsJSONG=j.getWithPathsAsJSONGraph,r.prototype._setPathValuesAsJSON=t(79),r.prototype._setPathValuesAsJSONG=t(79),r.prototype._setPathValuesAsPathMap=t(79),r.prototype._setPathValuesAsValues=t(79),r.prototype._setPathMapsAsJSON=t(78),r.prototype._setPathMapsAsJSONG=t(78),r.prototype._setPathMapsAsPathMap=t(78),r.prototype._setPathMapsAsValues=t(78),r.prototype._setJSONGsAsJSON=t(77),r.prototype._setJSONGsAsJSONG=t(77),r.prototype._setJSONGsAsPathMap=t(77),r.prototype._setJSONGsAsValues=t(77),r.prototype._setCache=t(78),r.prototype._invalidatePathValuesAsJSON=t(49),r.prototype._invalidatePathMapsAsJSON=t(48)},{100:100,101:101,103:103,117:117,131:131,135:135,14:14,15:15,17:17,18:18,19:19,20:20,25:25,4:4,48:48,49:49,5:5,50:50,56:56,6:6,62:62,64:64,65:65,66:66,7:7,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,85:85,89:89,97:97,99:99}],4:[function(t,e,n){function r(t){this._model=t._materialize().treatErrorsAsValues()}r.prototype.get=function(t){return this._model.get.apply(this._model,t)._toJSONG()},r.prototype.set=function(t){return this._model.set(t)._toJSONG()},r.prototype.call=function(t,e,n,r){var o=[t,e,n].concat(r);return this._model.call.apply(this._model,o)._toJSONG()},e.exports=r},{}],5:[function(t,e,n){function r(t){var e=t||{};this.syncRefCount=0,this.expired=e.expired||[],this.unsafeMode=e.unsafeMode||!1,this.collectionScheduler=e.collectionScheduler||new s,this.cache={},o(e.comparator)&&(this.comparator=e.comparator),o(e.errorSelector)&&(this.errorSelector=e.errorSelector),o(e.onChange)&&(this.onChange=e.onChange)}var o=t(97),i=t(92),s=t(75);r.prototype.errorSelector=function(t,e){return e},r.prototype.comparator=function(t,e){return i(t,"value")&&i(e,"value")?t.value===e.value&&t.$type===e.$type&&t.$expires===e.$expires:t===e},e.exports=r},{75:75,92:92,97:97}],6:[function(t,e,n){function r(t,e){var n,r=!1;try{++t._root.syncRefCount,n=t._derefSync(e)}catch(i){n=i,r=!0}finally{--t._root.syncRefCount}return r?o.Observable["throw"](n):o.Observable["return"](n)}var o=t(239),i=t(135);e.exports=function(t){for(var e=this,n=-1,s=arguments.length-1,u=new Array(s),c=i.fromPath(t);++n<s;)u[n]=i.fromPath(arguments[n+1]);if(0===s)throw new Error("Model#deref requires at least one value path.");return o.Observable.defer(function(){return r(e,c)}).flatMap(function(t){if(Boolean(t)){if(s>0){var n=o.Observable.of(t);return t.get.apply(t,u)["catch"](o.Observable.empty()).concat(n).last().flatMap(function(){return r(e,c)}).filter(function(t){return t})}return o.Observable["return"](t)}if(s>0){var i=u.map(function(t){return c.concat(t)});return e.get.apply(e,i).concat(o.Observable.defer(function(){return r(e,c)})).last().filter(function(t){return t})}return o.Observable.empty()})}},{135:135,239:239}],7:[function(t,e,n){var r=t(135),o=t(14),i=t(9),s=t(119);e.exports=function(t){var e=r.fromPath(t);if(!Array.isArray(e))throw new Error("Model#derefSync must be called with an Array path.");var n=o(this,this._path.concat(e),!1),u=n.path,c=n.value,h=n.found;if(h&&void 0!==c&&(c.$type!==s||void 0!==c.value)){if(c.$type)throw new i;return this._clone({_path:u})}}},{119:119,135:135,14:14,9:9}],8:[function(t,e,n){function r(){this.message=r.message,this.stack=(new Error).stack}r.prototype=new Error,r.prototype.name="BoundJSONGraphModelError",r.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.",e.exports=r},{}],9:[function(t,e,n){function r(t,e){this.message=i,this.stack=(new Error).stack,this.boundPath=t,this.shortedPath=e}var o="InvalidModelError",i="The boundPath of the model is not valid since a value or error was found before the path end.";r.prototype=new Error,r.prototype.name=o,r.message=i,e.exports=r},{}],10:[function(t,e,n){function r(t){this.message="An exception was thrown when making a request.",this.stack=(new Error).stack,this.innerError=t}var o="InvalidSourceError";r.prototype=new Error,r.prototype.name=o,r.is=function(t){return t&&t.name===o},e.exports=r},{}],11:[function(t,e,n){function r(){this.message="The allowed number of retries have been exceeded.",this.stack=(new Error).stack}var o="MaxRetryExceededError";r.prototype=new Error,r.prototype.name=o,r.is=function(t){return t&&t.name===o},e.exports=r},{}],12:[function(t,e,n){function r(t,e,n,r,o,f,p){for(var l,d,v=n,b=o,y=r,_=0;;){if(0===_&&y[h]?(_=b.length,d=y[h]):(l=b[_++],d=v[l]),d){var m=d.$type,w=m&&d.value||d;if(_<b.length){if(m){v=d;break}v=d;continue}if(v=d,m&&u(d))break;if(y[h]||i(y,d),m===c){p?s(t,d,f,null,null,null,b,b.length,p):a(t,d),_=0,b=w,y=d,v=e;continue}break}v=void 0;break}if(_<b.length&&void 0!==v){for(var g=[],x=0;x<_;x++)g[x]=b[x];b=g}return[v,b]}var o=t(27),i=o.create,s=t(23),u=t(28),c=t(121),h=t(34),a=t(30).promote;e.exports=r},{121:121,23:23,27:27,28:28,30:30,34:34}],13:[function(t,e,n){var r=t(16),o=t(9),i=t(8);e.exports=function(t,e){return function(n,s,u){var c,h,a,f=u[0],p={values:u,optimizedPaths:[]},l=n._root.cache,d=n._path,v=l,b=d.length,y=[];if(b){if(e)return{criticalError:new i};if(v=r(n,d),v.$type)return{criticalError:new o(d,d)};for(c=[],h=0;h<b;++h)c[h]=d[h]}else c=[],b=0;for(h=0,a=s.length;h<a;h++)t(n,l,v,s[h],0,f,p,y,c,b,e);return p}}},{16:16,8:8,9:9}],14:[function(t,e,n){var r=t(18),o=t(9);e.exports=function(t,e,n){var i,s,u,c,h,a=e,f=e;for(i=t._boxed,n=t._materialized,s=t._treatErrorsAsValues,t._boxed=!0,t._materialized=void 0===n||n,t._treatErrorsAsValues=!0,u=r(t,a.concat(null),!0),t._boxed=i,t._materialized=n,t._treatErrorsAsValues=s,a=u.optimizedPath,c=u.shorted,h=u.found,u=u.value;a.length&&null===a[a.length-1];)a.pop();if(h&&c)throw new o(f,a);return{path:a,value:u,shorted:c,found:h}}},{18:18,9:9}],15:[function(t,e,n){function r(t){var e,n,r,o={},i=Object.keys(t);for(n=0,r=i.length;n<r;n++)e=i[n],s(e)||(o[e]=t[e]);return o}function o(t,e,n){Object.keys(t).filter(function(e){return!s(e)&&t[e]}).forEach(function(n){var s=t[n],u=e[n];if(u||(u=e[n]={}),s.$type){var c,h=s.value&&"object"==typeof s.value,a=!t[i];return c=h||a?r(s):s.value,void(e[n]=c)}o(s,u,n)})}var i=t(38),s=t(98);e.exports=function(t){var e={};return o(t,e),e}},{38:38,98:98}],16:[function(t,e,n){e.exports=function(t,e){for(var n=t._root.cache,r=-1,o=e.length;++r<o&&n&&!n.$type;)n=n[e[r]];return n}},{}],17:[function(t,e,n){var r=t(65),o=t(135);e.exports=function(t){for(var e=o.fromPath(t),n=0,i=e.length;++n<i;)if("object"==typeof e[n])return new r(function(t){t.onError(new Error("Paths must be simple paths"))});var s=this;return new r(function(t){return s.get(e).subscribe(function(n){for(var r=n.json,o=-1,i=e.length;r&&++o<i;)r=r[e[o]];t.onNext(r)},function(e){t.onError(e)},function(){t.onCompleted()})})}},{135:135,65:65}],18:[function(t,e,n){var r=t(12),o=t(26),i=t(28),s=t(30).promote,u=t(121),c=t(119),h=t(120);e.exports=function(t,e,n){for(var a,f,p,l,d,v=t._root.cache,b=e.length,y=[],_=!1,m=!1,w=0,g=v,x=v,E=v,C=!0,S=!1;g&&w<b;){if(a=e[w++],null!==a&&(g=x[a],y[y.length]=a),!g){E=void 0,_=!0,C=!1;break}if(p=g.$type,p===c&&void 0===g.value){E=void 0,C=!1,_=w<b;break}if(w<b){if(p===u){if(i(g)){S=!0,E=void 0,C=!1;break}if(l=r(t,v,v,g,g.value),d=l[0],!d){E=void 0,g=void 0,C=!1;break}p=d.$type,g=d,y=l[1].slice(0)}if(p)break}else E=g;x=g}if(w<b&&!S){for(f=w;f<b;++f)if(null!==e[w]){m=!0;break}for(m?(_=!0,E=void 0):E=g,f=w;f<b;++f)null!==e[f]&&(y[y.length]=e[f])}if(E&&p&&(i(E)?E=void 0:s(t,E)),E&&p===h&&!t._treatErrorsAsValues)throw{path:w===b?e:e.slice(0,w),value:E.value};return E&&t._boxed?E=Boolean(p)&&!n?o(E):E:!E&&t._materialized?E={$type:c}:E&&(E=E.value),{value:E,shorted:_,optimizedPath:y,found:C}}},{119:119,12:12,120:120,121:121,26:26,28:28,30:30}],19:[function(t,e,n){var r=t(47);e.exports=function(t,e){var n=t._getValueSync({_boxed:!0,_root:t._root,_treatErrorsAsValues:t._treatErrorsAsValues},e,!0).value,o=n&&n[r];return null==o?-1:o}},{47:47}],20:[function(t,e,n){var r=t(13),o=t(32),i=r(o,!1),s=r(o,!0);e.exports={getValueSync:t(18),getBoundValue:t(14),getWithPathsAsPathMap:i,getWithPathsAsJSONGraph:s}},{13:13,14:14,18:18,32:32}],21:[function(t,e,n){var r=t(30),o=t(26),i=r.promote;e.exports=function(t,e,n,r,s){var u=e.value;s.errors||(s.errors=[]),t._boxed&&(u=o(e)),s.errors.push({path:r.slice(0,n+1),value:u}),i(t,e)}},{26:26,30:30}],22:[function(t,e,n){function r(t,e,n,r,o,i,s){s.requestedMissingPaths.push(r.slice(0,n).concat(e)),s.optimizedMissingPaths.push(o.slice(0,i).concat(e))}var o=t(31),i=o.fastCopy;e.exports=function(t,e,n,o,s,u,c){var h;o.requestedMissingPaths||(o.requestedMissingPaths=[],o.optimizedMissingPaths=[]),h=n<e.length?i(e,n):[],r(t,h,n,s,u,c,o)}},{31:31}],23:[function(t,e,n){var r=t(30),o=t(26),i=r.promote,s=t(121),u=t(119),c=t(120),h=t(38);e.exports=function(t,e,n,r,a,f,p,l,d,v){if(n){var b,y,_,m,w,g,x,E,C=!1;if(e&&i(t,e),e&&void 0!==e.value||(C=t._materialized),C)E={$type:u};else if(t._boxed)E=o(e);else if(e.$type===s||e.$type===c)E=d?o(e):e.value;else if(d){var S=e.value&&"object"==typeof e.value,N=!e[h];E=S||N?o(e):e.value}else E=e.value;if(a&&(a.hasValue=!0),d){for(w=n.jsonGraph,w||(w=n.jsonGraph={},n.paths=[]),b=0,y=l-1;b<y;b++)m=p[b],w[m]||(w[m]={}),w=w[m];m=p[b],w[m]=C?{$type:u}:E,f&&n.paths.push(f.slice(0,r))}else if(0===r)n.json=E;else{for(w=n.json,w||(w=n.json={}),b=0;b<r-1;b++)_=f[b],w[_]||(w[_]={}),g=w,x=_,w=w[_];_=f[b],null!==_?w[_]=E:g[x]=E}}}},{119:119,120:120,121:121,26:26,30:30,38:38}],24:[function(t,e,n){var r=t(28),o=t(27),i=t(30),s=o.remove,u=i.splice,c=t(120),h=t(21),a=t(23),f=t(22),p=t(29),l=t(36);e.exports=function(t,e,n,o,i,d,v,b,y,_,m){var w=e&&e.$type,g=e&&void 0===e.value;return e&&w?void(r(e)?(e[l]||(u(t,e),s(e)),f(t,n,o,d,v,b,y)):w===c?(m&&(v[o]=null),_||t._treatErrorsAsValues?a(t,e,i,o,d,v,b,y,_,m):h(t,e,o,v,d)):(m&&(v[o]=null),(!g||g&&t._materialized)&&a(t,e,i,o,d,v,b,y,_,m))):void(p(t)?a(t,e,i,o,d,v,b,y,_,m):f(t,n,o,d,v,b,y))}},{120:120,21:21,22:22,23:23,27:27,28:28,29:29,30:30,36:36}],25:[function(t,e,n){var r=t(135);e.exports=function(t){var e=r.fromPath(t);if(Array.isArray(e)===!1)throw new Error("Model#getValueSync must be called with an Array path.");return this._path.length&&(e=this._path.concat(e)),this._syncCheck("getValueSync")&&this._getValueSync(this,e).value}},{135:135}],26:[function(t,e,n){var r=t(41);e.exports=function(t){var e,n,o,i=Object.keys(t);for(e={},n=0,o=i.length;n<o;n++){var s=i[n];s[0]!==r&&(e[s]=t[s])}return e}},{41:41}],27:[function(t,e,n){function r(t,e){var n=e[c]||0;e[i+n]=t,e[c]=n+1,t[u]=n,t[s]=e}function o(t){var e=t[s];if(e){for(var n=t[u],r=e[c];n<r;)e[i+n]=e[i+n+1],++n;e[c]=r-1,t[s]=void 0,t[u]=void 0}}var i=t(44),s=t(34),u=t(43),c=t(45);e.exports={create:r,remove:o}},{34:34,43:43,44:44,45:45}],28:[function(t,e,n){var r=t(107);e.exports=function(t){var e=void 0===t.$expires&&-1||t.$expires;return e!==-1&&1!==e&&(0===e||e<r())}},{107:107}],29:[function(t,e,n){e.exports=function(t){return t._materialized&&!t._source}},{}],30:[function(t,e,n){function r(t,e){var n=t._root,r=n[i];if(r!==e){var o=e[c],s=e[u];s&&(s[c]=o),o&&(o[u]=s),e[c]=void 0,n[i]=e,e[u]=r,r[c]=e}}function o(t,e){var n=t._root,r=e[c],o=e[u];o&&(o[c]=r),r&&(r[u]=o),e[c]=void 0,e===n[i]&&(n[i]=void 0),e===n[s]&&(n[s]=void 0),e[h]=!0,n.expired.push(e)}var i=t(35),s=t(46),u=t(39),c=t(42),h=t(36);e.exports={promote:r,splice:o}},{35:35,36:36,39:39,42:42,46:46}],31:[function(t,e,n){function r(t,e){var n,r,o,i=[];for(r=0,o=e||0,n=t.length;o<n;r++,o++)i[r]=t[o];return i}function o(t,e){var n,r,o,i=[];for(n=0,r=t.length;n<r;n++)i[n]=t[n];for(o=0,r=e.length;o<r;o++)null!==e[o]&&(i[n++]=e[o]);return i}function i(t,e){var n,r,o,i=[];for(n=0,r=t.length;n<r;n++)i[n]=t[n];for(o=0,r=e.length;o<r;o++)i[n++]=e[o];return i}e.exports={fastCat:i,fastCatSkipNulls:o,fastCopy:r}},{}],32:[function(t,e,n){var r=t(12),o=t(24),i=t(28),s=t(144).iterateKeySet,u=t(121),c=t(30).promote;e.exports=function h(t,e,n,a,f,p,l,d,v,b,y,_){var m=_,w=v;if(!n||n&&n.$type||f===a.length)return void o(t,n,a,f,p,l,d,w,b,y,m);var g,x;g=a[f];var E="object"==typeof g,C=f+1,S=!1,N=g;if(E&&(S={},N=s(g,S)),void 0!==N||!S.done){var A=b+1;do{m=!1;var O;null===N?O=n:(O=n[N],w[b]=N,d[f]=N);var k=w,D=A;if(O){var j=O.$type,q=j&&O.value||O;if(C<a.length&&j&&j===u&&!i(O)){y&&o(t,O,a,C,p,l,null,w,D,y,m),c(t,O);var P=r(t,e,e,O,q,p,y);m=!0,O=P[0];var R=P[1];for(k=[],D=R.length,x=0;x<D;++x)k[x]=R[x]}}h(t,e,O,a,C,p,l,d,k,D,y,m),S&&!S.done&&(N=s(g,S))}while(S&&!S.done)}}},{12:12,121:121,144:144,24:24,28:28,30:30}],33:[function(t,e,n){"use strict";function r(t){return new r.Model(t)}"function"==typeof Promise?r.Promise=Promise:r.Promise=t(231),e.exports=r,r.Model=t(3)},{231:231,3:3}],34:[function(t,e,n){e.exports=t(41)+"context"},{41:41}],35:[function(t,e,n){e.exports=t(41)+"head"},{41:41}],36:[function(t,e,n){e.exports=t(41)+"invalidated"},{41:41}],37:[function(t,e,n){e.exports=t(41)+"key"},{41:41}],38:[function(t,e,n){e.exports="$modelCreated"},{}],39:[function(t,e,n){e.exports=t(41)+"next"},{41:41}],40:[function(t,e,n){e.exports=t(41)+"parent"},{41:41}],41:[function(t,e,n){e.exports=String.fromCharCode(30)},{}],42:[function(t,e,n){e.exports=t(41)+"prev"},{41:41}],43:[function(t,e,n){e.exports=t(41)+"ref-index"},{41:41}],44:[function(t,e,n){e.exports=t(41)+"ref"},{41:41}],45:[function(t,e,n){e.exports=t(41)+"refs-length"},{41:41}],46:[function(t,e,n){e.exports=t(41)+"tail"},{41:41}],47:[function(t,e,n){e.exports=t(41)+"version"},{41:41}],48:[function(t,e,n){function r(t,e,n,o,s,u,h,a,f,p){if(!x(t)&&!t.$type)for(var l in t)if(l[0]!==c&&"$"!==l[0]&&_(t,l)){var d=t[l],v=m(d)&&!d.$type,b=i(n,o,s,l,d,v,!1,u,h,a,f,p),w=b[0],g=b[1];w&&(v?r(d,e+1,n,g,w,u,h,a,f,p):N(w,g,l,a)&&S(g,y(w),a,u))}}function o(t,e,n,r,o,s,c,f){if(w(n))return E(n,o,s),[void 0,e];b(s,n);var d=n,v=n.value,y=e;if(n=n[a],null!=n)y=n[h]||e;else{var _=0,m=v.length-1;y=n=e;do{var g=v[_],C=_<m,S=i(e,y,n,g,t,C,!0,r,o,s,c,f);if(n=S[0],x(n))return S;y=S[1]}while(_++<m);if(d[a]!==n){var N=n[l]||0;n[l]=N+1,n[u+N]=d,d[a]=n,d[p]=N}}return[n,y]}function i(t,e,n,r,i,u,c,h,a,f,p,l){for(var v=n.$type;v===d;){var b=o(i,t,n,h,a,f,p,l);if(n=b[0],x(n))return b;e=b[1],v=n&&n.$type}if(void 0!==v)return[n,e];if(null==r){if(u)throw new Error("`null` is not allowed in branch key positions.");n&&(r=n[s])}else e=n,n=e[r];return[n,e]}var s=t(37),u=t(44),c=t(41),h=t(40),a=t(34),f=t(47),p=t(43),l=t(45),d=t(121),v=t(14),b=t(51),y=t(89),_=t(92),m=t(101),w=t(96),g=t(97),x=t(103),E=t(87),C=t(93),S=t(116),N=t(110);e.exports=function(t,e){for(var n=t._root,o=n,i=n.expired,s=C(),u=n._comparator,c=n._errorSelector,a=t._path,p=n.cache,l=a.length?v(t,a).value:p,d=l[h]||p,b=p[f],y=-1,_=e.length;++y<_;){var m=e[y];r(m.json,0,p,d,l,s,i,o,u,c)}var w=p[f],x=n.onChange;g(x)&&b!==w&&x()}},{101:101,103:103,110:110,116:116,121:121,14:14,34:34,37:37,40:40,41:41,43:43,44:44,45:45,47:47,51:51,87:87,89:89,92:92,93:93,96:96,97:97}],49:[function(t,e,n){function r(t,e,n,o,s,u,c,h){var a={},f=e<t.length-1,p=t[e],l=g(p,a);do{var d=i(n,o,s,l,f,!1,u,c,h),v=d[0],y=d[1];v&&(f?r(t,e+1,n,y,v,u,c,h):C(v,y,l,h)&&E(y,b(v),h,u)),l=g(p,a)}while(!a.done)}function o(t,e,n,r,o){if(y(e))return w(e,r,o),[void 0,t];v(o,e);var s=e,a=e.value,l=t;if(e=e[h],null!=e)l=e[c]||t;else{var d=0,b=a.length-1;l=e=t;do{var _=a[d],g=d<b,x=i(t,l,e,_,g,!0,n,r,o);if(e=x[0],m(e))return x;l=x[1]}while(d++<b);if(s[h]!==e){var E=e[p]||0;e[p]=E+1,e[u+E]=s,s[h]=e,s[f]=E}}return[e,l]}function i(t,e,n,r,i,u,c,h,a){for(var f=n.$type;f===l;){var p=o(t,n,c,h,a);if(n=p[0],m(n))return p;e=p[1],f=n.$type}if(void 0!==f)return[n,e];if(null==r){if(i)throw new Error("`null` is not allowed in branch key positions.");n&&(r=n[s])}else e=n,n=e[r];return[n,e]}var s=t(37),u=t(44),c=t(40),h=t(34),a=t(47),f=t(43),p=t(45),l=t(121),d=t(14),v=t(51),b=t(89),y=t(96),_=t(97),m=t(103),w=t(87),g=t(144).iterateKeySet,x=t(93),E=t(116),C=t(110);e.exports=function(t,e){for(var n=t._root,o=n,i=n.expired,s=x(),u=t._path,h=n.cache,f=u.length?d(t,u).value:h,p=f[c]||h,l=h[a],v=-1,b=e.length;++v<b;){var y=e[v];r(y,0,h,p,f,s,i,o)}var m=h[a],w=n.onChange;_(w)&&l!==m&&w()}},{103:103,110:110,116:116,121:121,14:14,144:144,34:34,37:37,40:40,43:43,44:44,45:45,47:47,51:51,87:87,89:89,93:93,96:96,97:97}],50:[function(t,e,n){var r=t(37),o=t(40),i=t(35),s=t(46),u=t(39),c=t(42),h=t(109),a=t(116);e.exports=function(t,e,n,f,p,l){var d=n,v=p;"number"!=typeof v&&(v=.75);var b,y,_,m="number"==typeof l,w=f*v;for(y=e.pop();y;)_=y.$size||0,d-=_,m===!0?a(y,_,t,l):(b=y[o])&&h(y,b,y[r],t),y=e.pop();if(d>=f){var g=t[s];for(y=g;d>=w&&y;)g=g[c],_=y.$size||0,d-=_,m===!0&&a(y,_,t,l),y=g;t[s]=t[c]=y,null==y?t[i]=t[u]=void 0:y[u]=void 0}}},{109:109,116:116,35:35,37:37,39:39,40:40,42:42,46:46}],51:[function(t,e,n){var r=t(122),o=t(35),i=t(46),s=t(39),u=t(42),c=t(101);e.exports=function(t,e){if(c(e)&&e.$expires!==r){var n=t[o],h=t[i],a=e[s],f=e[u];e!==n&&(null!=a&&"object"==typeof a&&(a[u]=f),null!=f&&"object"==typeof f&&(f[s]=a),a=n,null!=n&&"object"==typeof n&&(n[u]=e),t[o]=t[s]=n=e,n[s]=a,n[u]=void 0),null!=h&&e!==h||(t[i]=t[u]=h=f||e)}return e}},{101:101,122:122,35:35,39:39,42:42,46:46}],52:[function(t,e,n){var r=t(35),o=t(46),i=t(39),s=t(42);e.exports=function(t,e){var n=t[r],u=t[o],c=e[i],h=e[s];null!=c&&"object"==typeof c&&(c[s]=h),null!=h&&"object"==typeof h&&(h[i]=c),e===n&&(t[r]=t[i]=c),e===u&&(t[o]=t[s]=h),e[i]=e[s]=void 0,n=u=c=h=void 0}},{35:35,39:39,42:42,46:46}],53:[function(t,e,n){function r(t,e){var n=!1;return function(){if(!n&&!t._disposed){n=!0,t._callbacks[e]=null,t._optimizedPaths[e]=[],t._requestedPaths[e]=[];var r=--t._count;0!==r||t.sent||(t._disposable.dispose(),t.requestQueue.removeRequest(t))}}}function o(t){for(var e=[],n=-1,r=0,o=t.length;r<o;++r)for(var i=t[r],s=0,u=i.length;s<u;++s)e[++n]=i[s];return e}var i=t(60),s=t(61),u=0,c=t(58).GetRequest,h=t(77),a=t(79),f=t(120),p=[],l=function(t,e){this.sent=!1,this.scheduled=!1,this.requestQueue=e,this.id=++u,this.type=c,this._scheduler=t,this._pathMap={},this._optimizedPaths=[],this._requestedPaths=[],this._callbacks=[],this._count=0,this._disposable=null,this._collapsed=null,this._disposed=!1};l.prototype={batch:function(t,e,n){var o=this,i=o._optimizedPaths,u=o._requestedPaths,c=o._callbacks,h=i.length;return i[h]=e,u[h]=t,c[h]=n,++o._count,o.scheduled||(o.scheduled=!0,o._disposable=o._scheduler.schedule(function(){s(o,i,function(t,e){if(o.requestQueue.removeRequest(o),o._disposed=!0,o._count){o._merge(u,t,e);for(var n=0,r=c.length;n<r;++n){var i=c[n];i&&i(t,e)}}})})),r(o,h)},add:function(t,e,n){var o,s,u=this,c=i(t,e,u._pathMap);c?(s=c[2],o=c[1]):(s=t,o=e);var h=!1,a=!1;if(o.length<e.length){h=!0;var f=u._callbacks.length;u._callbacks[f]=n,u._requestedPaths[f]=c[0],u._optimizedPaths[f]=[],++u._count,a=r(u,f)}return[h,s,o,a]},_merge:function(t,e,n){var r=this,i=r.requestQueue.model,s=i._root,u=s.errorSelector,c=s.comparator,l=i._path;i._path=p;var d=o(t);if(e){var v=e;v instanceof Error&&(v={message:v.message}),v.$type||(v={$type:f,value:v});var b=d.map(function(t){return{path:t,value:v}});a(i,b,null,u,c)}else h(i,[{paths:d,jsonGraph:n.jsonGraph}],null,u,c);i._path=l}},e.exports=l},{120:120,58:58,60:60,61:61,77:77,79:79}],54:[function(t,e,n){function r(){this.length=0,this.pending=!1,this.pathmaps=[],s.call(this,this._subscribe)}var o=t(239),i=o.Observer,s=o.Observable,u=o.Disposable,c=o.SerialDisposable,h=o.CompositeDisposable,a=t(10),f=t(144),p=f.iterateKeySet;r.create=function(t,e,n){var r=new this;return r.queue=t,r.model=e,r.index=n,r},r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.insertPath=function(t,e,n,r,o){var i=r||0,s=o||t.length-1,u=n||this.pathmaps[s+1]||(this.pathmaps[s+1]=Object.create(null));if(void 0===u||null===u)return!1;var c,h,a=t[i],f={};c=p(a,f);do{if(h=u[c],i<s){if(null==h){if(e)return!1;h=u[c]=Object.create(null)}if(this.insertPath(t,e,h,i+1,s)===!1)return!1}else u[c]=(h||0)+1,this.length+=1;f.done||(c=p(a,f))}while(!f.done);return!0},r.prototype.removePath=function(t,e,n,r){var o=n||0,i=r||t.length-1,s=e||this.pathmaps[i+1];if(void 0===s||null===s)return!0;var u,c,h=0,a=t[o],f={};u=p(a,f);do if(c=s[u],void 0!==c&&null!==c){if(o<i){h+=this.removePath(t,c,o+1,i);var l=void 0;for(l in c)break;void 0===l&&delete s[u]}else c=s[u]=(c||1)-1,0===c&&delete s[u],h+=1,this.length-=1;f.done||(u=p(a,f))}while(!f.done);return h},r.prototype.getSourceObserver=function(t){var e=this;return i.create(function(n){n.jsonGraph=n.jsonGraph||n.jsong||n.values||n.value,n.index=e.index,t.onNext(n)},function(e){t.onError(e)},function(){t.onCompleted()})},r.prototype._subscribe=function(t){var e=this,n=this.queue;e.pending=!0;var r=!1,o=new c,i=u.create(function(){r||(r=!0,n&&n._remove(e))}),s=new h(o,i);try{o.setDisposable(this.model._source[this.method](this.getSourceArgs()).subscribe(this.getSourceObserver(t)))}catch(f){throw new a(f)}return s},e.exports=r},{10:10,144:144,239:239}],55:[function(t,e,n){function r(t,e){this.total=0,this.model=t,this.requests=[],this.scheduler=e}var o=t(59),i=t(41),s=t(91),u=t(101),c=t(144);r.prototype.set=function(t){return t.paths=c.collapse(t.paths),o.create(this.model,t)},r.prototype._remove=function(t){var e=this.requests,n=e.indexOf(t);n!==-1&&e.splice(n,1)},r.prototype.distributePaths=function(t,e,n){var r,o,i=this.model,s=-1,u=t.length,c=-1,h=e.length,a=[];t:for(;++s<u;){var f=t[s];for(c=-1;++c<h;)if(o=e[c],o.insertPath(f,o.pending)){a[c]=o;continue t}r||(r=n.create(this,i,this.total++),e[c]=r,a[h++]=r),r.insertPath(f,!1)}var p=[],l=-1;for(c=-1;++c<h;)o=a[c],null!=o&&(p[++l]=o);return p},r.prototype.mergeJSONGraphs=function(t,e){var n=0,r=[],o=[],c=[],h=t.index,a=e.index;t.index=Math.max(h,a),r[-1]=t.jsonGraph||{},o[-1]=e.jsonGraph||{};t:for(;n>-1;){for(var f=r[n-1],p=o[n-1],l=c[n-1]||(c[n-1]=Object.keys(p));l.length>0;){var d=l.pop();if(d[0]!==i)if(f.hasOwnProperty(d)){var v=f[d],b=s(v),y=p[d],_=s(y);if(u(v)&&u(y)&&!b&&!_){r[n]=v,o[n]=y,n+=1;continue t}a>h&&(f[d]=y)}else f[d]=p[d]}n-=1}return t},e.exports=r},{101:101,144:144,41:41,59:59,91:91}],56:[function(t,e,n){function r(t,e){this.model=t,this.scheduler=e,this.requests=this._requests=[]}var o=t(55),i=t(57);r.prototype.get=i.prototype.get,r.prototype.removeRequest=i.prototype.removeRequest,r.prototype.set=o.prototype.set,r.prototype.call=o.prototype.call,e.exports=r},{55:55,57:57}],57:[function(t,e,n){function r(t,e){this.model=t,this.scheduler=e,this.requests=this._requests=[]}var o=t(58),i=t(53);r.prototype={setScheduler:function(t){this.scheduler=t},get:function(t,e,n){function r(){v||(--f,0===f&&n())}var s,u,c,h=this,a=[],f=0,p=h._requests,l=e,d=t,v=!1;for(s=0,u=p.length;s<u;++s)if(c=p[s],c.type===o.GetRequest){if(c.sent){var b=c.add(d,l,r);b[0]&&(d=b[1],l=b[2],a[a.length]=b[3],++f)}else c.batch(d,l,r),l=[],d=[],++f;if(!l.length)break}if(l.length){c=new i(h.scheduler,h),p[p.length]=c,++f;var y=c.batch(d,l,r);a[a.length]=y}return function(){if(!v&&0!==f){v=!0;for(var t=a.length,e=0;e<t;++e)a[e]()}}},removeRequest:function(t){for(var e=this._requests,n=e.length;--n>=0;)if(e[n].id===t.id){e.splice(n,1);break}}},e.exports=r},{53:53,58:58}],58:[function(t,e,n){e.exports={GetRequest:"GET"}},{}],59:[function(t,e,n){function r(){s.call(this)}var o=t(239),i=o.Observer,s=t(54),u=t(84),c=t(77),h=t(79),a=new Array(0);r.create=function(t,e){var n=new r;return n.model=t,n.jsonGraphEnvelope=e,n},r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.method="set",r.prototype.insertPath=function(){return!1},r.prototype.removePath=function(){return 0},r.prototype.getSourceArgs=function(){return this.jsonGraphEnvelope},r.prototype.getSourceObserver=function(t){var e=this.model,n=e._path,r=this.jsonGraphEnvelope.paths,o=e._root,f=o.errorSelector,p=o.comparator;return s.prototype.getSourceObserver.call(this,i.create(function(o){e._path=a;var i=c(e,[{paths:r,jsonGraph:o.jsonGraph}],null,f,p);o.paths=i[1],e._path=n,t.onNext(o)},function(o){e._path=a,h(e,u(r,function(t){return{path:t,value:o}}),null,f,p),e._path=n,t.onError(o)},function(){t.onCompleted()}))},e.exports=r},{239:239,54:54,77:77,79:79,84:84}],60:[function(t,e,n){var r=t(144).hasIntersection,o=t(85);e.exports=function(t,e,n){for(var i=[],s=[],u=[],c=-1,h=-1,a=!1,f=0,p=e.length;f<p;++f){var l=e[f],d=n[l.length];d&&r(d,l,0)?(!a&&f>0&&(s=o(t,0,f),i=o(e,0,f)),u[++c]=t[f],a=!0):a&&(i[++h]=l,s[h]=t[f])}return a?[u,i,s]:null}},{144:144,85:85}],61:[function(t,e,n){var r=t(144),o=r.toTree,i=r.toPaths;e.exports=function(t,e,n){if(0===t._count)return void t.requestQueue.removeRequest(t);t.sent=!0,t.scheduled=!1;for(var r=t._pathMap,s=Object.keys(e),u=0,c=s.length;u<c;++u)for(var h=e[u],a=0,f=h.length;a<f;++a){var p=h[a],l=p.length;if(r[l]){var d=r[l];d[d.length]=p}else r[l]=[p]}for(var v=Object.keys(r),b=0,y=v.length;b<y;++b){var _=v[b];r[_]=o(r[_])}var m,w=t._collasped=i(r);t.requestQueue.model._source.get(w).subscribe(function(t){m=t},function(t){n(t,m)},function(){n(null,m)})}},{144:144}],62:[function(t,e,n){function r(t){u.call(this,t||i)}function o(t){return s.Observable.defer(function(){return t})}function i(t){function e(t){function e(t,e){if(Boolean(e.invalidated))t.invalidations.push(t.localThisPath.concat(e.path));else{var n=e.path,r=e.value;Boolean(r)&&"object"==typeof r&&r.$type===p?t.references.push({path:i(n),value:e.value}):t.values.push({path:i(n),value:e.value})}return t}function n(t){var e=t.values.concat(t.references);return e.length>0?o(m.set.apply(m,e)._toJSONG()).map(function(e){return{results:t,envelope:e}}):u["return"]({results:t,envelope:{jsonGraph:{},paths:[]}})}function r(t){var e,n=t.envelope,r=t.results,h=r.values,a=r.references,f=r.invalidations,p=h.map(c).map(i),l=a.reduce(s,[]),d=y.map(i),v=l.concat(d);return e=v.length>0?o(_.get.apply(_,p.concat(v))._toJSONG()):u["return"](n),e.doAction(function(t){t.invalidated=f})}function s(t,e){var n=e.path;return t.push.apply(t,b.map(function(t){return n.concat(t)})),t}function c(t){return t.path}var h=t&&t.localFn;if("function"==typeof h){var a=t.model,f=a._path,l=h.apply(a,v).reduce(e,{values:[],references:[],invalidations:[],localThisPath:f}).flatMap(n).flatMap(r);return u["return"](l)}return u.empty()}function n(t){function e(t){
var e=t.invalidated;return e&&e.length&&_.invalidate.apply(_,e),t}return t&&"object"==typeof t?s.Observable.defer(function(){var e;try{e=t.call(g,v,b,y)}catch(n){e=u["throw"](new a(n))}return e}).map(e):u.empty()}function r(t){return o(m.set(t)).reduce(function(t){return t},null).map(function(){return{invalidated:t.invalidated,paths:t.paths.map(function(t){return t.slice(w.length)})}})}function i(t){return x.concat(t)}var h=this.args,l=this.model,d=f.fromPath(h[0]),v=h[1]||[],b=(h[2]||[]).map(f.fromPath),y=(h[3]||[]).map(f.fromPath),_=l._clone({_path:[]}),m=_.withoutDataSource(),w=l._path,g=w.concat(d),x=g.slice(0,-1),E=o(l.withoutDataSource().get(d)).map(function(t){for(var e=t.json,n=-1,r=d.length;e&&++n<r;)e=e[d[n]];var o=_._derefSync(x).boxValues();return{model:o,localFn:e}}).flatMap(e).defaultIfEmpty(n(l._source)).mergeAll().flatMap(r),C=new c;return C.add(E.subscribe(function(e){var n=e.paths,r=e.invalidated,i=l.get.apply(l,n);"AsJSONG"===t.outputFormat&&(i=o(i._toJSONG()).doAction(function(t){t.invalidated=r})),C.add(i.subscribe(t))},function(e){t.onError(e)})),C}var s=t(239)&&t(238),u=s.Observable,c=s.CompositeDisposable,h=t(65),a=t(10),f=t(135),p=t(121);r.create=h.create,r.prototype=Object.create(u.prototype),r.prototype.constructor=r,r.prototype.invokeSourceRequest=function(t){return this},r.prototype.ensureCollect=function(t){return this},r.prototype.initialize=function(){return this},e.exports=r},{10:10,121:121,135:135,238:238,239:239,65:65}],63:[function(t,e,n){function r(t){i.call(this,t)}var o=t(239),i=o.Observable,s=t(65),u=t(135),c=t(89),h=t(50),a=t(82),f=t(47),p=Array.isArray,l=t(102),d=t(99),v=t(100);r.create=s.create,r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.subscribeCount=0,r.prototype.subscribeLimit=10,r.prototype.initialize=function(){for(var t,e,n=this.model,r=this.outputFormat||"AsPathMap",o=this.isProgressive,i=[{}],s=[],c=this.args,h=-1,f=c.length;++h<f;){var b,y=c[h];p(y)||"string"==typeof y?(y=u.fromPath(y),b="PathValues"):l(y)?(y.path=u.fromPath(y.path),b="PathValues"):v(y)?b="JSONGs":d(y)&&(b="PathMaps"),e!==b&&(e=b,t={inputType:b,arguments:[]},s.push(t),t.values=i),t.arguments.push(y)}return this.boundPath=a(n._path),this.groups=s,this.outputFormat=r,this.isProgressive=o,this.isCompleted=!1,this.isMaster=null==n._source,this.values=i,this},r.prototype.invokeSourceRequest=function(t){return this},r.prototype.ensureCollect=function(t){var e=this["finally"](function(){var e=t._root,n=e.cache;e.collectionScheduler.schedule(function(){h(e,e.expired,c(n),t._maxSize,t._collectRatio,n[f])})});return new this.constructor(function(t){return e.subscribe(t)})},e.exports=r},{100:100,102:102,135:135,239:239,47:47,50:50,65:65,82:82,89:89,99:99}],64:[function(t,e,n){function r(t){u.call(this,t||o)}function o(t){for(var e=this.model,n=this.method,r=this.groups,o=-1,i=r.length;++o<i;){var u=r[o],c=u.inputType,h=u.arguments;if(h.length>0){var a="_"+n+c+"AsJSON",f=e[a];f(e,h)}}return t.onCompleted(),s.empty}var i=t(239),s=i.Disposable,u=t(63);r.create=u.create,r.prototype=Object.create(u.prototype),r.prototype.method="invalidate",r.prototype.constructor=r,e.exports=r},{239:239,63:63}],65:[function(t,e,n){function r(t){this._subscribe=t}function o(t){var e=this.model,n=new this.type;return n.model=e,n.args=this.args,n.outputFormat=t.outputFormat||"AsPathMap",n.isProgressive=t.isProgressive||!1,n.subscribeCount=0,n.subscribeLimit=t.retryLimit||10,n.initialize().invokeSourceRequest(e).ensureCollect(e).subscribe(t)}var i=t(33),s=t(239)&&t(238),u=s.Observable,c=t(85),h=t(106),a={outputFormat:{value:"AsJSONG"}},f={isProgressive:{value:!0}};r.create=function(t,e){var n=new r(o);return n.args=e,n.type=this,n.model=t,n},r.prototype=Object.create(u.prototype),r.prototype.constructor=r,r.prototype._mixin=function(){var t=this,e=c(arguments);return new t.constructor(function(n){return t.subscribe(e.reduce(function(t,e){return Object.create(t,e)},n))})},r.prototype._toJSONG=function(){return this._mixin(a)},r.prototype.progressively=function(){return this._mixin(f)},r.prototype.subscribe=function(t,e,n){var r=t;r&&"object"==typeof r||(r={onNext:t||h,onError:e||h,onCompleted:n||h});var o=this._subscribe(r);switch(typeof o){case"function":return{dispose:o};case"object":return o||{dispose:h};default:return{dispose:h}}},r.prototype.then=function(t,e){var n=this;return new i.Promise(function(t,e){var r,o=!1;n.toArray().subscribe(function(t){r=t.length<=1?t[0]:t},function(t){o=!0,e(t)},function(){o===!1&&t(r)})}).then(t,e)},e.exports=r},{106:106,238:238,239:239,33:33,85:85}],66:[function(t,e,n){function r(t){l.call(this,t||o)}function o(t){return this.isCompleted?s.call(this,t):i.call(this,t)}function i(t){if(this.subscribeCount++>this.subscribeLimit)return t.onError("Loop kill switch thrown."),f.empty;for(var e=[],n=[],r=this.model,o=this.isMaster,i=r._root,h=this.outputFormat,a=i.errorSelector,p=this.method,l=this.groups,d=-1,b=l.length;++d<b;){var y=l[d],_=y.inputType,m=y.arguments;if(m.length>0){var w="_"+p+_+h,g=r[w],x=g(r,m,null,a);n.push.apply(n,x[1]),"PathValues"===_?e.push.apply(e,m.map(u)):"JSONGs"===_?e.push.apply(e,v(m,c)):e.push.apply(e,x[0])}}return this.requestedPaths=e,o?(this.isCompleted=!0,s.call(this,t)):void t.onError({method:p,optimizedPaths:n,invokeSourceRequest:!0})}function s(t){var e=new p(this.model,this.requestedPaths);return"AsJSONG"===this.outputFormat&&(e=e._toJSONG()),this.isProgressive&&(e=e.progressively()),e.subscribe(t)}function u(t){return t.path}function c(t){return t.paths}var h=t(239),a=h.Observable,f=h.Disposable,p=t(68),l=t(63),d=t(10),v=t(83),b=new Array(0);r.create=l.create,r.prototype=Object.create(l.prototype),r.prototype.method="set",r.prototype.constructor=r,r.prototype.invokeSourceRequest=function(t){var e=this,n=this["catch"](function(r){var o;if(r&&r.invokeSourceRequest===!0){var i={},s=t._path,u=r.optimizedPaths;t._path=b,t._getPathValuesAsJSONG(t._materialize().withoutDataSource(),u,[i]),t._path=s,o=t._request.set(i)["do"](function(t){e.isCompleted=u.length===t.paths.length},function(){e.isCompleted=!0}).materialize().flatMap(function(t){if("C"===t.kind)return a.empty();if("E"===t.kind){var e=t.exception;if(d.is(e))return a["throw"](t.exception)}return n})}else o=a["throw"](r);return o});return new this.constructor(function(t){return n.subscribe(t)})},e.exports=r},{10:10,239:239,63:63,68:68,83:83}],67:[function(t,e,n){var r=function(t){this.disposed=!1,this.currentDisposable=t};r.prototype={dispose:function(){if(!this.disposed&&this.currentDisposable){this.disposed=!0;var t=this.currentDisposable;t.dispose?t.dispose():t()}}},e.exports=r},{}],68:[function(t,e,n){var r=t(65),o=t(69),i=t(70),s={dispose:function(){}},u=t(239).Observable,c=e.exports=function(t,e,n,r){this.model=t,this.currentRemainingPaths=e,this.isJSONGraph=n||!1,this.isProgressive=r||!1};c.prototype=Object.create(u.prototype),c.prototype.subscribe=r.prototype.subscribe,c.prototype.then=r.prototype.then,c.prototype._toJSONG=function(){return new c(this.model,this.currentRemainingPaths,(!0),this.isProgressive)},c.prototype.progressively=function(){return new c(this.model,this.currentRemainingPaths,this.isJSONGraph,(!0))},c.prototype._subscribe=function(t){var e=[{}],n=[],r=t.isJSONG=this.isJSONGraph,u=this.isProgressive,c=o(this.model,this.currentRemainingPaths,t,u,r,e,n);return c?i(this,this.model,c,t,e,n,1):s}},{239:239,65:65,69:69,70:70}],69:[function(t,e,n){var r=t(20),o=r.getWithPathsAsJSONGraph,i=r.getWithPathsAsPathMap;e.exports=function(t,e,n,r,s,u,c){var h;if(h=s?o(t,e,u):i(t,e,u),h.criticalError)return n.onError(h.criticalError),null;var a=h.hasValue,f=!h.requestedMissingPaths||!t._source,p=u[0].json||u[0].jsonGraph;if(h.errors)for(var l=h.errors,d=c.length,v=0,b=l.length;v<b;++v,++d)c[d]=l[v];if(a&&r||p&&f)try{++t._root.syncRefCount,n.onNext(u[0])}catch(y){throw y}finally{--t._root.syncRefCount}return f?(c.length?n.onError(c):n.onCompleted(),null):h}},{20:20}],70:[function(t,e,n){var r=t(69),o=t(11),i=t(31).fastCat,s=t(50),u=t(89),c=t(67),h=t(47);e.exports=function a(t,e,n,f,p,l,d){if(10===d)throw new o;var v=e._request,b=n.requestedMissingPaths,y=n.optimizedMissingPaths,_=new c,m=[],w=e._path;if(w.length)for(var g=0,x=b.length;g<x;++g)m[g]=i(w,b[g]);else m=b;var E=v.get(m,y,function(){var n=r(e,b,f,t.isProgressive,t.isJSONGraph,p,l);if(n)_.currentDisposable=a(t,e,n,f,p,l,d+1);else{var o=e._root,i=o.cache,c=i[h];s(o,o.expired,u(i),e._maxSize,e._collectRatio,c)}});return _.currentDisposable=E,_}},{11:11,31:31,47:47,50:50,67:67,69:69,89:89}],71:[function(t,e,n){var r=t(68);e.exports=function(t){return new r(this,t)}},{68:68}],72:[function(t,e,n){var r=t(135),o=t(65),i=t(73),s=t(117),u=t(68);e.exports=function(){var t=s(arguments,i,"get");if(t!==!0)return new o(function(e){e.onError(t)});var e=r.fromPathsOrPathValues(arguments);return new u(this,e)}},{117:117,135:135,65:65,68:68,73:73}],73:[function(t,e,n){e.exports={path:!0,pathSyntax:!0}},{}],74:[function(t,e,n){function r(){}var o=t(124),i=t(239),s=i.Disposable;r.prototype.schedule=function(t){return o(t),s.empty},r.prototype.scheduleWithState=function(t,e){var n=this;return o(function(){e(n,t)}),s.empty},e.exports=r},{124:124,239:239}],75:[function(t,e,n){function r(){}var o=t(239),i=o.Disposable;r.prototype.schedule=function(t){return t(),i.empty},r.prototype.scheduleWithState=function(t,e){return e(this,t),i.empty},e.exports=r},{239:239}],76:[function(t,e,n){function r(t){this.delay=t}var o=t(239),i=o.Disposable;r.prototype.schedule=function(t){var e=setTimeout(t,this.delay);return i.create(function(){void 0!==e&&(clearTimeout(e),e=void 0)})},r.prototype.scheduleWithState=function(t,e){var n=this,r=setTimeout(function(){e(n,t)},this.delay);return i.create(function(){void 0!==r&&(clearTimeout(r),r=void 0)})},e.exports=r},{239:239}],77:[function(t,e,n){function r(t,e,n,o,s,u,c,h,a,f,p,d,v,b,y,m,w){for(var g={},x=e<t.length-1,E=t[e],C=_(E,g),S=d.index;;){p.depth=e;var N=i(n,o,s,u,c,h,C,x,!1,p,d,v,b,y,m,w);p[e]=C,p.index=e,d[d.index++]=C;var A=N[0],O=N[1];if(A&&(x?r(t,e+1,n,O,A,u,N[3],N[2],a,f,p,d,v,b,y,m,w):(l(y,A),a.push(p.slice(0,p.index+1)),f.push(d.slice(0,d.index)))),C=_(E,g),g.done)break;d.index=S}}function o(t,e,n,r,o,s,h,p,v,_,m){var w=e.value;if(s.splice(0,s.length),s.push.apply(s,w),d(e))return s.index=w.length,y(e,p,v),[void 0,t,r,n];l(v,e);var g=0,x=e,E=w.length-1,C=e=t,S=r=n;do{var N=w[g],A=g<E,O=i(t,C,e,n,S,r,N,A,!0,o,s,h,p,v,_,m);if(e=O[0],b(e))return s.index=g,O;C=O[1],r=O[2],S=O[3]}while(g++<E);if(s.index=g,x[c]!==e){var k=e[f]||0;e[f]=k+1,e[u+k]=x,x[c]=e,x[a]=k}return[e,C,r,S]}function i(t,e,n,r,i,u,c,h,a,f,l,d,v,y,_,m){for(var g=n.$type;g===p;){var x=o(t,n,r,u,f,l,d,v,y,_,m);if(n=x[0],b(n))return x;e=x[1],u=x[2],i=x[3],g=n.$type}if(void 0!==g)return[n,e,u,i];if(null==c){if(h)throw new Error("`null` is not allowed in branch key positions.");n&&(c=n[s])}else e=n,i=u,n=e[c],u=i&&i[c];return n=w(e,n,u,c,f,l,d,v,y,_,m),[n,e,u,i]}var s=t(37),u=t(44),c=t(34),h=t(47),a=t(43),f=t(45),p=t(121),l=t(51),d=t(95),v=t(97),b=t(103),y=t(87),_=t(144).iterateKeySet,m=t(93),w=t(104);e.exports=function(t,e,n,o,i){for(var s=t._root,u=s,c=s.expired,a=m(),f=s.cache,p=f[h],l=[],d=[],b=[],y=[],_=-1,w=e.length;++_<w;)for(var g=e[_],x=g.paths,E=g.jsonGraph,C=-1,S=x.length;++C<S;){var N=x[C];d.index=0,r(N,0,f,f,f,E,E,E,b,y,l,d,a,c,u,i,o)}var A=f[h],O=s.onChange;return v(O)&&p!==A&&O(),[b,y]}},{103:103,104:104,121:121,144:144,34:34,37:37,43:43,44:44,45:45,47:47,51:51,87:87,93:93,95:95,97:97}],78:[function(t,e,n){function r(t,e,n,o,u,c,h,a,f,p,l,d,v,b){var y=s(t);if(y&&y.length)for(var m=0,g=y.length,x=f.index;;){var E=y[m],C=t[E],S=w(C)&&!C.$type;a.depth=e;var N=i(n,o,u,E,C,S,!1,a,f,p,l,d,v,b);a[e]=E,a.index=e,f[f.index++]=E;var A=N[0],O=N[1];if(A&&(S?r(C,e+1,n,O,A,c,h,a,f,p,l,d,v,b):(_(d,A),c.push(a.slice(0,a.index+1)),h.push(f.slice(0,f.index)))),++m>=g)break;f.index=x}}function o(t,e,n,r,o,s,u,h,p,v){var b=n.value;if(o.splice(0,o.length),o.push.apply(o,b),g(n))return o.index=b.length,C(n,u,h),[void 0,e];_(h,n);var y=n,m=e;if(n=n[f],null!=n)m=n[a]||e,o.index=b.length;else{var w=0,x=b.length-1;m=n=e;do{var S=b[w],N=w<x,A=i(e,m,n,S,t,N,!0,r,o,s,u,h,p,v);if(n=A[0],E(n))return o.index=w,A;m=A[1]}while(w++<x);if(o.index=w,y[f]!==n){var O=n[d]||0;n[d]=O+1,n[c+O]=y,y[f]=n,y[l]=O}}return[n,m]}function i(t,e,n,r,i,s,c,h,a,f,p,l,d,b){for(var y=n.$type;y===v;){var _=o(i,t,n,h,a,f,p,l,d,b);if(n=_[0],E(n))return _;e=_[1],y=n&&n.$type}if(void 0!==y)return[n,e];if(null==r){if(s)throw new Error("`null` is not allowed in branch key positions.");n&&(r=n[u])}else e=n,n=e[r];return n=N(e,n,r,i,s,c,h,a,f,p,l,d,b),[n,e]}function s(t){if(w(t)&&!t.$type){var e=[],n=0;y(t)&&(e[n++]="length");for(var r in t)r[0]!==h&&"$"!==r[0]&&m(t,r)&&(e[n++]=r);return e}}var u=t(37),c=t(44),h=t(41),a=t(40),f=t(34),p=t(47),l=t(43),d=t(45),v=t(121),b=t(14),y=Array.isArray,_=t(51),m=t(92),w=t(101),g=t(96),x=t(97),E=t(103),C=t(87),S=t(93),N=t(105);e.exports=function(t,e,n,o,i){for(var s=t._root,u=s,c=s.expired,h=S(),f=t._path,l=s.cache,d=f.length?b(t,f).value:l,v=d[a]||l,y=l[p],_=[],m=[],w=[],g=f.length,E=-1,C=e.length;++E<C;){var N=e[E],A=f.slice(0);A.index=g,r(N.json,0,l,v,d,m,w,_,A,h,c,u,i,o)}var O=l[p],k=s.onChange;return x(k)&&y!==O&&k(),[m,w]}},{101:101,103:103,105:105,121:121,14:14,34:34,37:37,40:40,41:41,43:43,44:44,45:45,47:47,51:51,87:87,92:92,93:93,96:96,97:97}],79:[function(t,e,n){function r(t,e,n,o,s,u,c,h,a,f,p,l,d,b,y){for(var _={},m=n<e.length-1,g=e[n],x=w(g,_),E=f.index;;){a.depth=n;var C=i(o,s,u,x,t,m,!1,a,f,p,l,d,b,y);a[n]=x,a.index=n,f[f.index++]=x;var S=C[0],N=C[1];if(S&&(m?r(t,e,n+1,o,N,S,c,h,a,f,p,l,d,b,y):(v(d,S),c.push(a.slice(0,a.index+1)),h.push(f.slice(0,f.index)))),x=w(g,_),_.done)break;f.index=E}}function o(t,e,n,r,o,s,a,l,d,y){var w=n.value;if(o.splice(0,o.length),o.push.apply(o,w),b(n))return o.index=w.length,m(n,a,l),[void 0,e];v(l,n);var g=n,x=e;if(n=n[h],null!=n)x=n[c]||e,o.index=w.length;else{var E=0,C=w.length-1;x=n=e;do{var S=w[E],N=E<C,A=i(e,x,n,S,t,N,!0,r,o,s,a,l,d,y);if(n=A[0],_(n))return o.index=E,A;x=A[1]}while(E++<C);if(o.index=E,g[h]!==n){var O=n[p]||0;n[p]=O+1,n[u+O]=g,g[h]=n,g[f]=O}}return[n,x]}function i(t,e,n,r,i,u,c,h,a,f,p,d,v,b){for(var y=n.$type;y===l;){var m=o(i,t,n,h,a,f,p,d,v,b);if(n=m[0],_(n))return m;e=m[1],y=n.$type}if(void 0!==y)return[n,e];if(null==r){if(u)throw new Error("`null` is not allowed in branch key positions.");n&&(r=n[s])}else e=n,n=e[r];return n=x(e,n,r,i,u,c,h,a,f,p,d,v,b),[n,e]}var s=t(37),u=t(44),c=t(40),h=t(34),a=t(47),f=t(43),p=t(45),l=t(121),d=t(14),v=t(51),b=t(96),y=t(97),_=t(103),m=t(87),w=t(144).iterateKeySet,g=t(93),x=t(105);e.exports=function(t,e,n,o,i){for(var s=t._root,u=s,h=s.expired,f=g(),p=t._path,l=s.cache,v=p.length?d(t,p).value:l,b=v[c]||l,_=l[a],m=[],w=[],x=[],E=p.length,C=-1,S=e.length;++C<S;){var N=e[C],A=N.path,O=N.value,k=p.slice(0);k.index=E,r(O,A,0,l,b,v,w,x,m,k,f,h,u,i,o)}var D=l[a],j=s.onChange;return y(j)&&_!==D&&j(),[w,x]}},{103:103,105:105,121:121,14:14,144:144,34:34,37:37,40:40,43:43,44:44,45:45,47:47,51:51,87:87,93:93,96:96,97:97}],80:[function(t,e,n){var r=t(131),o=t(65),i=t(102);e.exports=function(t,e){for(var n=i(t)?t:r.pathValue(t,e),s=0,u=n.path,c=u.length;++s<c;)if("object"==typeof u[s])return new o(function(t){t.onError(new Error("Paths must be simple paths"))});var h=this;return new o(function(t){return h._set(n).subscribe(function(e){for(var n=e.json,r=-1,o=u.length;n&&++r<o;)n=n[u[r]];t.onNext(n)},function(e){t.onError(e)},function(){t.onCompleted()})})}},{102:102,131:131,65:65}],81:[function(t,e,n){var r=t(135),o=t(102),i=t(79);e.exports=function(t,e,n,s){var u=r.fromPath(t),c=e,h=n,a=s;if(o(u)?(a=h,h=c,c=u):c={path:u,value:c},o(c)===!1)throw new Error("Model#setValueSync must be called with an Array path.");if("function"!=typeof h&&(h=this._root._errorSelector),"function"!=typeof a&&(a=this._root._comparator),this._syncCheck("setValueSync"))return i(this,[c]),this._getValueSync(this,c.path).value}},{102:102,135:135,79:79}],82:[function(t,e,n){e.exports=function(t){if(!t)return t;for(var e=-1,n=t.length,r=[];++e<n;)r[e]=t[e];return r}},{}],83:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=-1,o=t.length,i=[];++r<o;)for(var s=e(t[r],r,t),u=-1,c=s.length;++u<c;)i[++n]=s[u];return i}},{}],84:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=t.length,o=new Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},{}],85:[function(t,e,n){e.exports=function(t,e,n){var r=e||0,o=-1,i=t.length-r;i<0&&(i=0),n>0&&i>n&&(i=n);for(var s=new Array(i);++o<i;)s[o]=t[o+r];return s}},{}],86:[function(t,e,n){var r=t(41),o=t(92),i=Array.isArray,s=t(101);e.exports=function(t){var e=t;if(s(e)){e=i(t)?[]:{};var n=t;for(var u in n)u[0]!==r&&o(n,u)&&(e[u]=n[u])}return e}},{101:101,41:41,92:92}],87:[function(t,e,n){var r=t(52),o=t(36);e.exports=function(t,e,n){return t[o]||(t[o]=!0,e.push(t),r(n,t)),t}},{36:36,52:52}],88:[function(t,e,n){var r=t(101);e.exports=function(t){return r(t)&&t.$expires||void 0}},{101:101}],89:[function(t,e,n){var r=t(101);e.exports=function(t){return r(t)&&t.$size||0}},{101:101}],90:[function(t,e,n){var r=t(101);e.exports=function(t){return r(t)&&t.$timestamp||void 0}},{101:101}],91:[function(t,e,n){var r=t(101);e.exports=function(t,e){var n=r(t)&&t.$type||void 0;return e&&n?"branch":n}},{101:101}],92:[function(t,e,n){var r=t(101),o=Object.prototype.hasOwnProperty;e.exports=function(t,e){return r(t)&&o.call(t,e)}},{101:101}],93:[function(t,e,n){var r=1;e.exports=function(){return r++}},{}],94:[function(t,e,n){var r=t(37),o=t(40),i=t(47);e.exports=function(t,e,n,s){return t[r]=n,t[o]=e,t[i]=s,e[n]=t,t}},{37:37,40:40,47:47}],95:[function(t,e,n){var r=t(107),o=t(123),i=t(122);e.exports=function(t){var e=t.$expires;return null!=e&&e!==i&&e!==o&&e<r()}},{107:107,122:122,123:123}],96:[function(t,e,n){var r=t(107),o=t(123),i=t(122);e.exports=function(t){var e=t.$expires;return null!=e&&e!==i&&(e===o||e<r())}},{107:107,122:122,123:123}],97:[function(t,e,n){var r="function";e.exports=function(t){return Boolean(t)&&typeof t===r}},{}],98:[function(t,e,n){var r=t(41);e.exports=function(t){return"$size"===t||t&&t.charAt(0)===r}},{41:41}],99:[function(t,e,n){var r=t(101);e.exports=function(t){return r(t)&&"json"in t}},{101:101}],100:[function(t,e,n){var r=Array.isArray,o=t(101);e.exports=function(t){return o(t)&&r(t.paths)&&(o(t.jsonGraph)||o(t.jsong)||o(t.json)||o(t.values)||o(t.value))}},{101:101}],101:[function(t,e,n){var r="object";e.exports=function(t){return null!==t&&typeof t===r}},{}],102:[function(t,e,n){var r=Array.isArray,o=t(101);e.exports=function(t){return o(t)&&(r(t.path)||"string"==typeof t.path)}},{101:101}],103:[function(t,e,n){var r="object";e.exports=function(t){return null==t||typeof t!==r}},{}],104:[function(t,e,n){var r=t(37),o=t(40),i=t(121),s=t(120),u=t(89),c=t(90),h=t(101),a=t(96),f=t(97),p=t(51),l=t(118),d=t(94),v=t(87),b=t(111),y=t(116),_=t(108);e.exports=function(t,e,n,m,w,g,x,E,C,S,N){var A,O,k,D,j,q,P;if(e===n){if(null===n)return e=l(n,void 0,n),t=y(t,-e.$size,C,x),e=d(e,t,m),p(C,e),e;if(void 0===n)return n;if(D=h(e),D&&(O=e.$type,null==O))return null==e[o]&&(e[r]=m,e[o]=t),e}else D=h(e),D&&(O=e.$type);if(O!==i){if(j=h(n),j&&(k=n.$type),D&&!O&&(null==n||j&&!k))return e}else{if(null==n)return a(e)?void v(e,E,C):e;if(j=h(n),j&&(k=n.$type,k===i))if(e===n){if(null!=e[o])return e}else if(q=e.$timestamp,P=n.$timestamp,!a(e)&&!a(n)&&P<q)return}if(O&&j&&!k)return d(b(e,n,t,m,C),t,m);if(k||!j){if(k===s&&f(N)&&(n=N(_(w,m),n)),k&&e===n)null==e[o]&&(e=l(e,O,e.value),t=y(t,-e.$size,C,x),e=d(e,t,m,x));else{var R=!0;!O&&D||(R=c(n)<c(e)==!1,(O||k)&&f(S)&&(R=!S(e,n,g.slice(0,g.index)))),R&&(n=l(n,k,k?n.value:n),A=u(e)-u(n),e=b(e,n,t,m,C),t=y(t,A,C,x),e=d(e,t,m,x))}a(e)?v(e,E,C):p(C,e)}else null==e&&(e=d(n,t,m));return e}},{101:101,108:108,111:111,116:116,118:118,120:120,121:121,37:37,40:40,51:51,87:87,89:89,90:90,94:94,96:96,97:97}],105:[function(t,e,n){var r=t(121),o=t(120),i=t(91),s=t(89),u=t(90),c=t(96),h=t(103),a=t(97),f=t(118),p=t(87),l=t(94),d=t(111),v=t(116),b=t(115),y=t(108);e.exports=function(t,e,n,_,m,w,g,x,E,C,S,N,A){var O=i(e,w);if(m||w)O&&c(e)&&(O="expired",p(e,C,S)),(O&&O!==r||h(e))&&(e=d(e,{},t,n,S),e=l(e,t,n,E),e=b(e,E));else{var k=_,D=i(k),j=u(k)<u(e)==!1;if((O||D)&&a(N)&&(j=!N(e,k,x.slice(0,x.index))),j){D===o&&a(A)&&(k=A(y(g,n),k)),k=f(k,D,D?k.value:k);var q=s(e)-s(k);e=d(e,k,t,n,S),t=v(t,q,S,E),e=l(e,t,n,E)}}return e}},{103:103,108:108,111:111,115:115,116:116,118:118,120:120,121:121,87:87,89:89,90:90,91:91,94:94,96:96,97:97}],106:[function(t,e,n){e.exports=function(){}},{}],107:[function(t,e,n){e.exports=Date.now},{}],108:[function(t,e,n){e.exports=function(t,e){var n=t.slice(0,t.depth);return n[n.length]=e,n}},{}],109:[function(t,e,n){var r=t(121),o=t(40),i=t(52),s=t(101),u=t(113),c=t(114);e.exports=function(t,e,n,h){if(s(t)){var a=t.$type;return Boolean(a)&&(a===r&&c(t),i(h,t)),u(t),e[n]=t[o]=void 0,!0}return!1}},{101:101,113:113,114:114,121:121,40:40,52:52}],110:[function(t,e,n){var r=t(92),o=t(41),i=t(109);e.exports=function s(t,e,n,u){if(i(t,e,n,u)){if(null==t.$type)for(var c in t)c[0]!==o&&"$"!==c[0]&&r(t,c)&&s(t[c],t,c,u);return!0}return!1}},{109:109,41:41,92:92}],111:[function(t,e,n){var r=t(101),o=t(112),i=t(110);e.exports=function(t,e,n,s,u){return t===e?t:(r(t)&&(o(t,e),i(t,n,s,u)),n[s]=e,e)}},{101:101,110:110,112:112}],112:[function(t,e,n){var r=t(44),o=t(34),i=t(45);e.exports=function(t,e){for(var n=t[i]||0,s=e[i]||0,u=-1;++u<n;){var c=t[r+u];void 0!==c&&(c[o]=e,e[r+(s+u)]=c,t[r+u]=void 0)}return e[i]=n+s,t[i]=void 0,e}},{34:34,44:44,45:45}],113:[function(t,e,n){var r=t(44),o=t(34),i=t(43),s=t(45);e.exports=function(t){for(var e=-1,n=t[s]||0;++e<n;){var u=t[r+e];null!=u&&(u[o]=u[i]=t[r+e]=void 0)}return t[s]=void 0,t}},{34:34,43:43,44:44,45:45}],114:[function(t,e,n){var r=t(44),o=t(34),i=t(43),s=t(45);e.exports=function(t){var e=t[o];if(e){for(var n=(t[i]||0)-1,u=(e[s]||0)-1;++n<=u;)e[r+n]=e[r+(n+1)];e[s]=u,t[i]=t[o]=e=void 0}return t}},{34:34,43:43,44:44,45:45}],115:[function(t,e,n){var r=t(44),o=t(40),i=t(47),s=t(45);e.exports=function(t,e){var n=[t],u=0;do{var c=n[u--];if(c&&c[i]!==e){c[i]=e,n[u++]=c[o];for(var h=-1,a=c[s]||0;++h<a;)n[u++]=c[r+h]}}while(u>-1);return t}},{40:40,44:44,45:45,47:47}],116:[function(t,e,n){var r=t(37),o=t(47),i=t(40),s=t(109),u=t(115);e.exports=function(t,e,n,c){var h=t;do{var a=h[i],f=h.$size=(h.$size||0)-e;f<=0&&null!=a?s(h,a,h[r],n):h[o]!==c&&u(h,c),h=a}while(h);return t}},{109:109,115:115,37:37,40:40,47:47}],117:[function(t,e,n){var r=Array.isArray,o=t(102),i=t(100),s=t(99),u=t(135);e.exports=function(t,e,n){for(var c=0,h=t.length;c<h;++c){var a=t[c],f=!1;if(r(a)&&e.path?f=!0:"string"==typeof a&&e.pathSyntax?f=!0:o(a)&&e.pathValue?(a.path=u.fromPath(a.path),f=!0):i(a)&&e.jsonGraph?f=!0:s(a)&&e.json?f=!0:"function"==typeof a&&c+1===h&&e.selector&&(f=!0),!f)return new Error("Unrecognized argument "+typeof a+" ["+String(a)+"] to Model#"+n)}return!0}},{100:100,102:102,135:135,99:99}],118:[function(t,e,n){var r=t(131),o=r.atom,i=t(107),s=t(123),u=t(38),c=50,h=t(86),a=Array.isArray,f=t(89),p=t(88);e.exports=function(t,e,n){var r=0,l=t,d=e;if(d?(l=h(l),r=f(l),l.$type=d):(l=o(n),d=l.$type,l[u]=!0),null==n)r=c+1;else if(null==r||r<=0)switch(typeof n){case"object":r=a(n)?c+n.length:c+1;break;case"string":r=c+n.length;break;default:r=c+1}var v=p(l);return"number"==typeof v&&v<s&&(l.$expires=i()+v*-1),l.$size=r,l}},{107:107,123:123,131:131,38:38,86:86,88:88,89:89}],119:[function(t,e,n){e.exports="atom"},{}],120:[function(t,e,n){e.exports="error"},{}],121:[function(t,e,n){e.exports="ref"},{}],122:[function(t,e,n){e.exports=1},{}],123:[function(t,e,n){e.exports=0},{}],124:[function(t,e,n){"use strict";function r(){if(c.length)throw c.shift()}function o(t){var e;e=u.length?u.pop():new i,e.task=t,s(e)}function i(){this.task=null}var s=t(125),u=[],c=[],h=s.makeRequestCallFromTimer(r);e.exports=o,i.prototype.call=function(){try{this.task.call()}catch(t){o.onerror?o.onerror(t):(c.push(t),h())}finally{this.task=null,u[u.length]=this}}},{125:125}],125:[function(t,e,n){(function(t){"use strict";function n(t){u.length||(s(),c=!0),u[u.length]=t}function r(){for(;h<u.length;){var t=h;if(h+=1,u[t].call(),h>a){for(var e=0,n=u.length-h;e<n;e++)u[e]=u[e+h];u.length-=h,h=0}}u.length=0,h=0,c=!1}function o(t){var e=1,n=new f(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}e.exports=n;var s,u=[],c=!1,h=0,a=1024,f=t.MutationObserver||t.WebKitMutationObserver;s="function"==typeof f?o(r):i(r),n.requestFlush=s,n.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],126:[function(t,e,n){"use strict";function r(t,e){var n;for(n in e)t[n]=e[n];return t}function o(t,e){if(this._jsongUrl=t,"number"==typeof e){var n={timeout:e};e=n}this._config=r({timeout:15e3,headers:{}},e||{})}var i=t(130),s=t(127);Array.isArray;o.prototype={constructor:o,buildQueryObject:s,get:function(t){var e="GET",n=this.buildQueryObject(this._jsongUrl,e,{paths:t,method:"get"}),o=r(n,this._config),s=this;return i(e,o,s)},set:function(t){var e="POST",n=this.buildQueryObject(this._jsongUrl,e,{jsonGraph:t,method:"set"}),o=r(n,this._config);o.headers["Content-Type"]="application/x-www-form-urlencoded";var s=this;return i(e,o,s)},call:function(t,e,n,o){e=e||[],n=n||[],o=o||[];var s="POST",u=[];u.push("method=call"),u.push("callPath="+encodeURIComponent(JSON.stringify(t))),u.push("arguments="+encodeURIComponent(JSON.stringify(e))),u.push("pathSuffixes="+encodeURIComponent(JSON.stringify(n))),u.push("paths="+encodeURIComponent(JSON.stringify(o)));var c=this.buildQueryObject(this._jsongUrl,s,u.join("&")),h=r(c,this._config);h.headers["Content-Type"]="application/x-www-form-urlencoded";var a=this;return i(s,h,a)}},o.XMLHttpSource=o,o["default"]=o,e.exports=o},{127:127,130:130}],127:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,o=[],i={url:t},s=t.indexOf("?")!==-1,u=s?"&":"?";return"string"==typeof n?o.push(n):(r=Object.keys(n),r.forEach(function(t){var e="object"==typeof n[t]?JSON.stringify(n[t]):n[t];o.push(t+"="+encodeURIComponent(e))})),"GET"===e?i.url+=u+o.join("&"):i.data=o.join("&"),i}},{}],128:[function(t,e,n){(function(t){"use strict";e.exports=function(){var e=new t.XMLHttpRequest;if("withCredentials"in e)return e;if(t.XDomainRequest)return new XDomainRequest;throw new Error("CORS is not supported by your browser")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],129:[function(t,e,n){(function(t){"use strict";e.exports=function(){var e,n,r;if(t.XMLHttpRequest)return new t.XMLHttpRequest;try{for(n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=n[r],new t.ActiveXObject(e))break}catch(o){}return new t.ActiveXObject(e)}catch(o){throw new Error("XMLHttpRequest is not supported by your browser")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],130:[function(t,e,n){"use strict";function r(){}function o(t,e,n){return r.create(function(r){var o,i,f,p,l,d={method:t||"GET",crossDomain:!1,async:!0,headers:{},responseType:"json"};for(l in e)a.call(e,l)&&(d[l]=e[l]);d.crossDomain||d.headers["X-Requested-With"]||(d.headers["X-Requested-With"]="XMLHttpRequest"),null!=n.onBeforeRequest&&n.onBeforeRequest(d);try{o=d.crossDomain?h():c()}catch(v){r.onError(v)}try{d.user?o.open(d.method,d.url,d.async,d.user,d.password):o.open(d.method,d.url,d.async),o.timeout=d.timeout,o.withCredentials=d.withCredentials!==!1,f=d.headers;for(p in f)a.call(f,p)&&o.setRequestHeader(p,f[p]);if(d.responseType)try{o.responseType=d.responseType}catch(b){if("json"!==d.responseType)throw b}o.onreadystatechange=function(t){4===o.readyState&&(i||(i=!0,s(r,o,t)))},o.ontimeout=function(t){i||(i=!0,u(r,o,"timeout error",t))},o.send(d.data)}catch(b){r.onError(b)}return function(){i||4===o.readyState||(i=!0,o.abort())}})}function i(t,e,n){n||(n=new Error(e)),t.onError(n)}function s(t,e,n){var r,o;if(e&&t){o=e.responseType,r="response"in e?e.response:e.responseText;var s=1223===e.status?204:e.status;if(s>=200&&s<=399){try{"json"!==o&&(r=JSON.parse(r||"")),"string"==typeof r&&(r=JSON.parse(r||""))}catch(n){i(t,"invalid json",n)}return t.onNext(r),void t.onCompleted()}return 401===s||403===s||407===s?i(t,r):410===s?i(t,r):408===s||504===s?i(t,r):i(t,r||"Response code "+s)}}function u(t,e,n,r){i(t,n||e.statusText||"request error",r)}var c=t(129),h=t(128),a=Object.prototype.hasOwnProperty,f=function(){};r.create=function(t){var e=new r;return e.subscribe=function(e,n,r){var o,i;return o="function"==typeof e?{onNext:e,onError:n||f,onCompleted:r||f}:e,i=t(o),"function"==typeof i?{dispose:i}:i},e},e.exports=o},{128:128,129:129}],131:[function(t,e,n){function r(t,e,n){var r=Object.create(null);if(null!=n){for(var o in n)r[o]=n[o];return r.$type=t,r.value=e,r}return{$type:t,value:e}}var o=t(135);e.exports={ref:function(t,e){return r("ref",o.fromPath(t),e)},atom:function(t,e){return r("atom",t,e)},undefined:function(){return r("atom")},error:function(t,e){return r("error",t,e)},pathValue:function(t,e){return{path:o.fromPath(t),value:e}},pathInvalidation:function(t){return{path:o.fromPath(t),invalidated:!0}}}},{135:135}],132:[function(t,e,n){e.exports={integers:"integers",ranges:"ranges",keys:"keys"}},{}],133:[function(t,e,n){var r={token:"token",dotSeparator:".",commaSeparator:",",openingBracket:"[",closingBracket:"]",openingBrace:"{",closingBrace:"}",escape:"\\",space:" ",colon:":",quote:"quote",unknown:"unknown"};e.exports=r},{}],134:[function(t,e,n){e.exports={indexer:{nested:"Indexers cannot be nested.",needQuotes:"unquoted indexers must be numeric.",empty:"cannot have empty indexers.",leadingDot:"Indexers cannot have leading dots.",leadingComma:"Indexers cannot have leading comma.",requiresComma:"Indexers require commas between indexer args.",routedTokens:"Only one token can be used per indexer when specifying routed tokens."},range:{precedingNaN:"ranges must be preceded by numbers.",suceedingNaN:"ranges must be suceeded by numbers."},routed:{invalid:"Invalid routed token.  only integers|ranges|keys are supported."},quote:{empty:"cannot have empty quoted keys.",illegalEscape:"Invalid escape character.  Only quotes are escapable."},unexpectedToken:"Unexpected token.",invalidIdentifier:"Invalid Identifier.",invalidPath:"Please provide a valid path.",throwError:function(t,e,n){if(n)throw t+" -- "+e.parseString+" with next token: "+n;throw t+" -- "+e.parseString}}},{}],135:[function(t,e,n){var r=t(141),o=t(136),i=t(132),s=function(t,e){return o(new r(t,e))};e.exports=s,s.fromPathsOrPathValues=function(t,e){if(!t)return[];for(var n=[],r=0,o=t.length;r<o;r++)"string"==typeof t[r]?n[r]=s(t[r],e):"string"==typeof t[r].path?n[r]={path:s(t[r].path,e),value:t[r].value}:n[r]=t[r];return n},s.fromPath=function(t,e){return t?"string"==typeof t?s(t,e):t:[]},s.RoutedTokens=i},{132:132,136:136,141:141}],136:[function(t,e,n){var r=t(133),o=t(134),i=t(137);e.exports=function(t){for(var e=t.next(),n={},s=[];!e.done;){switch(e.type){case r.token:var u=+e.token[0];isNaN(u)||o.throwError(o.invalidIdentifier,t),s[s.length]=e.token;break;case r.dotSeparator:0===s.length&&o.throwError(o.unexpectedToken,t);break;case r.space:break;case r.openingBracket:i(t,e,n,s);break;default:o.throwError(o.unexpectedToken,t)}e=t.next()}return 0===s.length&&o.throwError(o.invalidPath,t),s}},{133:133,134:134,137:137}],137:[function(t,e,n){var r=t(133),o=t(134),i=o.indexer,s=t(139),u=t(138),c=t(140);e.exports=function(t,e,n,h){var a=t.next(),f=!1,p=1,l=!1;for(n.indexer=[];!a.done;){switch(a.type){case r.token:case r.quote:n.indexer.length===p&&o.throwError(i.requiresComma,t)}switch(a.type){case r.openingBrace:l=!0,c(t,a,n,h);break;case r.token:var d=+a.token;isNaN(d)&&o.throwError(i.needQuotes,t),
n.indexer[n.indexer.length]=d;break;case r.dotSeparator:n.indexer.length||o.throwError(i.leadingDot,t),s(t,a,n,h);break;case r.space:break;case r.closingBracket:f=!0;break;case r.quote:u(t,a,n,h);break;case r.openingBracket:o.throwError(i.nested,t);break;case r.commaSeparator:++p;break;default:o.throwError(o.unexpectedToken,t)}if(f)break;a=t.next()}0===n.indexer.length&&o.throwError(i.empty,t),n.indexer.length>1&&l&&o.throwError(i.routedTokens,t),1===n.indexer.length&&(n.indexer=n.indexer[0]),h[h.length]=n.indexer,n.indexer=void 0}},{133:133,134:134,138:138,139:139,140:140}],138:[function(t,e,n){var r=t(133),o=t(134),i=o.quote;e.exports=function(t,e,n,s){for(var u=t.next(),c="",h=e.token,a=!1,f=!1;!u.done;){switch(u.type){case r.token:case r.space:case r.dotSeparator:case r.commaSeparator:case r.openingBracket:case r.closingBracket:case r.openingBrace:case r.closingBrace:a&&o.throwError(i.illegalEscape,t),c+=u.token;break;case r.quote:a?(c+=u.token,a=!1):u.token!==h?c+=u.token:f=!0;break;case r.escape:a=!0;break;default:o.throwError(o.unexpectedToken,t)}if(f)break;u=t.next()}0===c.length&&o.throwError(i.empty,t),n.indexer[n.indexer.length]=c}},{133:133,134:134}],139:[function(t,e,n){var r=t(141),o=t(133),i=t(134);e.exports=function(t,e,n,s){var u,c=t.peek(),h=1,a=!1,f=!0,p=n.indexer.length-1,l=r.toNumber(n.indexer[p]);for(isNaN(l)&&i.throwError(i.range.precedingNaN,t);!a&&!c.done;){switch(c.type){case o.dotSeparator:3===h&&i.throwError(i.unexpectedToken,t),++h,3===h&&(f=!1);break;case o.token:u=r.toNumber(t.next().token),isNaN(u)&&i.throwError(i.range.suceedingNaN,t),a=!0;break;default:a=!0}if(a)break;t.next(),c=t.peek()}n.indexer[p]={from:l,to:f?u:u-1}}},{133:133,134:134,141:141}],140:[function(t,e,n){var r=t(133),o=t(132),i=t(134),s=i.routed;e.exports=function(t,e,n,u){var c=t.next(),h=!1,a="";switch(c.token){case o.integers:case o.ranges:case o.keys:break;default:i.throwError(s.invalid,t)}var f=t.next();if(f.type===r.colon&&(h=!0,f=t.next(),f.type!==r.token&&i.throwError(s.invalid,t),a=f.token,f=t.next()),f.type===r.closingBrace){var p={type:c.token,named:h,name:a};n.indexer[n.indexer.length]=p}else i.throwError(s.invalid,t)}},{132:132,133:133,134:134}],141:[function(t,e,n){function r(t,e,n){return{token:t,done:n,type:e}}function o(t,e,n){var o,m=!1,w="",g=n?_:y;do{if(o=e+1>=t.length)break;var x=t[e+1];if(void 0===x||g.indexOf(x)!==-1){if(w.length)break;++e;var E;switch(x){case s:E=i.dotSeparator;break;case u:E=i.commaSeparator;break;case c:E=i.openingBracket;break;case h:E=i.closingBracket;break;case a:E=i.openingBrace;break;case f:E=i.closingBrace;break;case b:E=i.space;break;case d:case v:E=i.quote;break;case l:E=i.escape;break;case p:E=i.colon;break;default:E=i.unknown}m=r(x,E,!1);break}w+=x,++e}while(!o);return!m&&w.length&&(m=r(w,i.token,!1)),m||(m={done:!0}),{token:m,idx:e}}var i=t(133),s=".",u=",",c="[",h="]",a="{",f="}",p=":",l="\\",d='"',v="'",b=" ",y="\\'\"[]., ",_="\\{}'\"[]., :",m=e.exports=function(t,e){this._string=t,this._idx=-1,this._extended=e,this.parseString=""};m.prototype={next:function(){var t=this._nextToken?this._nextToken:o(this._string,this._idx,this._extended);return this._idx=t.idx,this._nextToken=!1,this.parseString+=t.token.token,t.token},peek:function(){var t=this._nextToken?this._nextToken:o(this._string,this._idx,this._extended);return this._nextToken=t,t.token}},m.toNumber=function(t){return isNaN(+t)?NaN:+t}},{133:133}],142:[function(t,e,n){var r=t(148),o=t(149);e.exports=function(t){var e=t.reduce(function(t,e){var n=e.length;return t[n]||(t[n]=[]),t[n].push(e),t},{});return Object.keys(e).forEach(function(t){e[t]=o(e[t])}),r(e)}},{148:148,149:149}],143:[function(t,e,n){var r=t(145);e.exports=function o(t,e,n){for(var i=t,s=!0;s&&n<e.length;++n){var u=e[n],c=typeof u;if(u&&"object"===c){var h={},a=r(u,h),f=n+1;do{var p=i[a];s=void 0!==p,s&&(s=o(p,e,f)),a=r(u,h)}while(s&&!h.done);break}i=i[u],s=void 0!==i}return s}},{145:145}],144:[function(t,e,n){e.exports={iterateKeySet:t(145),toTree:t(149),toTreeWithUnion:t(150),pathsComplementFromTree:t(147),pathsComplementFromLengthTree:t(146),hasIntersection:t(143),toPaths:t(148),collapse:t(142)}},{142:142,143:143,145:145,146:146,147:147,148:148,149:149,150:150}],145:[function(t,e,n){function r(t,e){var n=e.from=t.from||0,r=e.to=t.to||"number"==typeof t.length&&e.from+t.length-1||0;e.rangeOffset=e.from,e.loaded=!0,n>r&&(e.empty=!0)}function o(t,e){e.done=!1;var n=e.isObject=!(!t||"object"!=typeof t);e.isArray=n&&i(t),e.arrayOffset=0}var i=Array.isArray;e.exports=function(t,e){if(void 0===e.isArray&&o(t,e),e.isArray){var n;do{e.loaded&&e.rangeOffset>e.to&&(++e.arrayOffset,e.loaded=!1);var i=e.arrayOffset,s=t.length;if(i>=s){e.done=!0;break}var u=t[e.arrayOffset],c=typeof u;if("object"===c){if(e.loaded||r(u,e),e.empty)continue;n=e.rangeOffset++}else++e.arrayOffset,n=u}while(void 0===n);return n}return e.isObject?(e.loaded||r(t,e),e.rangeOffset>e.to?void(e.done=!0):e.rangeOffset++):(e.done=!0,t)}},{}],146:[function(t,e,n){var r=t(143);e.exports=function(t,e){for(var n=[],o=-1,i=0,s=t.length;i<s;++i){var u=t[i];r(e[u.length],u,0)||(n[++o]=u)}return n}},{143:143}],147:[function(t,e,n){var r=t(143);e.exports=function(t,e){for(var n=[],o=-1,i=0,s=t.length;i<s;++i)r(e,t[i],0)||(n[++o]=t[i]);return n}},{143:143}],148:[function(t,e,n){function r(t){return null!==t&&typeof t===p}function o(t,e,n){var r,i,s,u,f,p,l,d,v,b,y,_,m,w,g=h(String(e)),x=Object.create(null),E=[],C=-1,S=0,N=[],A=0;if(u=[],f=-1,e<n-1){for(p=c(t,u);++f<p;)r=u[f],i=o(t[r],e+1,n),s=i.code,x[s]?i=x[s]:(E[S++]=s,i=x[s]={keys:[],sets:i.sets}),g=h(g+r+s),a(r)&&i.keys.push(parseInt(r,10))||i.keys.push(r);for(;++C<S;)if(r=E[C],i=x[r],u=i.keys,p=u.length,p>0)for(l=i.sets,d=-1,v=l.length,m=u[0];++d<v;){for(b=l[d],y=-1,_=b.length,w=new Array(_+1),w[0]=p>1&&u||m;++y<_;)w[y+1]=b[y];N[A++]=w}}else for(p=c(t,u),p>1?N[A++]=[u]:N[A++]=u;++f<p;)g=h(g+u[f]);return{code:g,sets:N}}function i(t){for(var e=-1,n=t.length;++e<n;){var r=t[e];f(r)&&(t[e]=s(r))}return t}function s(t){for(var e=-1,n=t.length-1,r=n>0;++e<=n;){var o=t[e];if(!a(o)){r=!1;break}t[e]=parseInt(o,10)}if(r===!0){t.sort(u);var i=t[0],s=t[n];if(s-i<=n)return{from:i,to:s}}return t}function u(t,e){return t-e}function c(t,e,n){var r=0;for(var o in t)e[r++]=o;return r>1&&e.sort(n),r}function h(t){for(var e=5381,n=-1,r=t.length;++n<r;)e=(e<<5)+e+t.charCodeAt(n);return String(e)}function a(t){return!f(t)&&t-parseFloat(t)+1>=0}var f=Array.isArray,p="object";e.exports=function(t){var e,n=[],s=0;for(var u in t)if(a(u)&&r(e=t[u]))for(var c=o(e,0,parseInt(u,10)).sets,h=-1,f=c.length;++h<f;)n[s++]=i(c[h]);return n}},{}],149:[function(t,e,n){function r(t,e,n){var i,s=e[n],u={},c=n+1;i=o(s,u);do{var h=t[i];h||(c===e.length?t[i]=null:h=t[i]={}),c<e.length&&r(h,e,c),u.done||(i=o(s,u))}while(!u.done)}var o=t(145);Array.isArray;e.exports=function(t){return t.reduce(function(t,e){return r(t,e,0),t},{})}},{145:145}],150:[function(t,e,n){},{}],151:[function(t,e,n){arguments[4][142][0].apply(n,arguments)},{142:142,164:164,165:165}],152:[function(t,e,n){e.exports={innerReferences:"References with inner references are not allowed.",circularReference:"There appears to be a circular reference, maximum reference following exceeded."}},{}],153:[function(t,e,n){var r=t(162),o=t(163).$ref,i=t(152);e.exports=function(t,e,n){for(var s,u,c,h=t,a=e,f=-1,p=a.length,l=0;++f<p;){if(s=a[f],u=h[s],c=u&&u.$type,!u||c&&c!==o){h=u;break}if(c&&c===o&&f+1<p){var d=new Error(i.innerReferences);throw d.throwToNext=!0,d}if(f+1===p&&(c===o&&(f=-1,a=u.value,p=a.length,u=t,l++),l>n))throw new Error(i.circularReference);h=u}return[h,r(a)]}},{152:152,162:162,163:163}],154:[function(t,e,n){arguments[4][143][0].apply(n,arguments)},{143:143,156:156}],155:[function(t,e,n){e.exports={iterateKeySet:t(156),toTree:t(165),pathsComplementFromTree:t(160),pathsComplementFromLengthTree:t(159),hasIntersection:t(154),toPaths:t(164),collapse:t(151),optimizePathSets:t(157),pathCount:t(158)}},{151:151,154:154,156:156,157:157,158:158,159:159,160:160,164:164,165:165}],156:[function(t,e,n){arguments[4][145][0].apply(n,arguments)},{145:145}],157:[function(t,e,n){function r(t,e,n,u,a,f,p){if(void 0===t)return void(a[a.length]=s(f,n,u));if(!(null===t||t.$type&&t.$type!==c||"object"!=typeof t||t.$type===c&&u===n.length)){var l=n[u],d="object"==typeof l,v=u+1,b=!1,y=l;d&&(b={},y=o(l,b));var _,m;do{_=t[y];var w=f.length;if(null!==y&&(f[w]=y),_&&_.$type===c&&v<n.length){var g=h(e,_.value,p);_=g[0],m=i(g[1])}else m=f;r(_,e,n,v,a,m,p),f.length=w,b&&!b.done&&(y=o(l,b))}while(b&&!b.done)}}var o=t(156),i=t(162),s=t(161),u=t(163),c=u.$ref,h=t(153);e.exports=function(t,e,n){var o=[];return e.forEach(function(e){r(t,t,e,0,o,[],n)}),o}},{153:153,156:156,161:161,162:162,163:163}],158:[function(t,e,n){"use strict";function r(t){if(null==t)return 1;if(Array.isArray(t))throw new Error("Unexpected Array found in keySet: "+JSON.stringify(t));return"object"==typeof t?o(t):1}function o(t){var e=t.to,n=t.length;if(null!=e){if(isNaN(e)||parseInt(e,10)!==e)throw new Error("Invalid range, 'to' is not an integer: "+JSON.stringify(t));var r=t.from||0;if(isNaN(r)||parseInt(r,10)!==r)throw new Error("Invalid range, 'from' is not an integer: "+JSON.stringify(t));return r<=e?e-r+1:0}if(null!=n){if(isNaN(n)||parseInt(n,10)!==n)throw new Error("Invalid range, 'length' is not an integer: "+JSON.stringify(t));return n}throw new Error("Invalid range, expected 'to' or 'length': "+JSON.stringify(t))}function i(t){if(0===t.length)throw new Error("All paths must have length larger than zero.");for(var e=1,n=0;n<t.length;n++){var o=t[n];if(Array.isArray(o)){for(var i=0,s=0;s<o.length;s++){var u=o[s];i+=r(u)}e*=i}else e*=r(o)}return e}e.exports=i},{}],159:[function(t,e,n){arguments[4][146][0].apply(n,arguments)},{146:146,154:154}],160:[function(t,e,n){arguments[4][147][0].apply(n,arguments)},{147:147,154:154}],161:[function(t,e,n){e.exports=function(t,e,n){var r,o,i,s=[];for(r=0,i=t.length;r<i;++r)s[r]=t[r];for(o=n||0,i=e.length;o<i;++o,++r)s[r]=e[o];return s}},{}],162:[function(t,e,n){function r(t,e){for(var n=[],r=t.length,o=e||0;o<r;o++)n[o]=t[o];return n}e.exports=r},{}],163:[function(t,e,n){e.exports={$ref:"ref",$atom:"atom",$error:"error"}},{}],164:[function(t,e,n){function r(t){return null!==t&&typeof t===p}function o(t,e,n){var r,i,s,u,f,p,l,d,v,b,y,_,m,w,g=h(String(e)),x=Object.create(null),E=[],C=-1,S=0,N=[],A=0;if(u=[],f=-1,e<n-1){for(p=c(t,u);++f<p;)r=u[f],i=o(t[r],e+1,n),s=i.code,x[s]?i=x[s]:(E[S++]=s,i=x[s]={keys:[],sets:i.sets}),g=h(g+r+s),a(r)&&i.keys.push(parseInt(r,10))||i.keys.push(r);for(;++C<S;)if(r=E[C],i=x[r],u=i.keys,p=u.length,p>0)for(l=i.sets,d=-1,v=l.length,m=u[0];++d<v;){for(b=l[d],y=-1,_=b.length,w=new Array(_+1),w[0]=p>1&&u||m;++y<_;)w[y+1]=b[y];N[A++]=w}}else for(p=c(t,u),p>1?N[A++]=[u]:N[A++]=u;++f<p;)g=h(g+u[f]);return{code:g,sets:N}}function i(t){for(var e=-1,n=t.length;++e<n;){var r=t[e];f(r)&&(t[e]=s(r))}return t}function s(t){for(var e=-1,n=t.length-1,r=n>0;++e<=n;){var o=t[e];if(!a(o)){r=!1;break}t[e]=parseInt(o,10)}if(r===!0){t.sort(u);var i=t[0],s=t[n];if(s-i<=n)return{from:i,to:s}}return t}function u(t,e){return t-e}function c(t,e,n){var r=0;for(var o in t)e[r++]=o;return r>1&&e.sort(n),r}function h(t){for(var e=5381,n=-1,r=t.length;++n<r;)e=(e<<5)+e+t.charCodeAt(n);return String(e)}function a(t){var e=t,n=typeof t;if(n===l){var r=t.length;if(0===r||r>y)return!1;if(!m.test(t))return!1;if(r<b)return!0;e=+t}else if(n!==d)return!1;return e%1===0&&_(e)<=v}var f=Array.isArray,p="object",l="string",d="number",v=9007199254740991,b=16,y=17,_=Math.abs,m=/^(0|(\-?[1-9][0-9]*))$/;e.exports=function(t){var e,n=[],s=0;for(var u in t)if(a(u)&&r(e=t[u]))for(var c=o(e,0,parseInt(u,10)).sets,h=-1,f=c.length;++h<f;)n[s++]=i(c[h]);return n},e.exports._isSafeNumber=a},{}],165:[function(t,e,n){arguments[4][149][0].apply(n,arguments)},{149:149,156:156}],166:[function(e,n,r){(function(e,o){(function(i){function s(t){return t&&t.Object===Object?t:null}function u(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function c(t){return function(){try{return t.apply(this,arguments)}catch(e){return ne.e=e,ne}}}function h(t){throw t}function a(t,e){if(oe&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(ce)===-1){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+ce+"\n");t.stack=f(o)}}function f(t){for(var e=t.split("\n"),n=[],r=0,o=e.length;r<o;r++){var i=e[r];p(i)||l(i)||!i||n.push(i)}return n.join("\n")}function p(t){var e=v(t);if(!e)return!1;var n=e[0],r=e[1];return n===se&&r>=ue&&r<=Vs}function l(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function d(){if(oe)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=v(n);if(!r)return;return se=r[0],r[1]}}function v(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function b(t,e,n,r,o,s){var u=He(t),c=u.length,h=He(e),a=h.length;if(c!==a&&!r)return!1;for(var f,p=c;p--;)if(f=u[p],!(r?f in e:Be.call(e,f)))return!1;for(var l=r;++p<c;){f=u[p];var d,v=t[f],b=e[f];if(!(d===i?n(v,b,r,o,s):d))return!1;l||(l="constructor"===f)}if(!l){var y=t.constructor,_=e.constructor;if(y!==_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _))return!1}return!0}function y(t,e,n){switch(n){case Ee:case Ce:return+t===+e;case Se:return t.name===e.name&&t.message===e.message;case Oe:return t!==+t?e!==+e:t===+e;case De:case qe:return t===e+""}return!1}function _(t){return!!t&&"object"==typeof t}function m(t){return"number"==typeof t&&t>-1&&t%1===0&&t<=Ke}function w(t){return _(t)&&m(t.length)&&!!Le[Ue.call(t)]}function g(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function x(t,e,n,r,o,s){var u=-1,c=t.length,h=e.length;if(c!==h&&!(r&&h>c))return!1;for(;++u<c;){var a,f=t[u],p=e[u];if(a!==i){if(a)continue;return!1}if(r){if(!g(e,function(t){return f===t||n(f,t,r,o,s)}))return!1}else if(f!==p&&!n(f,p,r,o,s))return!1}return!0}function E(t,e,n,r,o,i){var s=Xe(t),u=Xe(e),c=xe,h=xe;s||(c=Ue.call(t),c===ge?c=ke:c!==ke&&(s=w(t))),u||(h=Ue.call(e),h===ge&&(h=ke));var a=c===ke&&!Qe(t),f=h===ke&&!Qe(e),p=c===h;if(p&&!s&&!a)return y(t,e,c);if(!r){var l=a&&Be.call(t,"__wrapped__"),d=f&&Be.call(e,"__wrapped__");if(l||d)return n(l?t.value():t,d?e.value():e,r,o,i)}if(!p)return!1;o||(o=[]),i||(i=[]);for(var v=o.length;v--;)if(o[v]===t)return i[v]===e;o.push(t),i.push(e);var _=(s?x:b)(t,e,n,r,o,i);return o.pop(),i.pop(),_}function C(t,e,n,r,o){return t===e||(null==t||null==e||!st(t)&&!_(e)?t!==t&&e!==e:E(t,e,C,n,r,o))}function S(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}function N(t,e){this.id=t,this.value=e}function A(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function O(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function k(t){this._s=t,this.isDisposed=!1}function D(t){this._s=t}function j(t){this._s=t,this._l=t.length,this._i=0}function q(t){this._a=t}function P(t){this._a=t,this._l=F(t),this._i=0}function R(t){return"number"==typeof t&&Bt.isFinite(t)}function T(t){var e,n=t[ve];if(!n&&"string"==typeof t)return e=new D(t),e[ve]();if(!n&&t.length!==i)return e=new q(t),e[ve]();if(!n)throw new TypeError("Object is not iterable");return t[ve]()}function M(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}function F(t){var e=+t.length;return isNaN(e)?0:0!==e&&R(e)?(e=M(e)*Math.floor(Math.abs(e)),e<=0?0:e>yr?yr:e):e}function V(t,e){return gn(t)||(t=On),new mr(e,t)}function W(t,e){this.observer=t,this.parent=e}function $(t,e){return t.amb(e)}function I(){return!1}function z(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function I(){return!1}function z(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function I(){return!1}function G(){return[]}function I(){return!1}function G(){return[]}function z(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function L(t){return function(e){return t.subscribe(e)}}function J(t){return t.toArray()}function B(t){return t.length>0}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function K(t,e,n){var r=me(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return te(o)&&(o=hr(o)),(_e(o)||ye(o))&&(o=_r(o)),o}).concatAll()}function H(t,e,n){for(var r=0,o=t.length;r<o;r++)if(n(t[r],e))return r;return-1}function Q(t){this.comparer=t,this.set=[]}function X(t,e){return function(n){for(var r=n,o=0;o<e;o++){var s=r[t[o]];if("undefined"==typeof s)return i;r=s}return r}}function Y(t){if(0===t.length)throw new he;return t[0]}function Z(t,e,n,r){var o=me(e,n,3);return new ks(function(e){return t.subscribe(new li(e,t,o,r))},t)}function tt(t){return t?Qn.isObservable(t)?t:te(t)?Qn.fromPromise(t):it(t)||ot(t)?xi.call(this,t):ee(t)?rt.call(this,t):_e(t)||ye(t)?et.call(this,t):st(t)?nt.call(this,t):t:t}function et(t){return Qn.from(t).concatMap(function(t){return Qn.isObservable(t)||st(t)?tt.call(null,t):Ut.Observable.just(t)}).toArray()}function nt(t){function e(t,e){n[e]=i,o.push(t.map(function(t){n[e]=t}))}for(var n=new t.constructor,r=Object.keys(t),o=[],s=0,u=r.length;s<u;s++){var c=r[s],h=tt.call(this,t[c]);h&&Qn.isObservable(h)?e(h,c):n[c]=t[c]}return Qn.forkJoin.apply(Qn,o).map(function(){return n})}function rt(t){var e=this;return new ks(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],o=1,i=arguments.length;o<i;o++)r.push(arguments[o]);e=r}n.onNext(e),n.onCompleted()})})}function ot(t){return ee(t.next)&&ee(t["throw"])}function it(t){var e=t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName||ot(e.prototype))}function st(t){return Object==t.constructor}function ut(t,e,n,r){var o=new Rs;return r.push(ct(o,e,n)),t.apply(e,r),o.asObservable()}function ct(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];if(ee(n)){if(o=re(n).apply(e,o),o===ne)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function ht(t,e,n,r){var o=new Rs;return r.push(at(o,e,n)),t.apply(e,r),o.asObservable()}function at(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var o=arguments.length,i=[],s=1;s<o;s++)i[s-1]=arguments[s];if(ee(n)){var i=re(n).apply(e,i);if(i===ne)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function ft(t){return Bt.StaticNodeList?t instanceof Bt.StaticNodeList||t instanceof Bt.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function pt(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function lt(t,e,n){var r=new on,o=Object.prototype.toString.call(t);if(ft(t)||"[object HTMLCollection]"===o)for(var i=0,s=t.length;i<s;i++)r.add(lt(t.item(i),e,n));else t&&r.add(new pt(t,e,n));return r}function dt(t,e,n){return new ks(function(r){function o(t,e){if(h[e]=t,s[e]=!0,u||(u=s.every(Ht))){if(i)return r.onError(i);var o=re(n).apply(null,h);if(o===ne)return r.onError(o.e);r.onNext(o)}c&&h[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,c=!1,h=new Array(2);return new vn(t.subscribe(function(t){o(t,0)},function(t){h[1]?r.onError(t):i=t},function(){c=!0,h[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){c=!0,o(!0,1)}))},t)}function J(t){return t.toArray()}function vt(t,e){return t.groupJoin(this,e,vr,function(t,e){return e})}function bt(t){var e=this;return new ks(function(n){var r=new Ps,o=new on,i=new yn(o);return n.onNext(en(r,i)),o.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),te(t)&&(t=hr(t)),o.add(t.subscribe(function(t){r.onCompleted(),r=new Ps,n.onNext(en(r,i))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),i},e)}function yt(t){var e=this;return new ks(function(n){function r(){var e;try{e=t()}catch(i){return void n.onError(i)}te(e)&&(e=hr(e));var c=new ln;o.setDisposable(c),c.setDisposable(e.take(1).subscribe(Kt,function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),u=new Ps,n.onNext(en(u,s)),r()}))}var o=new dn,i=new on(o),s=new yn(i),u=new Ps;return n.onNext(en(u,s)),i.add(e.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),n.onCompleted()})),r(),s},e)}function _t(t,e){return new Wi(t,e)}function z(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}function mt(t){this.patterns=t}function wt(t,e){this.expression=t,this.selector=e}function gt(t){return function(e){t.onError(e)}}function xt(t,e){return function(){var n=re(t.selector).apply(t,arguments);return n===ne?e.onError(n.e):void e.onNext(n)}}function Et(t,e,n){var r=t.get(e);if(!r){var o=new Ui(e,n);return t.set(e,o),o}return r}function Ct(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new Bi;for(var r=0,o=this.joinObserverArray.length;r<o;r++){var i=this.joinObserverArray[r];this.joinObservers.set(i,i)}}function St(t,e){return new Ki(t,e)}function Nt(t,e,n){return new ks(function(r){var o=t,i=wn(e);return n.scheduleRecursiveFuture(0,o,function(t,e){if(i>0){var s=n.now();o=new Date(o.getTime()+i),o.getTime()<=s&&(o=new Date(s+i))}r.onNext(t),e(t+1,new Date(o))})})}function At(t,e,n){return t===e?new ks(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):pr(function(){return Nt(new Date(n.now()+t),e,n)})}function Ot(t,e,n){return new ks(function(r){var o,i=!1,s=new dn,u=null,c=[],h=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,a;"E"===t.value.kind?(c=[],c.push(t),u=t.value.error,a=!h):(c.push({value:t.value,timestamp:t.timestamp+e}),a=!i,i=!0),a&&(null!==u?r.onError(u):(o=new ln,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var o,s,a,f;if(null===u){h=!0;do a=null,c.length>0&&c[0].timestamp-n.now()<=0&&(a=c.shift().value),null!==a&&a.accept(r);while(null!==a);f=!1,s=0,c.length>0?(f=!0,s=Math.max(0,c[0].timestamp-n.now())):i=!1,o=u,h=!1,null!==o?r.onError(o):f&&e(null,s)}}))))}),new vn(o,s)},t)}function kt(t,e,n){return pr(function(){return Ot(t,e-n.now(),n)})}function Dt(t,e,n){var r,o;return ee(e)?o=e:(r=e,o=n),new ks(function(e){function n(){c.setDisposable(t.subscribe(function(t){var n=re(o)(t);if(n===ne)return e.onError(n.e);var r=new ln;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),i()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),i()}))},function(t){e.onError(t)},function(){u=!0,c.dispose(),i()}))}function i(){u&&0===s.length&&e.onCompleted()}var s=new on,u=!1,c=new dn;return r?c.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new vn(c,s)},t)}function jt(t,e){return new ks(function(n){var r,o=!1,i=new dn,s=0,u=t.subscribe(function(t){var u=re(e)(t);if(u===ne)return n.onError(u.e);te(u)&&(u=hr(u)),o=!0,r=t,s++;var c=s,h=new ln;i.setDisposable(h),h.setDisposable(u.subscribe(function(){o&&s===c&&n.onNext(r),o=!1,h.dispose()},function(t){n.onError(t)},function(){o&&s===c&&n.onNext(r),o=!1,h.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new vn(u,i)},t)}function J(t){return t.toArray()}function J(t){return t.toArray()}function qt(t,e,n,r){return ee(e)&&(r=n,n=e,e=Cr()),Qn.isObservable(r)||(r=Dr(new is)),new ks(function(o){function i(t){function e(){return f=n===a}var n=a,i=new ln;c.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&u.setDisposable(r.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&u.setDisposable(r.subscribe(o))}))}function s(){var t=!f;return t&&a++,t}var u=new dn,c=new dn,h=new ln;u.setDisposable(h);var a=0,f=!1;return i(e),h.setDisposable(t.subscribe(function(t){if(s()){o.onNext(t);var e=re(n)(t);if(e===ne)return o.onError(e.e);i(te(e)?hr(e):e)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new vn(u,c)},t)}function Pt(t,e,n,r){return gn(n)&&(r=n,n=Dr(new is)),n instanceof Error&&(n=Dr(n)),gn(r)||(r=Pn),Qn.isObservable(n)||(n=Dr(new is)),new ks(function(o){function i(){var t=s;a.setDisposable(r.scheduleFuture(null,e,function(){h=s===t,h&&(te(n)&&(n=hr(n)),c.setDisposable(n.subscribe(o)))}))}var s=0,u=new ln,c=new dn,h=!1,a=new dn;return c.setDisposable(u),i(),u.setDisposable(t.subscribe(function(t){h||(s++,o.onNext(t),i())},function(t){h||(s++,o.onError(t))},function(){h||(s++,o.onCompleted())})),new vn(c,a)},t)}function Rt(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}function Tt(t){this.predicate=t}function Mt(t){this.predicate=t}function Ft(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,o=this.messages.length;r<o;r++){var i=this.messages[r],s=i.value;!function(e){t.scheduleAbsolute(null,i.time,function(){for(var t=n.observers.slice(0),r=0,o=t.length;r<o;r++)e.accept(t[r]);return hn})}(s)}}var Vt={"function":!0,object:!0},Wt=Vt[typeof r]&&r&&!r.nodeType?r:null,$t=Vt[typeof n]&&n&&!n.nodeType?n:null,It=s(Wt&&$t&&"object"==typeof o&&o),zt=s(Vt[typeof self]&&self),Gt=s(Vt[typeof window]&&window),Lt=$t&&$t.exports===Wt?Wt:null,Jt=s(Vt[typeof this]&&this),Bt=It||Gt!==(Jt&&Jt.window)&&Gt||zt||Jt||Function("return this")(),Ut={internals:{},config:{Promise:Bt.Promise},helpers:{}},Kt=Ut.helpers.noop=function(){},Ht=Ut.helpers.identity=function(t){return t},Qt=Ut.helpers.defaultNow=Date.now,Xt=Ut.helpers.defaultComparer=function(t,e){return Ye(t,e)},Yt=Ut.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},Zt=(Ut.helpers.defaultKeySerializer=function(t){return t.toString()},Ut.helpers.defaultError=function(t){throw t}),te=Ut.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},ee=Ut.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),ne={e:{}},re=Ut.internals.tryCatch=function(t){if(!ee(t))throw new TypeError("fn must be a function");return c(t)};Ut.config.longStackSupport=!1;var oe=!1,ie=re(function(){throw new Error})();oe=!!ie.e&&!!ie.e.stack;var se,ue=d(),ce="From previous event:",he=Ut.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};he.prototype=Object.create(Error.prototype),he.prototype.name="EmptyError";var ae=Ut.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ae.prototype=Object.create(Error.prototype),ae.prototype.name="ObjectDisposedError";var fe=Ut.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};fe.prototype=Object.create(Error.prototype),fe.prototype.name="ArgumentOutOfRangeError";var pe=Ut.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};pe.prototype=Object.create(Error.prototype),pe.prototype.name="NotSupportedError";var le=Ut.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};le.prototype=Object.create(Error.prototype),le.prototype.name="NotImplementedError";var de=Ut.helpers.notImplemented=function(){throw new le},ve=(Ut.helpers.notSupported=function(){throw new pe},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Bt.Set&&"function"==typeof(new Bt.Set)["@@iterator"]&&(ve="@@iterator");var be=Ut.doneEnumerator={done:!0,value:i},ye=Ut.helpers.isIterable=function(t){return t&&t[ve]!==i},_e=Ut.helpers.isArrayLike=function(t){return t&&t.length!==i};Ut.helpers.iterator=ve;var me=Ut.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},we=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ge=(we.length,"[object Arguments]"),xe="[object Array]",Ee="[object Boolean]",Ce="[object Date]",Se="[object Error]",Ne="[object Function]",Ae="[object Map]",Oe="[object Number]",ke="[object Object]",De="[object RegExp]",je="[object Set]",qe="[object String]",Pe="[object WeakMap]",Re="[object ArrayBuffer]",Te="[object Float32Array]",Me="[object Float64Array]",Fe="[object Int8Array]",Ve="[object Int16Array]",We="[object Int32Array]",$e="[object Uint8Array]",Ie="[object Uint8ClampedArray]",ze="[object Uint16Array]",Ge="[object Uint32Array]",Le={};Le[Te]=Le[Me]=Le[Fe]=Le[Ve]=Le[We]=Le[$e]=Le[Ie]=Le[ze]=Le[Ge]=!0,Le[ge]=Le[xe]=Le[Re]=Le[Ee]=Le[Ce]=Le[Se]=Le[Ne]=Le[Ae]=Le[Oe]=Le[ke]=Le[De]=Le[je]=Le[qe]=Le[Pe]=!1;var Je=Object.prototype,Be=Je.hasOwnProperty,Ue=Je.toString,Ke=Math.pow(2,53)-1,He=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,u=[];for(i in o)t.call(o,i)&&u.push(i);if(e)for(s=0;s<r;s++)t.call(o,n[s])&&u.push(n[s]);return u}}(),st=Ut.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},Qe=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Xe=Array.isArray||function(t){return _(t)&&m(t.length)&&Ue.call(t)===xe},Ye=Ut.internals.isEqual=function(t,e){return C(t,e)},Ze=({}.hasOwnProperty,Array.prototype.slice,Ut.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),tn=Ut.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var o=0,i=e.length;o<i;o++){var s=e[o];for(var u in s)t[u]=s[u]}},en=Ut.internals.addRef=function(t,e){return new ks(function(n){return new vn(e.getDisposable(),t.subscribe(n))})};N.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var nn=Ut.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},rn=nn.prototype;rn.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},rn.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},rn.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var o=this.items[t];this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)}}},rn.peek=function(){return this.items[0].value},rn.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=i,this.heapify()},rn.dequeue=function(){var t=this.peek();return this.removeAt(0),t},rn.enqueue=function(t){var e=this.length++;this.items[e]=new N((nn.count++),t),this.percolate(e)},rn.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},nn.count=0;var on=Ut.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,
n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},sn=on.prototype;sn.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},sn.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);n!==-1&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},sn.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}};var un=Ut.Disposable=function(t){this.isDisposed=!1,this.action=t||Kt};un.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var cn=un.create=function(t){return new un(t)},hn=un.empty={dispose:Kt},an=un.isDisposable=function(t){return t&&ee(t.dispose)},fn=un.checkDisposed=function(t){if(t.isDisposed)throw new ae},pn=un._fixup=function(t){return an(t)?t:hn},ln=Ut.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};ln.prototype.getDisposable=function(){return this.current},ln.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},ln.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var dn=Ut.SerialDisposable=function(){this.isDisposed=!1,this.current=null};dn.prototype.getDisposable=function(){return this.current},dn.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},dn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var vn=Ut.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};vn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var bn=Ut.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};bn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}};var yn=Ut.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?hn:new t(this)},e}();A.prototype.dispose=function(){this.scheduler.schedule(this,O)};var _n=Ut.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||Yt,this.disposable=new ln};_n.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},_n.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},_n.prototype.isCancelled=function(){return this.disposable.isDisposed},_n.prototype.invokeCore=function(){return pn(this.action(this.scheduler,this.state))};var mn=Ut.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new le},e.scheduleFuture=function(e,n,r){var o=n;return o instanceof Date&&(o-=this.now()),o=t.normalize(o),0===o?this.schedule(e,r):this._scheduleFuture(e,o,r)},e._scheduleFuture=function(t,e,n){throw new le},t.now=Qt,t.prototype.now=Qt,t.normalize=function(t){return t<0&&(t=0),t},t}(),wn=mn.normalize,gn=mn.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?i.remove(c):u=!0,o(e,n),hn}var s=!1,u=!1,c=t.schedule(e,r);u||(i.add(c),s=!0)}var r=e[0],o=e[1],i=new on;return o(r,n),i}function n(t,e){function n(e,r){function s(t,e){return u?i.remove(h):c=!0,o(e,n),hn}var u=!1,c=!1,h=t.scheduleFuture(e,r,s);c||(i.add(h),u=!0)}var r=e[0],o=e[1],i=new on;return o(r,n),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(mn.prototype),function(t){t.schedulePeriodic=function(t,e,n){if("undefined"==typeof Bt.setInterval)throw new pe;e=wn(e);var r=t,o=Bt.setInterval(function(){r=n(r)},e);return cn(function(){Bt.clearInterval(o)})}}(mn.prototype),function(t){t.catchError=t["catch"]=function(t){return new Rn(this,t)}}(mn.prototype);var xn,En,Cn=Ut.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=re(t._action)(t._state);r===ne&&(t._cancel.dispose(),h(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new ln;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),Sn=function(t){function e(){t.call(this)}return Ze(e,t),e.prototype.schedule=function(t,e){return pn(e(this,t))},e}(mn),Nn=mn.immediate=new Sn,An=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return Ze(n,t),n.prototype.schedule=function(t,n){var o=new _n(this,t,n,this.now());if(r)r.enqueue(o);else{r=new nn(4),r.enqueue(o);var i=re(e)();r=null,i===ne&&h(i.e)}return o.disposable},n.prototype.scheduleRequired=function(){return!r},n}(mn),On=mn.currentThread=new An,kn=function(){var t,e=Kt;if(Bt.setTimeout)t=Bt.setTimeout,e=Bt.clearTimeout;else{if(!Bt.WScript)throw new pe;t=function(t,e){Bt.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),Dn=kn.setTimeout,jn=kn.clearTimeout;!function(){function t(e){if(i)Dn(function(){t(e)},0);else{var n=o[e];if(n){i=!0;var r=re(n)();En(e),i=!1,r===ne&&h(r.e)}}}function n(){if(!Bt.postMessage||Bt.importScripts)return!1;var t=!1,e=Bt.onmessage;return Bt.onmessage=function(){t=!0},Bt.postMessage("","*"),Bt.onmessage=e,t}var r=1,o={},i=!1;En=function(t){delete o[t]};var s=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),u="function"==typeof(u=It&&Lt&&It.setImmediate)&&!s.test(u)&&u;if(ee(u))xn=function(e){var n=r++;return o[n]=e,u(function(){t(n)}),n};else if("undefined"!=typeof e&&"[object process]"==={}.toString.call(e))xn=function(n){var i=r++;return o[i]=n,e.nextTick(function(){t(i)}),i};else if(n()){var c="ms.rx.schedule"+Math.random(),a=function(e){"string"==typeof e.data&&e.data.substring(0,c.length)===c&&t(e.data.substring(c.length))};Bt.addEventListener("message",a,!1),xn=function(t){var e=r++;return o[e]=t,Bt.postMessage(c+e,"*"),e}}else if(Bt.MessageChannel){var f=new Bt.MessageChannel;f.port1.onmessage=function(e){t(e.data)},xn=function(t){var e=r++;return o[e]=t,f.port2.postMessage(e),e}}else xn="document"in Bt&&"onreadystatechange"in Bt.document.createElement("script")?function(e){var n=Bt.document.createElement("script"),i=r++;return o[i]=e,n.onreadystatechange=function(){t(i),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},Bt.document.documentElement.appendChild(n),i}:function(e){var n=r++;return o[n]=e,Dn(function(){t(n)},0),n}}();var qn=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(un._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function o(t){this._id=t,this.isDisposed=!1}function i(t,e,n){return function(){e(t,n)}}return Ze(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,En(this._id))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,jn(this._id))},e.prototype.schedule=function(t,e){var o=new ln,i=xn(n(o,e,this,t));return new vn(o,new r(i))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var i=new ln,s=Dn(n(i,r,this,t),e);return new vn(i,new o(s))},e.prototype.scheduleLongRunning=function(t,e){var n=cn(Kt);return xn(i(t,e,n)),n},e}(mn),Pn=mn["default"]=mn.async=new qn,Rn=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return Ze(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var o=re(t)(e._getRecursiveWrapper(n),r);return o===ne?(e._handler(o.e)||h(o.e),hn):pn(o)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,o=!1,i=new ln;return i.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(o)return null;var e=re(n)(t);return e===ne?(o=!0,r._handler(e.e)||h(e.e),i.dispose(),null):e})),i},e}(mn),Tn=Ut.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new le},t.prototype._acceptObserver=function(t,e,n){throw new le},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return gn(t)||(t=Nn),new ks(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),Mn=function(t){function e(t){this.value=t,this.kind="N"}return Ze(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(Tn),Fn=function(t){function e(t){this.error=t,this.kind="E"}return Ze(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(Tn),Vn=function(t){function e(){this.kind="C"}return Ze(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(Tn),Wn=Tn.createOnNext=function(t){return new Mn(t)},$n=Tn.createOnError=function(t){return new Fn(t)},In=Tn.createOnCompleted=function(){return new Vn},zn=Ut.Observer=function(){};zn.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},zn.prototype.asObserver=function(){var t=this;return new Bn(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},zn.prototype.checked=function(){return new Un(this)};var Gn=zn.create=function(t,e,n){return t||(t=Kt),e||(e=Zt),n||(n=Kt),new Bn(t,e,n)};zn.fromNotifier=function(t,e){var n=me(t,e,1);return new Bn(function(t){return n(Wn(t))},function(t){return n($n(t))},function(){return n(In())})},zn.prototype.notifyOn=function(t){return new Hn(t,this)},zn.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var Ln,Jn=Ut.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return Ze(e,t),e.prototype.next=de,e.prototype.error=de,e.prototype.completed=de,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(zn),Bn=Ut.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Ze(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Jn),Un=function(t){function e(e){t.call(this),this._observer=e,this._state=0}Ze(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=re(this._observer.onNext).call(this._observer,t);this._state=0,e===ne&&h(e.e)},n.onError=function(t){this.checkAccess();var e=re(this._observer.onError).call(this._observer,t);this._state=2,e===ne&&h(e.e)},n.onCompleted=function(){this.checkAccess();var t=re(this._observer.onCompleted).call(this._observer);this._state=2,t===ne&&h(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(zn),Kn=Ut.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new dn}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function i(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=re(n)();return r===ne?(t.queue=[],t.hasFaulted=!0,h(r.e)):void e(t)}return Ze(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,i))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Jn),Hn=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return Ze(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(Kn),Qn=Ut.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){a(e,t),r.call(n,e)},e.call(t,n)}}function e(){if(Ut.config.longStackSupport&&oe){var e=this._subscribe,n=re(h)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return Ln=e.prototype,e.isObservable=function(t){return t&&ee(t.subscribe)},Ln.subscribe=Ln.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Gn(t,e,n))},Ln.subscribeOnNext=function(t,e){return this._subscribe(Gn("undefined"!=typeof e?function(n){t.call(e,n)}:t))},Ln.subscribeOnError=function(t,e){return this._subscribe(Gn(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},Ln.subscribeOnCompleted=function(t,e){return this._subscribe(Gn(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),Xn=Ut.ObservableBase=function(t){function e(t){return t&&ee(t.dispose)?t:ee(t)?cn(t):hn}function n(t,n){var r=n[0],o=n[1],i=re(o.subscribeCore).call(o,r);i!==ne||r.fail(ne.e)||h(ne.e),r.setDisposable(e(i))}function r(){t.call(this)}return Ze(r,t),r.prototype._subscribe=function(t){var e=new Ds(t),r=[e,this];return On.scheduleRequired()?On.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=de,r}(Qn),Yn=Ut.FlatMapObservable=function(t){function e(e,n,r,o){this.resultSelector=ee(r)?r:null,this.selector=me(ee(n)?n:function(){return n},o,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},Ze(n,Jn),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=re(this.selector)(t,e,this.source);return n===ne?this.o.onError(n.e):(te(n)&&(n=hr(n)),(_e(n)||ye(n))&&(n=Qn.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Xn),Zn=Ut.internals.Enumerable=function(){};k.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var tr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=re(t.e.next).call(t.e);if(n===ne)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var o=n.value;te(o)&&(o=hr(o));var i=new ln;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r={isDisposed:!1,o:t,subscription:e,e:this.sources[ve]()},o=On.scheduleRecursive(r,n);return new bn([e,o,new k(r)])},Ze(r,Jn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Xn);Zn.prototype.concat=function(){return new tr(this)};var er=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=re(t.e.next).call(t.e);if(n===ne)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var o=n.value;te(o)&&(o=hr(o));var i=new ln;t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r={isDisposed:!1,e:this.sources[ve](),subscription:e,lastError:null,o:t},o=On.scheduleRecursive(r,n);return new bn([e,o,new k(r)])},Ze(r,Jn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Xn);Zn.prototype.catchError=function(){return new er(this)};var nr=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Ze(e,t),e.prototype[ve]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?be:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Zn),rr=Zn.repeat=function(t,e){return new nr(t,e)},or=function(t){function e(t,e,n){this.s=t,this.fn=e?me(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Ze(e,t),e.prototype[ve]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:be},e}(Zn),ir=Zn.of=function(t,e,n){return new or(t,e,n)},sr=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Hn(this._s,t))},e}(Xn);Ln.observeOn=function(t){return new sr(this,t)};var ur=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],o=e[2];r.setDisposable(new A(t,n.subscribe(o)))}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new ln,r=new dn;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Xn);Ln.subscribeOn=function(t){return new ur(this,t)};var cr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new ln,o=this,i=this._p;return ee(i)&&(i=re(i)(),i===ne)?(t.onError(i.e),e):(i.then(function(r){e.setDisposable(o._s.schedule([t,r],n))},function(n){e.setDisposable(o._s.schedule([t,n],r))}),e)},e}(Xn),hr=Qn.fromPromise=function(t,e){return e||(e=Pn),new cr(t,e)};Ln.toPromise=function(t){if(t||(t=Ut.config.Promise),!t)throw new pe("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var ar=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},Ze(n,Jn),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Xn);Ln.toArray=function(){return new ar(this)},Qn.create=function(t,e){return new ks(t,e)};var fr=function(t){function e(e){this._f=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=re(this._f)();return e===ne?Dr(e.e).subscribe(t):(te(e)&&(e=hr(e)),e.subscribe(t))},e}(Xn),pr=Qn.defer=function(t){return new fr(t)},lr=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),hn}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this.scheduler);return e.run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Nn?r(null,t):this.scheduler.schedule(t,r)},e}(Xn),dr=new lr(Nn),vr=Qn.empty=function(t){return gn(t)||(t=Nn),t===Nn?dr:new lr(t)},br=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){var i=re(e.next).call(e);if(i===ne)return t.onError(i.e);if(i.done)return t.onCompleted();var s=i.value;return ee(n)&&(s=re(n)(s,r),s===ne)?t.onError(s.e):(t.onNext(s),void o(r+1))}}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=T(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Xn),yr=Math.pow(2,53)-1;D.prototype[ve]=function(){return new j(this._s)},j.prototype[ve]=function(){return this},j.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:be},q.prototype[ve]=function(){return new P(this._a)},P.prototype[ve]=function(){return this},P.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:be};var _r=Qn.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!ee(e))throw new Error("mapFn when provided must be a function");if(e)var o=me(e,n,2);return gn(r)||(r=On),new br(t,o,r)},mr=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,o){r<n?(t.onNext(e[r]),o(r+1)):t.onCompleted()}}return Ze(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Xn),wr=Qn.fromArray=function(t,e){return gn(e)||(e=On),new mr(t,e)},gr=function(t){function e(e,n,r,o,i){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._s=i,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=re(t.self._itrFn)(t.newState),t.newState===ne)return t.o.onError(t.newState.e);var n=re(t.self._cndFn)(t.newState);if(n===ne)return t.o.onError(n.e);if(n){var r=re(t.self._resFn)(t.newState);if(r===ne)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return Ze(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Xn);Qn.generate=function(t,e,n,r,o){return gn(o)||(o=On),new gr(t,e,n,r,o)},Qn.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new mr(e,On)},Qn.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new mr(n,t)},Qn.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new ks(function(e){function n(t){for(var n=0,r=t.length;n<r;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},Qn.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new ks(function(e){function n(t){for(var n=0,r=t.length;n<r;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var xr=function(t){function e(){t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return hn},e}(Xn),Er=new xr,Cr=Qn.never=function(){return Er},Sr=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,o){if(r<n.length){var i=n[r];t.onNext([i,e[i]]),o(r+1)}else t.onCompleted()}}return Ze(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Xn);Qn.pairs=function(t,e){return e||(e=On),new Sr(t,e)};var Nr=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){r<e?(n.onNext(t+r),o(r+1)):n.onCompleted()}}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Xn);Qn.range=function(t,e,n){return gn(n)||(n=On),new Nr(t,e,n)};var Ar=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new W(t,this);return e.run()},e}(Xn);W.prototype.run=function(){function t(t,r){return(t===-1||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Qn.repeat=function(t,e,n){return gn(n)||(n=On),new Ar(t,e,n)};var Or=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),hn}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Nn?n(null,e):this._scheduler.schedule(e,n)},e}(Xn),kr=(Qn["return"]=Qn.just=function(t,e){return gn(e)||(e=Nn),new Or(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onError(n),hn}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===Nn?n(null,e):this._scheduler.schedule(e,n)},e}(Xn)),Dr=Qn["throw"]=function(t,e){return gn(e)||(e=Nn),new kr(t,e)},jr=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=hn,n=re(this._resFn)();if(n===ne)return new vn(Dr(n.e).subscribe(t),e);n&&(e=n);var r=re(this._obsFn)(n);return r===ne?new vn(Dr(r.e).subscribe(t),e):new vn(r.subscribe(t),e)},e}(Xn);Qn.using=function(t,e){return new jr(t,e)},Ln.amb=function(t){var e=this;return new ks(function(n){function r(){i||(i=s,h.dispose())}function o(){i||(i=u,c.dispose())}var i,s="L",u="R",c=new ln,h=new ln;te(t)&&(t=hr(t));var a=Gn(function(t){r(),i===s&&n.onNext(t)},function(t){r(),i===s&&n.onError(t)},function(){r(),i===s&&n.onCompleted()}),f=Gn(function(t){o(),i===u&&n.onNext(t)},function(t){o(),i===u&&n.onError(t)},function(){o(),i===u&&n.onCompleted()});return c.setDisposable(e.subscribe(a)),h.setDisposable(t.subscribe(f)),new vn(c,h)})},Qn.amb=function(){var t,e=Cr();if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(t);for(var r=0;r<n;r++)t[r]=arguments[r]}for(var r=0,n=t.length;r<n;r++)e=$(e,t[r]);return e};var qr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new ln,n=new dn;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Pr(t,n,this._fn))),n},e}(Xn),Pr=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=re(this._fn)(t);if(e===ne)return this._o.onError(e.e);te(e)&&(e=hr(e));var n=new ln;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(Jn);Ln["catch"]=function(t){return ee(t)?new qr(this,t):Rr([this,t])};var Rr=Qn["catch"]=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return ir(t).catchError()};Ln.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Fr.apply(this,e)};var Tr=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:S(e,I),hasValueAll:!1,isDone:S(e,I),values:new Array(e)},o=0;o<e;o++){var i=this._params[o],s=new ln;n[o]=s,te(i)&&(i=hr(i)),s.setDisposable(i.subscribe(new Mr(t,o,this._cb,r)))}return new bn(n)},e}(Xn),Mr=function(t){function e(e,n,r,o){this._o=e,this._i=n,this._cb=r,this._state=o,t.call(this)}function n(t){return function(e,n){return n!==t}}return Ze(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(Ht))){var e=re(this._cb).apply(null,this._state.values);if(e===ne)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(Ht)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(Ht)&&this._o.onCompleted()},e}(Jn),Fr=Qn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():z;return Array.isArray(e[0])&&(e=e[0]),new Tr(e,r)};Ln.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),$r.apply(null,t)};var Vr=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(Jn),Wr=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];te(n)&&(n=hr(n));var r=new ln;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Vr(t,e)))}}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r=cn(Kt),o={o:t,i:0,subscription:e,disposable:r,sources:this._sources},i=Nn.scheduleRecursive(o,n);return new bn([e,r,i])},e}(Xn),$r=Qn.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e]}return new Wr(t)};Ln.concatAll=function(){return this.merge(1)};var Ir=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new on;return e.add(this.source.subscribe(new zr(t,this.maxConcurrent,e))),e},e}(Xn),zr=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Ze(e,t),e.prototype.handleSubscribe=function(t){var e=new ln;this.g.add(e),te(t)&&(t=hr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){
this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},Ze(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(Jn);Ln.merge=function(t){return"number"!=typeof t?Gr(this,t):new Ir(this,t)};var Gr=Qn.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(gn(arguments[0]))for(t=arguments[0],e=1;e<r;e++)n.push(arguments[e]);else for(t=Nn,e=0;e<r;e++)n.push(arguments[e]);else for(t=Nn,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),V(t,n).mergeAll()},Lr=function(t){function e(e){this.source=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new on,n=new ln;return e.add(n),n.setDisposable(this.source.subscribe(new Jr(t,e))),e},e}(Xn),Jr=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=new ln;this.g.add(e),te(t)&&(t=hr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},Ze(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(Jn);Ln.mergeAll=function(){return new Lr(this)};var Br=Ut.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Br.prototype=Object.create(Error.prototype),Br.prototype.name="CompositeError";var Ur=function(t){function e(e){this.source=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new on,n=new ln,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Kr(e,r))),e},e}(Xn),Kr=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new Br(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=new ln;this._group.add(e),te(t)&&(t=hr(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},Ze(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(Jn);Qn.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}var r=V(null,t);return new Ur(r)},Ln.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Xr([this,t])};var Hr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];te(n)&&(n=hr(n));var r=new ln;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Qr(t,e)))}else t.o.onCompleted()}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r={pos:0,subscription:e,o:t,sources:this.sources},o=Nn.scheduleRecursive(r,n);return new vn(e,o)},e}(Xn),Qr=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(Jn),Xr=Qn.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new Hr(t)},Yr=function(t){function e(e,n){this._s=e,this._o=te(n)?hr(n):n,this._open=!1,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new ln;e.setDisposable(this._s.subscribe(new Zr(t,this))),te(this._o)&&(this._o=hr(this._o));var n=new ln;return n.setDisposable(this._o.subscribe(new to(t,this,n))),new vn(e,n)},e}(Xn),Zr=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(Jn),to=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return Ze(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(Jn);Ln.skipUntil=function(t){return new Yr(this,t)};var eo=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,Jn.call(this)}function r(t,e){this.parent=t,this.id=e,Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new dn,r=this.source.subscribe(new n(t,e));return new vn(r,e)},Ze(n,Jn),n.prototype.next=function(t){var e=new ln,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),te(t)&&(t=hr(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Ze(r,Jn),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Xn);Ln["switch"]=Ln.switchLatest=function(){return new eo(this)};var no=function(t){function e(e,n){this.source=e,this.other=te(n)?hr(n):n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return new vn(this.source.subscribe(t),this.other.subscribe(new ro(t)))},e}(Xn),ro=function(t){function e(e){this._o=e,t.call(this)}return Ze(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=Kt,e}(Jn);Ln.takeUntil=function(t){return new no(this,t)};var oo=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:S(e,I),hasValueAll:!1,values:new Array(e)},r=this._ss.length,o=new Array(r+1),i=0;i<r;i++){var s=this._ss[i],u=new ln;te(s)&&(s=hr(s)),u.setDisposable(s.subscribe(new io(t,i,n))),o[i]=u}var c=new ln;return c.setDisposable(this._s.subscribe(new so(t,this._cb,n))),o[r]=c,new bn(o)},e}(Xn),io=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(Ht)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=Kt,e}(Jn),so=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=re(this._cb).apply(null,e);return n===ne?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():z;return Array.isArray(e[0])&&(e=e[0]),new oo(this,e,r)};var uo=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=S(e,I),o=S(e,G),i=0;i<e;i++){var s=this._s[i],u=new ln;n[i]=u,te(s)&&(s=hr(s)),u.setDisposable(s.subscribe(new co(t,i,this,o,r)))}return new bn(n)},e}(Xn),co=function(t){function e(e,n,r,o,i){this._o=e,this._i=n,this._p=r,this._q=o,this._d=i,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return Ze(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),i=re(this._p._cb).apply(null,e);if(i===ne)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter(o(this._i)).every(Ht)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(Ht)&&this._o.onCompleted()},e}(Jn);Ln.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():z;Array.isArray(e[0])&&(e=e[0]);var o=this;return e.unshift(o),new uo(e,r)},Qn.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=ee(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var ho=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),o={q:S(n,G),done:S(n,I),cb:this._cb,o:t},i=0;i<n;i++)!function(t){var n=e[t],i=new ln;(_e(n)||ye(n))&&(n=_r(n)),r[t]=i,i.setDisposable(n.subscribe(new ao(o,t)))}(i);return new bn(r)},e}(Xn),ao=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return Ze(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=re(this._s.cb).apply(null,e);if(i===ne)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter(o(this._i)).every(Ht)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(Ht)&&this._s.o.onCompleted()},e}(Jn);Ln.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():z,o=this;return e.unshift(o),new ho(e,r)},Ln.asObservable=function(){return new ks(L(this),this)},Ln.bufferWithCount=Ln.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(J).filter(B)};var fo=function(t){function e(e){this.source=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new po(t))},e}(Xn),po=function(t){function e(e){this._o=e,t.call(this)}return Ze(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.dematerialize=function(){return new fo(this)};var lo=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new vo(t,this.keyFn,this.comparer))},e}(Xn),vo=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e,n=t;return ee(this.keyFn)&&(n=re(this.keyFn)(t),n===ne)?this.o.onError(n.e):this.hasCurrentKey&&(e=re(this.comparer)(this.currentKey,n),e===ne)?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(Jn);Ln.distinctUntilChanged=function(t,e){return e||(e=Xt),new lo(this,t,e)};var bo=function(t){function e(e,n,r,o){this.source=e,this._oN=n,this._oE=r,this._oC=o,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||ee(e._oN)?Gn(e._oN||Kt,e._oE||Kt,e._oC||Kt):e._oN,this.isStopped=!1,Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},Ze(n,Jn),n.prototype.next=function(t){var e=re(this.t.onNext).call(this.t,t);e===ne&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=re(this.t.onError).call(this.t,t);return e===ne?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=re(this.t.onCompleted).call(this.t);return t===ne?this.o.onError(t.e):void this.o.onCompleted()},e}(Xn);Ln["do"]=Ln.tap=Ln.doAction=function(t,e,n){return new bo(this,t,e,n)},Ln.doOnNext=Ln.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},Ln.doOnError=Ln.tapOnError=function(t,e){return this.tap(Kt,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},Ln.doOnCompleted=Ln.tapOnCompleted=function(t,e){return this.tap(Kt,null,"undefined"!=typeof e?function(){t.call(e)}:t)};var yo=function(t){function e(e,n,r){this.source=e,this._fn=me(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=re(this.source.subscribe).call(this.source,t);return e===ne&&(this._fn(),h(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=re(this._s.dispose).call(this._s);this._fn(),t===ne&&h(t.e)}},e}(Xn);Ln["finally"]=function(t,e){return new yo(this,t,e)};var _o=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=Kt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Xn);Ln.ignoreElements=function(){return new _o(this)};var mo=function(t){function e(e,n){this.source=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new wo(t))},e}(Xn),wo=function(t){function e(e){this._o=e,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._o.onNext(Wn(t))},e.prototype.error=function(t){this._o.onNext($n(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(In()),this._o.onCompleted()},e}(Jn);Ln.materialize=function(){return new mo(this)},Ln.repeat=function(t){return rr(this,t).concat()},Ln.retry=function(t){return rr(this,t).catchError()};var go=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Ze(n,t),n.prototype.subscribeCore=function(t){var n,r=new Ps,o=new Ps,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},h=new dn,a=On.scheduleRecursive(null,function(e,i){if(!c.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var a=s.value;te(a)&&(a=hr(a));var f=new ln,p=new ln;h.setDisposable(new vn(p,f)),f.setDisposable(a.subscribe(function(e){t.onNext(e)},function(e){p.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),f.dispose()},function(){t.onCompleted()}))}});return new bn([s,h,a,e(c)])},n}(Xn);Ln.retryWhen=function(t){return new go(U(this),t)};var xo=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Ze(n,t),n.prototype.subscribeCore=function(t){var n,r=new Ps,o=new Ps,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},h=new dn,a=On.scheduleRecursive(null,function(e,i){if(!c.isDisposed){var s=u.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var a=s.value;te(a)&&(a=hr(a));var f=new ln,p=new ln;h.setDisposable(new vn(p,f)),f.setDisposable(a.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){p.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),f.dispose()}))}});return new bn([s,h,a,e(c)])},n}(Xn);Ln.repeatWhen=function(t){return new xo(U(this),t)};var Eo=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Co(t,this))},e}(Xn),Co=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=re(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?re(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===ne?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(Jn);Ln.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Eo(this,n,e,t)};var So=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new No(t,this._c))},e}(Xn),No=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.skipLast=function(t){if(t<0)throw new fe;return new So(this,t)},Ln.startWith=function(){var t,e=0;arguments.length&&gn(arguments[0])?(t=arguments[0],e=1):t=Nn;for(var n=[],r=e,o=arguments.length;r<o;r++)n.push(arguments[r]);return $r.apply(null,[wr(n,t),this])};var Ao=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(Jn);Ln.takeLast=function(t){if(t<0)throw new fe;var e=this;return new ks(function(n){return e.subscribe(new Ao(n,t))},e)};var Oo=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(Jn);Ln.takeLastBuffer=function(t){if(t<0)throw new fe;var e=this;return new ks(function(n){return e.subscribe(new Oo(n,t))},e)},Ln.windowWithCount=Ln.windowCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),t<=0)throw new fe;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),e<=0)throw new fe;return new ks(function(r){function o(){var t=new Ps;c.push(t),r.onNext(en(t,s))}var i=new ln,s=new yn(i),u=0,c=[];return o(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=c.length;r<i;r++)c[r].onNext(n);var s=u-t+1;s>=0&&s%e===0&&c.shift().onCompleted(),++u%e===0&&o()},function(t){for(;c.length>0;)c.shift().onError(t);r.onError(t)},function(){for(;c.length>0;)c.shift().onCompleted();r.onCompleted()})),s},n)},Ln.selectConcat=Ln.concatMap=function(t,e,n){return ee(t)&&ee(e)?this.concatMap(function(n,r){var o=t(n,r);return te(o)&&(o=hr(o)),(_e(o)||ye(o))&&(o=_r(o)),o.map(function(t,o){return e(n,t,r,o)})}):ee(t)?K(this,t,n):K(this,function(){return t})},Ln.concatMapObserver=Ln.selectConcatObserver=function(t,e,n,r){var o=this,i=me(t,r,2),s=me(e,r,1),u=me(n,r,0);return new ks(function(t){var e=0;return o.subscribe(function(n){var r;try{r=i(n,e++)}catch(o){return void t.onError(o)}te(r)&&(r=hr(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){return void t.onError(r)}te(n)&&(n=hr(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(n){return void t.onError(n)}te(e)&&(e=hr(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var ko=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(Jn);Ln.defaultIfEmpty=function(t){var e=this;return t===i&&(t=null),new ks(function(n){return e.subscribe(new ko(n,t))},e)},Q.prototype.push=function(t){var e=H(this.set,t,this.comparer)===-1;return e&&this.set.push(t),e};var Do=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new jo(t,this._keyFn,this._cmpFn))},e}(Xn),jo=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new Q(r),t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=t;return ee(this._keyFn)&&(e=re(this._keyFn)(t),e===ne)?this._o.onError(e.e):void(this._h.push(e)&&this._o.onNext(t))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.distinct=function(t,e){return e||(e=Xt),new Do(this,t,e)},Ln.groupBy=function(t,e){return this.groupByUntil(t,e,Cr)},Ln.groupByUntil=function(t,e,n){var r=this;return new ks(function(o){var s=new Bi,u=new on,c=new yn(u),h=function(t){return function(e){e.onError(t)}};return u.add(r.subscribe(function(r){var a=re(t)(r);if(a===ne)return s.forEach(h(a.e)),o.onError(a.e);var f=!1,p=s.get(a);if(p===i&&(p=new Ps,s.set(a,p),f=!0),f){var l=new qs(a,p,c),d=new qs(a,p),v=re(n)(d);if(v===ne)return s.forEach(h(v.e)),o.onError(v.e);o.onNext(l);var b=new ln;u.add(b),b.setDisposable(v.take(1).subscribe(Kt,function(t){s.forEach(h(t)),o.onError(t)},function(){s["delete"](a)&&p.onCompleted(),u.remove(b)}))}var y=r;return ee(e)&&(y=re(e)(r),y===ne)?(s.forEach(h(y.e)),o.onError(y.e)):void p.onNext(y)},function(t){s.forEach(h(t)),o.onError(t)},function(){s.forEach(function(t){t.onCompleted()}),o.onCompleted()})),c},r)};var qo=function(t){function e(e,n,r){this.source=e,this.selector=me(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,Jn.call(this)}return Ze(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},Ze(r,Jn),r.prototype.next=function(t){var e=re(this.selector)(t,this.i++,this.source);return e===ne?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Xn);Ln.map=Ln.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof qo?this.internalMap(n,e):new qo(this,n,e)},Ln.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;n<t;n++)e[n]=arguments[n];return this.map(X(e,t))},Ln.flatMap=Ln.selectMany=Ln.mergeMap=function(t,e,n){return new Yn(this,t,e,n).mergeAll()},Ln.flatMapObserver=Ln.selectManyObserver=function(t,e,n,r){var o=this;return new ks(function(i){var s=0;return o.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(o){return void i.onError(o)}te(n)&&(n=hr(n)),i.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(o){return void i.onError(o)}te(n)&&(n=hr(n)),i.onNext(n),i.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){return void i.onError(e)}te(t)&&(t=hr(t)),i.onNext(t),i.onCompleted()})},o).mergeAll()},Ln.flatMapLatest=Ln.switchMap=function(t,e,n){return new Yn(this,t,e,n).switchLatest()};var Po=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Ze(n,Jn),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Xn);Ln.skip=function(t){if(t<0)throw new fe;return new Po(this,t)};var Ro=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new To(t,this))},e}(Xn),To=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return Ze(e,t),e.prototype.next=function(t){if(!this._r){var e=re(this._p._fn)(t,this._i++,this._p);if(e===ne)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.skipWhile=function(t,e){var n=me(t,e,3);return new Ro(this,n)};var Mo=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Ze(n,Jn),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Xn);Ln.take=function(t,e){if(t<0)throw new fe;return 0===t?vr(e):new Mo(this,t)};var Fo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vo(t,this))},e}(Xn),Vo=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){return this._r&&(this._r=re(this._p._fn)(t,this._i++,this._p),this._r===ne)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.takeWhile=function(t,e){var n=me(t,e,3);return new Fo(this,n)};var Wo=function(t){function e(e,n,r){this.source=e,this.predicate=me(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,Jn.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},Ze(r,Jn),r.prototype.next=function(t){var e=re(this.predicate)(t,this.i++,this.source);return e===ne?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Xn);Ln.filter=Ln.where=function(t,e){return this instanceof Wo?this.internalFilter(t,e):new Wo(this,t,e)};var $o=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Io(t,this._k,this._c))},e}(Xn),Io=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=re(this._k)(t);if(e===ne)return this._o.onError(e.e);var n=0;if(this._hv){if(n=re(this._c)(e,this._v),n===ne)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(Jn),zo=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Go(t,this))},e}(Xn),Go=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=re(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?re(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===ne?this._o.onError(this._a.e):void this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new he),this._o.onCompleted()},e}(Jn);Ln.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new zo(this,n,e,t)};var Lo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Jo(t,this._fn,this.source))},e}(Xn),Jo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=re(this._fn)(t,this._i++,this._s);return e===ne?this._o.onError(e.e):void(Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Jn);Ln.some=function(t,e){var n=me(t,e,3);return new Lo(this,n)};var Bo=function(t){function e(e){this.source=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Uo(t))},e}(Xn),Uo=function(t){function e(e){this._o=e,t.call(this)}return Ze(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Jn);Ln.isEmpty=function(){return new Bo(this)};var Ko=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ho(t,this._fn,this.source))},e}(Xn),Ho=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=re(this._fn)(t,this._i++,this._s);return e===ne?this._o.onError(e.e):void(Boolean(e)||(this._o.onNext(!1),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Jn);Ln.every=function(t,e){var n=me(t,e,3);return new Ko(this,n)};var Qo=function(t){function e(e,n,r){var o=+r||0;Math.abs(o)===1/0&&(o=0),this.source=e,this._elem=n,this._n=o,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),hn):this.source.subscribe(new Xo(t,this._elem,this._n))},e}(Xn),Xo=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}return Ze(e,t),e.prototype.next=function(t){this._i++>=this._n&&n(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Jn);Ln.includes=function(t,e){return new Qo(this,t,e);
};var Yo=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zo(t,this._fn,this.source))},e}(Xn),Zo=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){if(this._fn){var e=re(this._fn)(t,this._i++,this._s);if(e===ne)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Jn);Ln.count=function(t,e){var n=me(t,e,3);return new Yo(this,n)};var ti=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),hn):this.source.subscribe(new ei(t,this._e,this._n))},e}(Xn),ei=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(Jn);Ln.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new ti(this,t,n)};var ni=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ri(t,this._fn,this.source))},e}(Xn),ri=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){if(this._fn){var e=re(this._fn)(t,this._i++,this._s);if(e===ne)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Jn);Ln.sum=function(t,e){var n=me(t,e,3);return new ni(this,n)},Ln.minBy=function(t,e){return e||(e=Yt),new $o(this,t,function(t,n){return e(t,n)*-1})},Ln.min=function(t){return this.minBy(Ht,t).map(Y)},Ln.maxBy=function(t,e){return e||(e=Yt),new $o(this,t,e)},Ln.max=function(t){return this.maxBy(Ht,t).map(Y)};var oi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ii(t,this._fn,this.source))},e}(Xn),ii=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){if(this._fn){var e=re(this._fn)(t,this._c++,this._s);if(e===ne)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){return 0===this._c?this._o.onError(new he):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},e}(Jn);Ln.average=function(t,e){var n,r=this;return ee(t)&&(n=me(t,e,3)),new oi(r,n)},Ln.sequenceEqual=function(t,e){var n=this;return e||(e=Xt),new ks(function(r){var o=!1,i=!1,s=[],u=[],c=n.subscribe(function(t){if(u.length>0){var n=u.shift(),o=re(e)(n,t);if(o===ne)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){o=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});(_e(t)||ye(t))&&(t=_r(t)),te(t)&&(t=hr(t));var h=t.subscribe(function(t){if(s.length>0){var n=s.shift(),i=re(e)(n,t);if(i===ne)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){i=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new vn(c,h)},n)};var si=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ui(t,this._i,this._d))},e}(Xn),ui=function(t){function e(e,n,r){this._o=e,this._i=n,this._d=r,t.call(this)}return Ze(e,t),e.prototype.next=function(t){0===this._i--&&(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d===i?this._o.onError(new fe):(this._o.onNext(this._d),this._o.onCompleted())},e}(Jn);Ln.elementAt=function(t,e){if(t<0)throw new fe;return new si(this,t,e)};var ci=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=re(this._obj.predicate)(t,this._i++,this._s);if(n===ne)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===i?this._o.onError(new he):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Jn);Ln.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ee(n.predicate)){var o=n.predicate;n.predicate=me(o,n.thisArg,3)}return new ks(function(t){return r.subscribe(new ci(t,n,r))},r)};var hi=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ai(t,this._obj,this.source))},e}(Xn),ai=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){if(this._obj.predicate){var e=re(this._obj.predicate)(t,this._i++,this._s);if(e===ne)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._obj.defaultValue===i?this._o.onError(new he):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Jn);Ln.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ee(t.predicate)){var e=t.predicate;t.predicate=me(e,t.thisArg,3)}return new hi(this,t)};var fi=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new pi(t,this._obj,this.source))},e}(Xn),pi=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=re(this._obj.predicate)(t,this._i++,this._s);if(n===ne)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===i?this._o.onError(new he):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(Jn);Ln.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},ee(t.predicate)){var e=t.predicate;t.predicate=me(e,t.thisArg,3)}return new fi(this,t)};var li=function(t){function e(e,n,r,o){this._o=e,this._s=n,this._cb=r,this._y=o,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=re(this._cb)(t,this._i,this._s);return e===ne?this._o.onError(e.e):void(e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(Jn);Ln.find=function(t,e){return Z(this,t,e,!1)},Ln.findIndex=function(t,e){return Z(this,t,e,!0)};var di=function(t){function e(e){this.source=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new vi(t))},e}(Xn),vi=function(t){function e(e){this._o=e,this._s=new Bt.Set,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(Jn);Ln.toSet=function(){if("undefined"==typeof Bt.Set)throw new TypeError;return new di(this)};var bi=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new yi(t,this._k,this._e))},e}(Xn),yi=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new Bt.Map,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=re(this._k)(t);if(e===ne)return this._o.onError(e.e);var n=t;return this._e&&(n=re(this._e)(t),n===ne)?this._o.onError(n.e):void this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(Jn);Ln.toMap=function(t,e){if("undefined"==typeof Bt.Map)throw new TypeError;return new bi(this,t,e)};var _i=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new mi(t,this._b,this._e))},e}(Xn),mi=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.slice=function(t,e){var n=t||0;if(n<0)throw new Ut.ArgumentOutOfRangeError;if("number"==typeof e&&e<n)throw new Ut.ArgumentOutOfRangeError;return new _i(this,n,e)};var wi=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),hn):this.source.subscribe(new gi(t,this._e,this._n))},e}(Xn),gi=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(Jn);Ln.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new wi(this,t,n)},Qn.wrap=function(t){function e(){return Qn.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var xi=Qn.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,o=arguments.length;r<o;r++)n.push(arguments[r]);return new ks(function(r){function o(e){var n=re(t.next).call(t,e);return n===ne?r.onError(n.e):void s(n)}function i(e){var n=re(t.next).call(t,e);return n===ne?r.onError(n.e):void s(n)}function s(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=tt.call(e,t.value),s=null,c=!1;Qn.isObservable(n)?u.add(n.subscribe(function(t){c=!0,s=t},i,function(){c&&o(s)})):i(new TypeError("type not supported"))}var u=new on;return ee(t)&&(t=t.apply(e,n)),t&&ee(t.next)?(o(),u):(r.onNext(t),r.onCompleted())})};Qn.start=function(t,e,n){return Ei(t,e,n)()};var Ei=Qn.toAsync=function(t,e,n){return gn(n)||(n=Pn),function(){var r=arguments,o=new Rs;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(i){return void o.onError(i)}o.onNext(n),o.onCompleted()}),o.asObservable()}};Qn.fromCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ut(t,e,n,o)}},Qn.fromNodeCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ht(t,e,n,o)}},pt.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Ut.config.useNativeEvents=!1;var Ci=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return ee(e)&&(n=re(e).apply(null,arguments),n===ne)?t.onError(n.e):void t.onNext(n)}}return Ze(e,t),e.prototype.subscribeCore=function(t){return lt(this._el,this._n,n(t,this._fn))},e}(Xn);Qn.fromEvent=function(t,e,n){return t.addListener?Ni(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):Ut.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Ci(t,e,n).publish().refCount():Ni(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var Si=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return ee(e)&&(n=re(e).apply(null,arguments),n===ne)?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),o=this._add(e);return new r(this._del,e,o)},r.prototype.dispose=function(){this.isDisposed||(ee(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Xn),Ni=Qn.fromEventPattern=function(t,e,n){return new Si(t,e,n).publish().refCount()};Qn.startAsync=function(t){var e=re(t)();return e===ne?Dr(e.e):hr(e)};var Ai=function(t){function e(e,n){this.source=e,this.controller=new Ps,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Ze(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=hn,o=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=hn)});return new bn([n,r,o])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Qn);Ln.pausable=function(t){return new Ai(this,t)};var Oi=function(t){function e(e,n){this.source=e,this.controller=new Ps,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Ze(e,t),e.prototype._subscribe=function(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[],o=dt(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==i&&o.shouldFire!==n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()});return o},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Qn);Ln.pausableBuffered=function(t){return new Oi(this,t)};var ki=function(t){function e(e,n,r){t.call(this),this.subject=new Di(n,r),this.source=e.multicast(this.subject).refCount()}return Ze(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Qn),Di=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Ps,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||On}return Ze(e,t),tn(e.prototype,zn,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Tn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(Tn.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(Tn.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n),o=e.hasCompleted||e.hasFailed;if(!o&&r>0)return e.requestedCount=r,cn(function(){e.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Qn);Ln.controlled=function(t,e){return t&&gn(t)&&(e=t,t=!0),null==t&&(t=!0),new ki(this,t,e)};var ji=function(t){function e(e){t.call(this),this.source=e}function n(t,e){return e.source.request(1)}Ze(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new vn(this.subscription,Pn.schedule(this,n))};var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function n(t,e){return e.observable.source.request(1)}return Ze(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=Pn.schedule(this,n)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Jn);return e}(Qn);ki.prototype.stopAndWait=function(){return new ji(this)};var qi=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){return e.source.request(e.windowSize)}Ze(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new vn(this.subscription,Pn.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){return e.observable.source.request(e.observable.windowSize)}return Ze(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=Pn.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Jn);return e}(Qn);ki.prototype.windowed=function(t){return new qi(this,t)},Ln.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e)&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var Pi=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new vn(this._fn2(e).subscribe(t),e.connect())},e}(Xn);Ln.multicast=function(t,e){return ee(t)?new Pi(this,t,e):new Mi(this,t)},Ln.publish=function(t){return t&&ee(t)?this.multicast(function(){return new Ps},t):this.multicast(new Ps)},Ln.share=function(){return this.publish().refCount()},Ln.publishLast=function(t){return t&&ee(t)?this.multicast(function(){return new Rs},t):this.multicast(new Rs)},Ln.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new Ts(e)},t):this.multicast(new Ts(t))},Ln.shareValue=function(t){return this.publishValue(t).refCount()},Ln.replay=function(t,e,n,r){return t&&ee(t)?this.multicast(function(){return new Ms(e,n,r)},t):this.multicast(new Ms(e,n,r))},Ln.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Ri=function(t,e){this._s=t,this._o=e};Ri.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var Ti=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},e}(Xn),Mi=Ut.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return Ze(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return hn;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new Ti(this)},e}(Qn);Ln.singleInstance=function(){function t(){return r||(r=!0,e=n["finally"](function(){r=!1}).publish().refCount()),e}var e,n=this,r=!1;return new ks(function(e){return t().subscribe(e)})},Ln.join=function(t,e,n,r){var o=this;return new ks(function(i){var s=new on,u=!1,c=!1,h=0,a=0,f=new Bi,p=new Bi,l=function(t){i.onError(t)};return s.add(o.subscribe(function(t){var n=h++,o=new ln;f.set(n,t),s.add(o);var c=re(e)(t);return c===ne?i.onError(c.e):(o.setDisposable(c.take(1).subscribe(Kt,l,function(){f["delete"](n)&&0===f.size&&u&&i.onCompleted(),s.remove(o)})),void p.forEach(function(e){var n=re(r)(t,e);return n===ne?i.onError(n.e):void i.onNext(n)}))},l,function(){u=!0,(c||0===f.size)&&i.onCompleted()})),s.add(t.subscribe(function(t){var e=a++,o=new ln;p.set(e,t),s.add(o);var u=re(n)(t);return u===ne?i.onError(u.e):(o.setDisposable(u.take(1).subscribe(Kt,l,function(){p["delete"](e)&&0===p.size&&c&&i.onCompleted(),s.remove(o)})),void f.forEach(function(e){var n=re(r)(e,t);return n===ne?i.onError(n.e):void i.onNext(n)}))},l,function(){c=!0,(u||0===p.size)&&i.onCompleted()})),s},o)},Ln.groupJoin=function(t,e,n,r){var o=this;return new ks(function(i){function s(t){}var u=new on,c=new yn(u),h=new Bi,a=new Bi,f=0,p=0,s=function(t){return function(e){e.onError(t)}};return u.add(o.subscribe(function(t){var n=new Ps,o=f++;h.set(o,n);var p=re(r)(t,en(n,c));if(p===ne)return h.forEach(s(p.e)),i.onError(p.e);i.onNext(p),a.forEach(function(t){n.onNext(t)});var l=new ln;u.add(l);var d=re(e)(t);return d===ne?(h.forEach(s(d.e)),i.onError(d.e)):void l.setDisposable(d.take(1).subscribe(Kt,function(t){h.forEach(s(t)),i.onError(t)},function(){h["delete"](o)&&n.onCompleted(),u.remove(l)}))},function(t){h.forEach(s(t)),i.onError(t)},function(){i.onCompleted()})),u.add(t.subscribe(function(t){var e=p++;a.set(e,t);var r=new ln;u.add(r);var o=re(n)(t);return o===ne?(h.forEach(s(o.e)),i.onError(o.e)):(r.setDisposable(o.take(1).subscribe(Kt,function(t){h.forEach(s(t)),i.onError(t)},function(){a["delete"](e),u.remove(r)})),void h.forEach(function(e){e.onNext(t)}))},function(t){h.forEach(s(t)),i.onError(t)})),c},o)},Ln.buffer=function(){return this.window.apply(this,arguments).flatMap(J)},Ln.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?bt.call(this,t):"function"==typeof t?yt.call(this,t):vt.call(this,t,e)};var Fi=function(t){function e(e){this.source=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vi(t))},e}(Xn),Vi=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.pairwise=function(){return new Fi(this)},Ln.partition=function(t,e){var n=me(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var Wi=function(t){function e(t,e){this.c=t,this.s=e}return Ze(e,t),e.prototype[ve]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}(Zn);Ln.letBind=Ln["let"]=function(t){return t(this)},Qn["if"]=function(t,e,n){return pr(function(){return n||(n=vr()),te(e)&&(e=hr(e)),te(n)&&(n=hr(n)),"function"==typeof n.now&&(n=vr(n)),t()?e:n})},Qn["for"]=Qn.forIn=function(t,e,n){return ir(t,e,n).concat()};var $i=Qn["while"]=Qn.whileDo=function(t,e){return te(e)&&(e=hr(e)),_t(t,e).concat()};Ln.doWhile=function(t){return $r([this,$i(t,this)])},Qn["case"]=function(t,e,n){return pr(function(){te(n)&&(n=hr(n)),n||(n=vr()),gn(n)&&(n=vr(n));var r=e[t()];return te(r)&&(r=hr(r)),r||n})};var Ii=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],o=t[1];if(!(r.q.length>0))return void(r.isAcquired=!1);n=r.q.shift();var i=new ln;r.d.add(i),i.setDisposable(n.subscribe(new zi(r,o,i))),e([r,o])}return Ze(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new dn,n=new on(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Xn),zi=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=re(this._p._fn)(t);return e===ne?this._s.o.onError(e.e):(this._s.q.push(e),this._s.activeCount++,void this._p._ensureActive(this._s))},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},e}(Jn);Ln.expand=function(t,e){return gn(e)||(e=On),new Ii(this,t,e)};var Gi=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),hn;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new on,o=0,i=this._sources.length;o<i;o++){var s=this._sources[o];te(s)&&(s=hr(s)),r.add(s.subscribe(new Li(t,n,o,this._cb,r)))}return r},e}(Xn),Li=function(t){function e(e,n,r,o,i){this._o=e,this._s=n,this._i=r,this._cb=o,this._subs=i,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=re(this._cb).apply(null,this._s.results);if(e===ne)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(Jn);Qn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ee(e[t-1])?e.pop():z;return Array.isArray(e[0])&&(e=e[0]),new Gi(e,r)},Ln.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Qn.forkJoin.apply(null,e)},Ln.manySelect=Ln.extend=function(t,e){gn(e)||(e=Ut.Scheduler.immediate);var n=this;return pr(function(){var r;return n.map(function(t){var e=new Ji(t);return r&&r.onNext(t),r=e,e}).tap(Kt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Ji=function(t){function e(e){t.call(this),this.head=e,this.tail=new Rs}return Ze(e,t),tn(e.prototype,zn,{_subscribe:function(t){var e=new on;return e.add(On.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext(Qn.empty())},onError:function(t){this.onNext(Qn["throw"](t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}(Qn),Bi=Bt.Map||function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype["delete"]=function(t){var e=this._keys.indexOf(t);return e!==-1&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.get=function(t){var e=this._keys.indexOf(t);return e===-1?i:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return n===-1?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();mt.prototype.and=function(t){return new mt(this.patterns.concat(t))},mt.prototype.thenDo=function(t){return new wt(this,t)},wt.prototype.activate=function(t,e,n){for(var r=[],o=gt(e),i=0,s=this.expression.patterns.length;i<s;i++)r.push(Et(t,this.expression.patterns[i],o));var u=new Ct(r,xt(this,e),function(){for(var t=0,e=r.length;t<e;t++)r[t].removeActivePlan(u);n(u)});for(i=0,s=r.length;i<s;i++)r[i].addActivePlan(u);return u},Ct.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},Ct.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;t<e;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],o=!1;for(t=0,e=this.joinObserverArray.length;t<e;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(o=!0);if(o)this.onCompleted();else{this.dequeue();var i=[];for(t=0,e=r.length;t<r.length;t++)i.push(r[t].value);this.onNext.apply(this,i)}}};var Ui=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new ln,this.isDisposed=!1}Ze(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;n<r;n++)e[n].match()}},n.error=Kt,n.completed=Kt,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(Jn);Ln.and=function(t){return new mt([this,t])},Ln.thenDo=function(t){return new mt([this]).thenDo(t)},Qn.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new ks(function(e){var n=[],r=new Bi,o=Gn(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var i=0,s=t.length;i<s;i++)n.push(t[i].activate(r,o,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(u){return Dr(u).subscribe(e)}var c=new on;return r.forEach(function(t){t.subscribe(),c.add(t)}),c})};var Ki=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return Ze(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Xn),Hi=Qn.interval=function(t,e){return At(t,t,gn(e)?e:Pn)};Qn.timer=function(t,e,n){
var r;return gn(n)||(n=Pn),null!=e&&"number"==typeof e?r=e:gn(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===i?St(t,n):t instanceof Date&&r!==i?Nt(t,e,n):At(t,r,n)};Ln.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return gn(n)||(n=Pn),e instanceof Date?kt(this,e,n):Ot(this,e,n)}if(Qn.isObservable(t)||ee(t))return Dt(this,t,arguments[1]);throw new Error("Invalid arguments")};var Qi=function(t){function e(e,n,r){gn(r)||(r=Pn),this.source=e,this._dt=n,this._s=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new dn;return new vn(this.source.subscribe(new Xi(t,this._dt,this._s,e)),e)},e}(Xn),Xi=function(t){function e(e,n,r,o){this._o=e,this._d=n,this._scheduler=r,this._c=o,this._v=null,this._hv=!1,this._id=0,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new ln;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(Jn);Ln.debounce=function(){if(ee(arguments[0]))return jt(this,arguments[0]);if("number"==typeof arguments[0])return new Qi(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},Ln.windowWithTime=Ln.windowTime=function(t,e,n){var r,o=this;return null==e&&(r=t),gn(n)||(n=Pn),"number"==typeof e?r=e:gn(e)&&(r=t,n=e),new ks(function(e){function i(){var t=new ln,o=!1,s=!1;f.setDisposable(t),h===c?(o=!0,s=!0):h<c?o=!0:s=!0;var l=o?h:c,d=l-p;p=l,o&&(h+=r),s&&(c+=r),t.setDisposable(n.scheduleFuture(null,d,function(){if(s){var t=new Ps;a.push(t),e.onNext(en(t,u))}o&&a.shift().onCompleted(),i()}))}var s,u,c=r,h=t,a=[],f=new dn,p=0;return s=new on(f),u=new yn(s),a.push(new Ps),e.onNext(en(a[0],u)),i(),s.add(o.subscribe(function(t){for(var e=0,n=a.length;e<n;e++)a[e].onNext(t)},function(t){for(var n=0,r=a.length;n<r;n++)a[n].onError(t);e.onError(t)},function(){for(var t=0,n=a.length;t<n;t++)a[t].onCompleted();e.onCompleted()})),u},o)},Ln.windowWithTimeOrCount=Ln.windowTimeOrCount=function(t,e,n){var r=this;return gn(n)||(n=Pn),new ks(function(o){function i(e){var r=new ln;s.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===a){h=0;var t=++a;f.onCompleted(),f=new Ps,o.onNext(en(f,c)),i(t)}}))}var s=new dn,u=new on(s),c=new yn(u),h=0,a=0,f=new Ps;return o.onNext(en(f,c)),i(0),u.add(r.subscribe(function(t){var n=0,r=!1;f.onNext(t),++h===e&&(r=!0,h=0,n=++a,f.onCompleted(),f=new Ps,o.onNext(en(f,c))),r&&i(n)},function(t){f.onError(t),o.onError(t)},function(){f.onCompleted(),o.onCompleted()})),c},r)},Ln.bufferWithTime=Ln.bufferTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(J)},Ln.bufferWithTimeOrCount=Ln.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(J)};var Yi=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zi(t,this._s))},e}(Xn),Zi=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.timeInterval=function(t){return gn(t)||(t=Pn),new Yi(this,t)};var ts=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new es(t,this._s))},e}(Xn),es=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.timestamp=function(t){return gn(t)||(t=Pn),new ts(this,t)};var ns=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new ln};return e.sourceSubscription.setDisposable(this.source.subscribe(new os(e))),new vn(e.sourceSubscription,this._sampler.subscribe(new rs(e)))},e}(Xn),rs=function(t){function e(e){this._s=e,t.call(this)}return Ze(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(Jn),os=function(t){function e(e){this._s=e,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(Jn);Ln.sample=function(t,e){return gn(e)||(e=Pn),"number"==typeof t?new ns(this,Hi(t,e)):new ns(this,t)};var is=Ut.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};is.prototype=Object.create(Error.prototype),Ln.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return Pt(this,t,arguments[1],arguments[2]);if(Qn.isObservable(t)||ee(t))return qt(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var ss=function(t){function e(e,n,r,o,i,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._timeFn=i,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=re(t.self._itrFn)(t.newState),t.newState===ne)return t.o.onError(t.newState.e);if(t.hasResult=re(t.self._cndFn)(t.newState),t.hasResult===ne)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=re(t.self._resFn)(t.newState),t.result===ne)return t.o.onError(t.result.e);var n=re(t.self._timeFn)(t.newState);if(n===ne)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Ze(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Xn);Qn.generateWithAbsoluteTime=function(t,e,n,r,o,i){return gn(i)||(i=Pn),new ss(t,e,n,r,o,i)};var us=function(t){function e(e,n,r,o,i,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=o,this._timeFn=i,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=re(t.self._itrFn)(t.newState),t.newState===ne)return t.o.onError(t.newState.e);if(t.hasResult=re(t.self._cndFn)(t.newState),t.hasResult===ne)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=re(t.self._resFn)(t.newState),t.result===ne)return t.o.onError(t.result.e);var n=re(t.self._timeFn)(t.newState);if(n===ne)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Ze(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Xn);Qn.generateWithRelativeTime=function(t,e,n,r,o,i){return gn(i)||(i=Pn),new us(t,e,n,r,o,i)};var cs=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1],o=e[2];o.setDisposable(n.subscribe(r))}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new dn;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Xn);Ln.delaySubscription=function(t,e){return gn(e)||(e=Pn),new cs(this,t,e)};var hs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new as(t,this))},e}(Xn),as=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(Jn);Ln.skipLastWithTime=function(t,e){return gn(e)||(e=Pn),new hs(this,t,e)};var fs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ps(t,this._d,this._s))},e}(Xn),ps=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(Jn);Ln.takeLastWithTime=function(t,e){return gn(e)||(e=Pn),new fs(this,t,e)},Ln.takeLastBufferWithTime=function(t,e){var n=this;return gn(e)||(e=Pn),new ks(function(r){var o=[];return n.subscribe(function(n){var r=e.now();for(o.push({interval:r,value:n});o.length>0&&r-o[0].interval>=t;)o.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),i=[];o.length>0;){var s=o.shift();n-s.interval<=t&&i.push(s.value)}r.onNext(i),r.onCompleted()})},n)};var ls=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return Ze(e,t),e.prototype.subscribeCore=function(t){return new vn(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Xn);Ln.takeWithTime=function(t,e){return gn(e)||(e=Pn),new ls(this,t,e)};var ds=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return Ze(e,t),e.prototype.subscribeCore=function(t){return new vn(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new vs(t,this)))},e}(Xn),vs=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.skipWithTime=function(t,e){return gn(e)||(e=Pn),new ds(this,t,e)};var bs=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return Ze(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new vn(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new ys(t,this)))},e}(Xn),ys=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Jn);Ln.skipUntilWithTime=function(t,e){return gn(e)||(e=Pn),new bs(this,t,e)},Ln.takeUntilWithTime=function(t,e){gn(e)||(e=Pn);var n=this;return new ks(function(r){return new vn(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},Ln.throttle=function(t,e){gn(e)||(e=Pn);var n=+t||0;if(n<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new ks(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var _s=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){var e=re(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===ne&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(Jn);Ln.transduce=function(t){var e=this;return new ks(function(n){var r=t(Rt(n));return e.subscribe(new _s(n,r))},e)};var ms=function(t){function e(e){this.source=e,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){var e=new ln,n=new on,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new ws(r))),n},e}(Xn),ws=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return Ze(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,te(t)&&(t=hr(t));var e=new ln;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},Ze(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(Jn);Ln.switchFirst=function(){return new ms(this)},Ln.flatMapFirst=Ln.exhaustMap=function(t,e,n){return new Yn(this,t,e,n).switchFirst()},Ln.flatMapWithMaxConcurrent=Ln.flatMapMaxConcurrent=function(t,e,n,r){return new Yn(this,e,n,r).merge(t)};var gs=Ut.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new nn(1024),t.call(this)}Ze(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=de,n.toAbsoluteTime=de,n.toRelativeTime=de,n.schedulePeriodic=function(t,e,n){var r=new Cn(this,t,e,n);return r.start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new fe;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new fe;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new fe;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){function r(t,e){return o.queue.remove(i),n(t,e)}var o=this,i=new _n(this,t,r,e,this.comparer);return this.queue.enqueue(i),i.disposable},e}(mn);Ut.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,o=n||Yt;t.call(this,r,o)}Ze(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}(Ut.VirtualTimeScheduler),Tt.prototype.equals=function(t){return t===this||null!=t&&("N"===t.kind&&this.predicate(t.value))},Mt.prototype.equals=function(t){return t===this||null!=t&&("E"===t.kind&&this.predicate(t.error))};var xs=Ut.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return"function"==typeof e?new Es(t,new Tt(e)):new Es(t,Tn.createOnNext(e))},onError:function(t,e){return"function"==typeof e?new Es(t,new Mt(e)):new Es(t,Tn.createOnError(e))},onCompleted:function(t){return new Es(t,Tn.createOnCompleted())},subscribe:function(t,e){return new Cs(t,e)}},Es=Ut.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||Xt};Es.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},Es.prototype.toString=function(){return this.value.toString()+"@"+this.time};var Cs=Ut.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};Cs.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},Cs.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var Ss=Ut.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)};Ss.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var Ns=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}Ze(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new Es(this.scheduler.clock,Tn.createOnNext(t)))},n.onError=function(t){this.messages.push(new Es(this.scheduler.clock,Tn.createOnError(t)))},n.onCompleted=function(){this.messages.push(new Es(this.scheduler.clock,Tn.createOnCompleted()))},e}(zn);Ft.prototype.then=function(t,e){var n=this;this.subscriptions.push(new Cs(this.scheduler.clock));var r,o=this.subscriptions.length-1,s=Ut.Observer.create(function(e){var u=t(e);if(u&&"function"==typeof u.then)r=u;else{var c=n.scheduler.clock;r=new Ft(n.scheduler,[Ut.ReactiveTest.onNext(c,i),Ut.ReactiveTest.onCompleted(c)])}var h=n.observers.indexOf(s);n.observers.splice(h,1),n.subscriptions[o]=new Cs(n.subscriptions[o].subscribe,n.scheduler.clock)},function(t){e(t);var r=n.observers.indexOf(s);n.observers.splice(r,1),n.subscriptions[o]=new Cs(n.subscriptions[o].subscribe,n.scheduler.clock)});return this.observers.push(s),r||new Ft(this.scheduler,this.messages)};var As=function(t){function e(e,n){t.call(this);var r,o,i=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var s=0,u=this.messages.length;s<u;s++)r=this.messages[s],o=r.value,function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=i.observers.slice(0),n=0,r=e.length;n<r;n++)t.accept(e[n]);return hn})}(o)}return Ze(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new Cs(this.scheduler.clock));var n=this.subscriptions.length-1;return cn(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new Cs(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}(Qn),Os=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return Ze(e,t),e.prototype._subscribe=function(t){var e,n,r=this;this.subscriptions.push(new Cs(this.scheduler.clock));for(var o=this.subscriptions.length-1,i=new on,s=0,u=this.messages.length;s<u;s++)e=this.messages[s],n=e.value,function(n){i.add(r.scheduler.scheduleRelative(null,e.time,function(){return n.accept(t),hn}))}(n);return cn(function(){r.subscriptions[o]=new Cs(r.subscriptions[o].subscribe,r.scheduler.clock),i.dispose()})},e}(Qn);Ut.TestScheduler=function(t){function e(t,e){return t>e?1:t<e?-1:0}function n(){t.call(this,0,e)}return Ze(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=xs.created),null==e.subscribed&&(e.subscribed=xs.subscribed),null==e.disposed&&(e.disposed=xs.disposed);var n,r,o=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),hn}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(o),hn}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),hn}),this.start(),o},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new As(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new Os(this,t)},n.prototype.createResolvedPromise=function(t,e){return new Ft(this,[Ut.ReactiveTest.onNext(t,e),Ut.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new Ft(this,[Ut.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new Ns(this)},n}(gs);var ks=Ut.AnonymousObservable=function(t){function e(t){return t&&ee(t.dispose)?t:ee(t)?cn(t):hn}function n(t,n){var r=n[0],o=n[1],i=re(o.__subscribe).call(o,r);i!==ne||r.fail(ne.e)||h(ne.e),r.setDisposable(e(i))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return Ze(r,t),r.prototype._subscribe=function(t){var e=new Ds(t),r=[e,this];return On.scheduleRequired()?On.schedule(r,n):n(null,r),e},r}(Qn),Ds=function(t){function e(e){t.call(this),this.observer=e,this.m=new ln}Ze(e,t);var n=e.prototype;return n.next=function(t){var e=re(this.observer.onNext).call(this.observer,t);e===ne&&(this.dispose(),h(e.e))},n.error=function(t){var e=re(this.observer.onError).call(this.observer,t);this.dispose(),e===ne&&h(e.e)},n.completed=function(){var t=re(this.observer.onCompleted).call(this.observer);this.dispose(),t===ne&&h(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Jn),js=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return Ze(e,t),e.prototype.subscribeCore=function(t){return new vn(this._m.getDisposable(),this._u.subscribe(t))},e}(Xn),qs=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new js(r,n):n}return Ze(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}(Qn),Ps=Ut.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Ze(e,t),tn(e.prototype,zn.prototype,{_subscribe:function(t){return fn(this),this.isStopped?this.hasError?(t.onError(this.error),hn):(t.onCompleted(),hn):(this.observers.push(t),new Ri(this,t))},hasObservers:function(){return fn(this),this.observers.length>0},onCompleted:function(){if(fn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fn(this),!this.isStopped)for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new Fs(t,e)},e}(Qn),Rs=Ut.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Ze(e,t),tn(e.prototype,zn.prototype,{_subscribe:function(t){return fn(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),hn):(this.observers.push(t),new Ri(this,t))},hasObservers:function(){return fn(this),this.observers.length>0},onCompleted:function(){var t,e;if(fn(this),!this.isStopped){this.isStopped=!0;var n=u(this.observers),e=n.length;if(this.hasValue)for(t=0;t<e;t++){var r=n[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<e;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(fn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){fn(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Qn),Ts=Ut.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Ze(e,t),tn(e.prototype,zn.prototype,{_subscribe:function(t){return fn(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),hn):(this.observers.push(t),t.onNext(this.value),new Ri(this,t))},getValue:function(){return fn(this),this.hasError&&h(this.error),this.value},hasObservers:function(){return fn(this),this.observers.length>0},onCompleted:function(){if(fn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fn(this),!this.isStopped){this.value=t;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Qn),Ms=Ut.ReplaySubject=function(t){function e(t,e){return cn(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,o){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=o||On,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return Ze(n,t),tn(n.prototype,zn.prototype,{_subscribe:function(t){fn(this);var n=new Kn(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var o=0,i=this.q.length;o<i;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return fn(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(fn(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=u(this.observers),o=r.length;n<o;n++){var i=r[n];i.onNext(t),i.ensureActive()}}},onError:function(t){if(fn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=u(this.observers),o=r.length;n<o;n++){var i=r[n];i.onError(t),i.ensureActive()}this.observers.length=0}},onCompleted:function(){if(fn(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=u(this.observers),r=n.length;e<r;e++){var o=n[e];o.onCompleted(),o.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(Qn),Fs=Ut.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return Ze(e,t),tn(e.prototype,zn.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Qn);Ut.Pauser=function(t){function e(){t.call(this)}return Ze(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Ps),"function"==typeof t&&"object"==typeof t.amd&&t.amd?(Bt.Rx=Ut,t(function(){return Ut})):Wt&&$t?Lt?($t.exports=Ut).Rx=Ut:Wt.Rx=Ut:Bt.Rx=Ut;var Vs=d()}).call(this)}).call(this,e(230),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{230:230}],167:[function(t,e,n){var r=t(225),o={ranges:r+"ranges",integers:r+"integers",keys:r+"keys",named:r+"named",name:r+"name",match:r+"match"};e.exports=o},{225:225}],168:[function(t,e,n){var r={specific:4,ranges:2,integers:2,keys:1};e.exports=r},{}],169:[function(t,e,n){var r=t(167),o=t(200),i=t(183),s=t(177),u=50,c=9e3,h=function(t,e){var n=e||{};this._routes=t,this._rst=o(t),this._matcher=i(this._rst),this._debug=n.debug,this.maxRefFollow=n.maxRefFollow||u,this.maxPaths=n.maxPaths||c};h.createClass=function(t){function e(t){var e=t||{};this._debug=e.debug}return e.prototype=new h(t),e.prototype.constructor=e,e},h.prototype={get:t(202),set:t(204),call:t(201),routeUnhandledPathsTo:function(t){this._unhandled=t}},h.ranges=r.ranges,h.integers=r.integers,h.keys=r.keys,h.JSONGraphError=s,e.exports=h},{167:167,177:177,183:183,200:200,201:201,202:202,204:204}],170:[function(t,e,n){var r=t(218),o=t(229).$ref,i=t(179);e.exports=function(t,e,n){for(var s,u,c,h=t,a=e,f=-1,p=a.length,l=0;++f<p;){if(s=a[f],u=h[s],c=u&&u.$type,!u||c&&c!==o){h=u;break}if(c&&c===o&&f+1<p){var d=new Error(i.innerReferences);throw d.throwToNext=!0,d}if(f+1===p&&(c===o&&(f=-1,a=u.value,p=a.length,u=t,l++),l>n))throw new Error(i.circularReference);h=u}return[h,r(a)]}},{179:179,218:218,229:229}],171:[function(t,e,n){e.exports=function(t,e){return e.reduce(function(t,e){return t[e]},t)}},{}],172:[function(t,e,n){function r(t,e,n,i,a,f,p){var l=t.cacheRoot,d=t.messageRoot,v=t.requestedPath,b=t.ignoreCount,y=typeof n,_=t.requestIdx,m=b<=i;if(m&&(_=++t.requestIdx),null===n||"object"!==y||n.$type)if(f[p]=u(n),n&&n.$type===s){var w=t.references;w.push({path:c(v),value:n.value})}else{var g=t.values;g.push({path:c(v),value:n&&n.type?n.value:n})}else{var x,E=a[i],C={};x=o(E,C);do{var S=e[x],N=n[x];if(void 0!==N){var A=a,O=i+1;m&&(v[_]=x),void 0===S&&(S=e[x]={});var k=b;N&&N.$type===s&&i<a.length-1&&(O=0,A=h(N.value,a,i+1),e[x]=u(N),k=N.value.length,N=d,S=l),t.ignoreCount=k,r(t,S,N,O,A,e,x),t.ignoreCount=b}m&&(v.length=_),x=o(E,C)}while(!C.done)}}var o=t(155).iterateKeySet,i=t(229),s=i.$ref,u=t(217),c=t(218),h=t(216);e.exports=function(t,e){var n=e.paths,o=e.jsonGraph,i=[],s=[];return n.forEach(function(e){r({cacheRoot:t,messageRoot:o,references:i,values:s,requestedPath:[],requestIdx:-1,ignoreCount:0},t,o,0,e)}),{references:i,values:s}}},{155:155,216:216,217:217,218:218,229:229}],173:[function(t,e,n){function r(t,e,n,u,a,f,p){if(void 0===t)return void(a[a.length]=s(f,n,u));if(!(null===t||t.$type&&t.$type!==c||"object"!=typeof t||t.$type===c&&u===n.length)){var l,d,v,b=n[u],y=u+1,_={};l=o(b,_);do{d=t[l];var m=f.length;if(null!==l&&(f[m]=l),d&&d.$type===c&&y<n.length){var w=h(e,d.value,p);d=w[0],v=i(w[1])}else v=f;r(d,e,n,y,a,v,p),f.length=m,_.done||(l=o(b,_))}while(!_.done)}}var o=t(155).iterateKeySet,i=t(218),s=t(216),u=t(229),c=u.$ref,h=t(170);e.exports=function(t,e,n){var o=[];return e.forEach(function(e){r(t,t,e,0,o,[],n)}),o}},{155:155,170:170,216:216,218:218,229:229}],174:[function(t,e,n){function r(t,e){var n,i,s,c,h,a,f,p=e.path,l=t;for(a=0,f=p.length-1;a<f;++a){c=p[a],c&&"object"==typeof c?(h={},i=u(c,h)):(i=c,h=!1);do n=l[i],n||(n=l[i]={}),h?(r(n,{path:p.slice(a+1),value:e.value}),h.done||(i=u(c,h))):l=n;while(h&&!h.done);if(h)return}c=p[a],h={},i=u(c,h);do s=o(e.value),l[i]=s,h.done||(i=u(c,h));while(!h.done)}var o=t(217),i=t(229),s=i.$ref,u=t(155).iterateKeySet;e.exports=function(t,e){var n=[],o=[],i=[],u=!0;return e.invalidated===!0?(i.push({path:e.path}),u=!1):null!==e.value&&e.value.$type===s?n.push({path:e.path,value:e.value.value}):o.push(e),u&&r(t,e),{references:n,values:o,invalidations:i}}},{155:155,217:217,229:229}],175:[function(t,e,n){var r="function does not exist.",o=e.exports=function(){this.message=r,this.stack=(new Error).stack};o.prototype=new Error},{}],176:[function(t,e,n){var r="Any JSONG-Graph returned from call must have paths.",o=function(){this.message=r,this.stack=(new Error).stack};o.prototype=new Error,e.exports=o},{}],177:[function(t,e,n){var r=e.exports=function(t){this.typeValue=t};r.prototype=new Error},{}],178:[function(t,e,n){var r="Maximum number of paths exceeded.",o=function(t){this.message=void 0===t?r:t,this.stack=(new Error).stack};o.prototype=new Error,o.prototype.throwToNext=!0,e.exports=o},{}],179:[function(t,e,n){
e.exports={innerReferences:"References with inner references are not allowed.",unknown:"Unknown Error",routeWithSamePrecedence:"Two routes cannot have the same precedence or path.",circularReference:"There appears to be a circular reference, maximum reference following exceeded."}},{}],180:[function(t,e,n){var r=Array.isArray;e.exports=function(t,e){return function(n){var o="object"==typeof n,i=[];if(o)if(r(n)){var s=null;n.forEach(function(n){s="object"==typeof n?t(i,n,s):e(i,n,s)})}else t(i,n);else e(i,n);return i}}},{}],181:[function(t,e,n){function r(t,e){var n=t.length-1;u(e).forEach(function(e){t[++n]=e})}function o(t,e){s(e)&&(t[t.length]=e)}var i=t(180),s=t(221),u=t(192);e.exports=i(r,o)},{180:180,192:192,221:221}],182:[function(t,e,n){function r(t,e){t[t.length]=e}function o(t,e){var n=t.length-1;s(e).forEach(function(e){t[++n]=e})}var i=t(180),s=t(192);e.exports=i(o,r)},{180:180,192:192}],183:[function(t,e,n){function r(t,e,n,h,a,f,p,l,d){if(t){f=f||0,p=p||[],l=l||[],d=d||[],h=h||[];var m=e.length===f,w=n===y,g=n===_,x=n;!g&&!w||m||(x=b);var E=t[o.match];if(E&&w&&!E[y]&&(x=b),E&&E[x]&&(h[h.length]={id:E[x+"Id"],requested:s(p),action:E[x],authorize:E.authorize,virtual:s(l),precedence:+d.join(""),suffix:e.slice(f),isSet:m&&w,isCall:m&&g}),f!==e.length){var C,S,N,A,O=e[f],k=u(O,t);for(C=0,S=k.length;C<S;++C)N=k[C],l[f]=N,p[f]=N,d[f]=i.specific,r(t[k[C]],e,n,h,a,f+1,p,l,d),l.length=f,p.length=f,d.length=f;var D=c(O),j=O,q=D.length;v.filter(function(e){var n=e.type;return n===o.integers||n===o.ranges?t[n]&&q:t[n]}).forEach(function(i){var s=i.type,u=i.precedence;A=t[s],l[f]={type:s,named:A[o.named],name:A[o.name]},s===o.integers||s===o.ranges?p[f]=D:p[f]=j,d[f]=u,r(A,e,n,h,a,f+1,p,l,d),l.length=f,p.length=f,d.length=f})}}}var o=t(167),i=t(168),s=t(218),u=t(188),c=t(187),h=t(155),a=h.collapse,f=t(224),p=t(175),l=[{type:o.ranges,precedence:i.ranges},{type:o.integers,precedence:i.integers}],d=[{type:o.keys,precedence:i.keys}],v=l.concat(d),b="get",y="set",_="call";e.exports=function(t){return function(e,n){var o=[],i=[];if(r(t,n,e,o,i),e===_&&0===o.length){var s=new p;throw s.throwToNext=!0,s}var u=o.reduce(function(t,e){return t[e.id]||(t[e.id]=[]),t[e.id].push(e),t},{}),c=[];return Object.keys(u).forEach(function(t){var e=u[t];if(1===e.length)return void c.push(e[0]);var n=a(e.map(function(t){return t.requested}));n.forEach(function(t,n){var r=e[n],o=r.virtual;t.forEach(function(t,e){f(o[e])||(o[e]=t)}),r.requested=t,c.push(e[n])})}),c}}},{155:155,167:167,168:168,175:175,187:187,188:188,218:218,224:224}],184:[function(t,e,n){function r(t){return String(Number(t))===String(t)}function o(t,e){return t==e}var i=t(167),s=Array.isArray,u=t(224),c=t(223);e.exports=function h(t,e){var n,a,f=u(e),p=f&&e.type===i.keys,l=!1;if(s(t))for(n=0,a=t.length;n<a&&!l;++n)l=h(t[n],e);else if(o(t,e))l=!0;else if(p)l=!0;else if(f)l=r(t)||c(t);else if(s(e))for(n=0,a=e.length;n<a&&!l;++n)l=h(t,e[n]);return l}},{167:167,223:223,224:224}],185:[function(t,e,n){var r=t(184);e.exports=function(t,e){for(var n=!0,o=0,i=e.length;o<i&&n;++o)n=r(t[o],e[o]);return n}},{184:184}],186:[function(t,e,n){function r(t,e,n){if(n===t.length&&null===e)return!0;var o=t[n],i=e[o];return void 0!==e&&r(t,i,n+1)}e.exports=function(t,e){return r(t,e,0)}},{}],187:[function(t,e,n){var r=Array.isArray;e.exports=function(t){var e=[];return"object"==typeof t?r(t)?t.forEach(function(t){"object"==typeof t?e[e.length]=t:isNaN(+t)||(e[e.length]=+t)}):e[e.length]=t:isNaN(+t)||(e[e.length]=+t),e}},{}],188:[function(t,e,n){var r=t(155).iterateKeySet;e.exports=function(t,e){var n={},o=[],i=r(t,n);do e[i]&&(o[o.length]=i),n.done||(i=r(t,n));while(!n.done);return o}},{155:155}],189:[function(t,e,n){function r(t,e){t[t.length]=e}function o(t,e,n){return s(e)?(e=+e,n&&(e-1===n.to?n.to=e:e+1===n.from?n.from=e:n=null),n||(n={to:e,from:e},t[t.length]=n),n):n}var i=t(180),s=t(221);e.exports=i(r,o)},{180:180,221:221}],190:[function(t,e,n){e.exports=function(t){var e,n=t.from||0;return e="number"==typeof t.to?t.to:n+t.length-1,{to:e,from:n}}},{}],191:[function(t,e,n){var r=t(190);e.exports=function o(t){return t.forEach(function(e,n){Array.isArray(e)?o(e):"object"==typeof e&&(t[n]=r(t[n]))}),t}},{190:190}],192:[function(t,e,n){e.exports=function(t){for(var e=[],n=t.from,r=t.to,o=e.length;n<=r;++n,++o)e[o]=n;return e}},{}],193:[function(t,e,n){var r=Array.isArray,o=t(194),i=t(195);e.exports=function(t,e){var n,s=[],u=typeof t,c=r(t),h="object"===u;if(t===e||String(t)===String(e))n=[t];else if(h){var a;c?(a=o(e,t),n=a[0],s=a[1]):(a=i(e,t),n=a[0],s=a[1])}else n=[t];return 1===n.length&&(n=n[0]),[n,s]}},{194:194,195:195}],194:[function(t,e,n){var r=t(195),o=t(167),i=Array.isArray;e.exports=function s(t,e){var n,u=[],c=typeof t,h="object"==typeof e[0],a="number"===c,f="string"===c,p=!a&&!f,l=p&&t.type||!1,d=l===o.keys,v=i(t);if(d)n=[],u=e;else if(v){var b=e;t.forEach(function(t){var e=s(t,b);void 0!==e[0]&&(u=u.concat(e[0])),b=e[1]}),n=b}else h||p?h&&!p?n=e.reduce(function(e,n){var o=r(t,n);return void 0!==o[0]&&(u=u.concat(o[0])),e.concat(o[1])},[]):!h&&p?n=e.filter(function(t){var e=typeof t;return"number"!==e||(u[u.length]=t,!1)}):(n=[],u=e):(u=[t],n=e.filter(function(e){return t!==e}));return[u,n]}},{167:167,195:195}],195:[function(t,e,n){var r=Array.isArray,o=t(192),i=t(221);e.exports=function s(t,e){var n=[],u=[],c=t,h=i(c);if(h&&(c=+c),h||"string"!=typeof c)if(r(c)){var a=[e];c.forEach(function(t){var e=[];a.forEach(function(n){var r=s(t,n);void 0!==r[0]&&(u=u.concat(r[0])),e=e.concat(r[1])}),a=e}),n=a}else h?e.from<c&&c<e.to?(n[0]={from:e.from,to:c-1},n[1]={from:c+1,to:e.to},u=[c]):e.from===c&&e.to===c?(n=[],u=[c]):e.from===c?(n[0]={from:c+1,to:e.to},u=[c]):e.to===c?(n[0]={from:e.from,to:c-1},u=[c]):n=[e]:u=o(e);else n=[e];return[u,n]}},{192:192,221:221}],196:[function(t,e,n){var r=t(193),o=t(216);e.exports=function(t,e){for(var n=[],i=[],s=[],u=0,c=e.length;u<c;++u){var h=t[u],a=e[u],f=r(h,a),p=f[0],l=f[1],d=l.length>0;if(d){var v=1===l.length?l[0]:l;s[u]=v,n[n.length]=o(s,t,u+1)}i[u]=p,s[u]=p}return[i,n]}},{193:193,216:216}],197:[function(t,e,n){function r(t,e){return function(n){var r,c=-1,h=s(arguments,1),a=!u(n);return a?(h=[],r=n):i(n[0])?(r=[],n.forEach(function(e){e.path=o(e.path,t),r[++c]=e})):r=o(n,t),e.apply(this,[r].concat(h))}}var o=t(198),i=t(222),s=t(227),u=Array.isArray;e.exports=r},{198:198,222:222,227:227}],198:[function(t,e,n){var r=t(167),o=t(189),i=t(181),s=t(182),u=Array.isArray;e.exports=function(t,e){for(var n=[],c=0,h=e.length;c<h;++c)if(e[c].type){var a=e[c];switch(a.type){case r.ranges:n[c]=o(t[c]);break;case r.integers:n[c]=i(t[c]);break;case r.keys:n[c]=s(t[c]);break;default:var f=new Error("Unknown route type.");f.throwToNext=!0}a.named&&(n[a.name]=n[n.length-1])}else u(e[c])&&!u(t[c])?n[n.length]=[t[c]]:n[n.length]=t[c];return n}},{167:167,181:181,182:182,189:189}],199:[function(t,e,n){var r=t(167);e.exports=function(t){t.route=t.route.map(function(t){if("object"==typeof t)switch(t.type){case"keys":t.type=r.keys;break;case"integers":t.type=r.integers;break;case"ranges":t.type=r.ranges;break;default:var e=new Error("Unknown route type.");e.throwToNext=!0}return t})}},{167:167}],200:[function(t,e,n){function r(t,e,n){var o=e.route,s=e.get,h=e.set,a=e.call,f=o[n];f=!isNaN(+f)&&+f||f;var p=Array.isArray(f),l=0;do{var d,v=f;if(p&&(v=v[l]),"object"==typeof v){var b=v.type;d=i(t,b,v)}else d=i(t,v),d?o[n]={type:v,named:!1}:(t[v]||(t[v]={}),d=t[v]);if(n+1===o.length){var y=d[u.match]||{};d[u.match]||(d[u.match]=y),s&&(y.get=c(o,s),y.getId=e.getId),h&&(y.set=c(o,h),y.setId=e.setId),a&&(y.call=c(o,a),y.callId=e.callId)}else r(d,e,n+1)}while(p&&++l<f.length)}function o(t,e){var n=e.route,r=e.get,o=e.set,i=e.call;s(n).map(function(t){return t.join(",")}).forEach(function(e){if(r&&t[e+"get"]||o&&t[e+"set"]||i&&t[e+"call"])throw new Error(p.routeWithSamePrecedence+" "+f(n));r&&(t[e+"get"]=!0),o&&(t[e+"set"]=!0),i&&(t[e+"call"]=!0)})}function i(t,e,n){var r=null;switch(e){case u.keys:case u.integers:case u.ranges:r=t[e],r||(r=t[e]={})}return r&&n&&(r[u.named]=n.named,r[u.name]=n.name),r}function s(t,e,n,r){e=e||0,n=n||[],r=r||[];var o,i=t[e],c=Array.isArray(i),h=c&&i.length||0,a=0;"object"!=typeof i||c?c||(o=i):o=i.type;do c&&(o=i[a]),o===u.integers||o===u.ranges?r[e]="__I__":o===u.keys?r[e]="__K__":r[e]=o,e+1!==t.length?s(t,e+1,n,r):n.push(l(r));while(c&&++a<h);return n}var u=t(167),c=t(197),h=t(135),a=t(199),f=t(226),p=t(179),l=t(218),d=-3;e.exports=function(t){var e={},n={};return t.forEach(function(t){"string"==typeof t.route&&(t.route=h(t.route,!0),a(t)),t.get&&(t.getId=++d),t.set&&(t.setId=++d),t.call&&(t.callId=++d),o(n,t),r(e,t,0,[])}),e}},{135:135,167:167,179:179,197:197,199:199,218:218,226:226}],201:[function(t,e,n){var r="call",o=t(205),i=t(214),s=t(191),u=t(175),c=t(210),h=t(155),a=h.collapse,f=t(166).Observable,p=t(178),l=t(203);e.exports=function(t,e,n,h){var d=this;return f.defer(function(){var f=s(n||[]),v=s(h||[]),b={},y=o(d,t,e,f,v,b),_=[t];if(l(f)+l(v)+l(_)>d.maxPaths)throw new p;return i(d._matcher,y,_,r,d,b).map(function(t){var e=t.reportedPaths,n={jsonGraph:t.jsonGraph};e.length?n.paths=a(e):(n.paths=[],n.jsonGraph={});var r=t.invalidated;return r&&r.length&&(n.invalidated=r),c(d,e,n),n})["catch"](function(n){if(n instanceof u&&d._unhandled)return d._unhandled.call(t,e,f,v);throw n})})}},{155:155,166:166,175:175,178:178,191:191,203:203,205:205,210:210,214:214}],202:[function(t,e,n){var r=t(209),o="get",i=t(214),s=t(191),u=t(210),c=t(166).Observable,h=t(211),a=t(178),f=t(203);e.exports=function(t){var e=this;return c.defer(function(){var n={},p=r(e,n),l=s(t);if(f(l)>e.maxPaths)throw new a;return i(e._matcher,p,l,o,e,n).flatMap(function(t){var n={jsonGraph:t.jsonGraph};if(t.unhandledPaths.length&&e._unhandled){var r=t.unhandledPaths;return e._unhandled.get(r).map(function(t){return h(n.jsonGraph,[{jsonGraph:t.jsonGraph,paths:r}]),n}).defaultIfEmpty(n)}return c["return"](n)}).map(function(t){return u(e,l,t)})})}},{166:166,178:178,191:191,203:203,209:209,210:210,211:211,214:214}],203:[function(t,e,n){function r(t){return t.reduce(function(t,e){return t+o.pathCount(e)},0)}var o=t(155);e.exports=r},{155:155}],204:[function(t,e,n){var r="set",o=t(214),i=t(215),s=t(210),u=t(166).Observable,c=t(228),h=t(174),a=t(173),f=t(186),p=t(171),l=t(191),d=t(155),v=d.collapse,b=t(211),y=t(178),_=t(203);e.exports=function(t){var e=this;return u.defer(function(){var n={},d=i(e,t,n);if(t.paths=l(t.paths),_(t.paths)>e.maxPaths)throw new y;return o(e._matcher,d,t.paths,r,e,n).flatMap(function(n){var r={jsonGraph:n.jsonGraph};if(n.unhandledPaths.length&&e._unhandled){var o=n.unhandledPaths,i={},s={jsonGraph:i},l=o.reduce(function(t,e){return h(t,{path:e,value:null}),t},{}),d=c(t.paths).map(function(t){return[t,a(n.jsonGraph,[t],e.maxRefFollow)[0]]}).filter(function(t){return t[1]}).map(function(e){var n=e[1],r=f(n,l);if(r){var o=p(t.jsonGraph,e[0]);return{path:n,value:o}}return null}).filter(function(t){return null!==t});return d.reduce(function(t,e){return h(t,e),t},i),s.paths=v(d.map(function(t){return t.path})),e._unhandled.set(s).map(function(t){return b(r.jsonGraph,[{jsonGraph:t.jsonGraph,paths:o}]),r}).defaultIfEmpty(r)}return u["return"](r)}).map(function(n){return s(e,t.paths,n)})})}},{155:155,166:166,171:171,173:173,174:174,178:178,186:186,191:191,203:203,210:210,211:211,214:214,215:215,228:228}],205:[function(t,e,n){function r(t,e,n,r,i,s){return function(u){return o(u,t,e,n,r,i,s)}}function o(t,e,n,r,o,f,p){var l,d=t.match,v=t.path;return d.isCall?l=a.defer(function(){var t;try{t=d.action.call(e,v,r,o,f)}catch(n){throw n.throwToNext=!0,n}return s(t).toArray()}).map(function(t){var e=[],r=[],s=t.filter(function(t){return t}).reduce(function(t,e){return t.concat(e)},[]);if(0===s.length)return[];var u=-1;s.forEach(function(t){if(i(t)&&!t.paths){var e=new c;throw e.throwToNext=!0,e}});var a=h(p,s);a.references.forEach(function(t){e[++u]=t}),r=a.values.map(function(t){return t.path});var l=s.length,d=n.slice(0,n.length-1),b=o&&o.length,y=f&&f.length;if(s[++l]={isMessage:!0,method:"get"},y&&l+1&&f.forEach(function(t){s[++l]={isMessage:!0,additionalPath:d.concat(t)}}),b){var _=v.length-1;e.forEach(function(t){var e=d.concat(t.path.slice(_));o.forEach(function(t){var n=e.concat(t);s[++l]={isMessage:!0,additionalPath:n}})})}if(e.length&&!b||r.length){var m=[];e.length&&!b&&(m=e.map(function(t){return t.path})),m.concat(r).forEach(function(t){s[++l]={isMessage:!0,additionalPath:t}})}return s})["do"](null,function(t){throw t.throwToNext=!0,t}):(l=d.action.call(e,t.path),l=s(l)),l.materialize().filter(function(t){return"C"!==t.kind}).map(u(t.path)).map(function(e){return[t.match,e]})}var i=t(219),s=t(208),u=t(207),c=t(176),h=t(211),a=t(166).Observable;e.exports=r},{166:166,176:176,207:207,208:208,211:211,219:219}],206:[function(t,e,n){var r=t(177);e.exports=function(t,e){var n={$type:"error",value:{}};if(t.throwToNext)throw t;return t instanceof r?n=t.typeValue:t instanceof Error&&(n.value.message=t.message),{path:e,value:n}}},{177:177}],207:[function(t,e,n){function r(t,e,n){var r,u=e.kind;return r=u===i?e.value:s(e.error,t),o(r)&&!r.paths&&(r={jsonGraph:r.jsonGraph,paths:n&&t||[t]}),r}var o=t(219),i="N",s=t(206);e.exports=function(t,e){return function(n){return r(t,n,e)}}},{206:206,219:219}],208:[function(t,e,n){var r=t(166).Observable,o=Array.isArray;e.exports=function(t){var e,n=t;return n?(n.subscribe?n instanceof r||(e=n,n=r.create(function(t){return e.subscribe(t)})):n=n.then?r.fromPromise(n):o(n)?r.of(n):r.of(n),n):r["return"](n)}},{166:166}],209:[function(t,e,n){function r(t,e,n){var r,u=e.match;try{r=u.action.call(t,e.path),r=o(r)}catch(c){r=s["throw"](c)}return r.materialize().filter(function(t){return"C"!==t.kind}).map(i(e.path)).map(function(t){return[e.match,t]})}var o=t(208),i=t(207),s=t(166).Observable;e.exports=function(t,e){return function(n){return r(t,n,e)}}},{166:166,207:207,208:208}],210:[function(t,e,n){var r=t(174),o=t(173),i=t(229).$atom;e.exports=function(t,e,n){var s=n.jsonGraph,u={$type:i};return o(s,e,t.maxRefFollow).forEach(function(t){r(s,{path:t,value:u})}),{jsonGraph:s}}},{173:173,174:174,229:229}],211:[function(t,e,n){function r(t,e){var n=[],r=-1,c=[],h=[],a=[],f=[];return e.forEach(function(e){var p=[];u(e)?a[a.length]=e:p=s(e)?o(t,e):i(t,e);var l=p.references,d=p.values,v=p.invalidations,b=p.unhandledPaths;d&&d.length&&(f=f.concat(d)),v&&v.length&&(c=c.concat(v)),b&&b.length&&(h=h.concat(b)),l&&l.length&&l.forEach(function(t){n[++r]=t})}),{invalidations:c,references:n,messages:a,values:f,unhandledPaths:h}}var o=t(172),i=t(174),s=t(219),u=t(220);e.exports=r},{172:172,174:174,219:219,220:220}],212:[function(t,e,n){var r=t(155),o=r.collapse,i=t(196),s=t(185);e.exports=function(t,e){for(var n=e,r=[],u={matchAndPaths:r,unhandledPaths:!1},c=0;c<t.length&&n.length>0;++c){var h=n,a=t[c];n=[],c>0&&(h=o(h));for(var f=0;f<h.length;++f){var p=h[f];if(s(p,a.virtual)){var l=i(p,a.virtual);r[r.length]={path:l[0],match:a},n=n.concat(l[1])}}}return n&&n.length&&(u.unhandledPaths=n),u}},{155:155,185:185,196:196}],213:[function(t,e,n){var r=t(166).Observable,o=t(212);e.exports=function(t,e,n){var i=e.sort(function(t,e){return t.precedence<e.precedence?1:t.precedence>e.precedence?-1:0}),s=o(i,[t]),u=r.from(s.matchAndPaths).flatMap(n).map(function(t){return{match:t[0],value:t[1]}});return s.unhandledPaths&&(u=u.concat(r["return"]({match:{suffix:[]},value:{isMessage:!0,unhandledPaths:s.unhandledPaths}}))),u}},{166:166,212:212}],214:[function(t,e,n){function r(t,e,n,r,o,u){var p=[],l=[],d=[],v=r;return i.from(n).expand(function(n){if(!n.length)return i.empty();var r;try{r=t(v,n)}catch(b){return i["throw"](b)}return r.length?s(n,r,e).flatMap(function(t){var e=t.value,n=t.match.suffix;f(e)||(e=[e]);var r=a(u,e),s=r.invalidations,b=r.unhandledPaths,y=r.messages,_=[];return n.length>0&&(_=r.references),s.forEach(function(t){l[l.length]=t.path}),b.forEach(function(t){p[p.length]=t}),_=_.map(function(t){return t.value.concat(n)}),y.forEach(function(t){if(t.method)v=t.method;else if(t.additionalPath){var e=t.additionalPath;_[_.length]=e,d[d.length]=e}else t.invalidations?t.invalidations.forEach(function(t){l.push(t)}):t.unhandledPaths&&(p=p.concat(t.unhandledPaths))}),_=h(u,_,o.maxRefFollow),_.length&&(_=c(_)),i.from(_)}).defaultIfEmpty([]):(p.push(n),i.empty())}).reduce(function(t,e){return t},null).map(function(){return{unhandledPaths:p,invalidated:l,jsonGraph:u,reportedPaths:d}})}var o=t(166),i=o.Observable,s=t(213),u=t(155),c=u.collapse,h=t(173),a=t(211),f=Array.isArray;e.exports=function(t,e,n,o,i,s){return r(t,e,n,o,i,s)}},{155:155,166:166,173:173,211:211,213:213}],215:[function(t,e,n){function r(t,e,n,r){var l,d=n.match,v=n.path;if(d.isSet){var b=s(e.paths),y=b.map(function(e){return[h(r,[e],t.maxRefFollow)[0],e]}).filter(function(t){return t[0]&&a(t[0],d.virtual)}),_=y.map(function(t){return t[0]}),m=y.map(function(t){return t[1]}),w=m.reduce(function(t,n,r){return f(t,{path:_[r],value:u(e.jsonGraph,n)}),t},{}),g={jsonGraph:w,paths:[d.requested]};v={},c(v,g)}try{l=d.action.call(t,v),l=o(l)}catch(x){l=p["throw"](x)}return l.materialize().filter(function(t){return"C"!==t.kind}).map(i(n.path)).map(function(t){return[n.match,t]})}var o=t(208),i=t(207),s=t(228),u=t(171),c=t(172),h=t(173),a=t(185),f=t(174),p=t(166).Observable;e.exports=function(t,e,n){return function(o){return r(t,e,o,n)}}},{166:166,171:171,172:172,173:173,174:174,185:185,207:207,208:208,228:228}],216:[function(t,e,n){e.exports=function(t,e,n){var r,o,i,s=[];for(r=0,i=t.length;r<i;++r)s[r]=t[r];for(o=n||0,i=e.length;o<i;++o,++r)s[r]=e[o];return s}},{}],217:[function(t,e,n){e.exports=function(t){return"object"!=typeof t||null===t?t:Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},{})}},{}],218:[function(t,e,n){function r(t,e){for(var n=[],r=t.length,o=e||0;o<r;o++)n[o]=t[o];return n}e.exports=r},{}],219:[function(t,e,n){e.exports=function(t){return t.jsonGraph}},{}],220:[function(t,e,n){e.exports=function(t){return t.hasOwnProperty("isMessage")}},{}],221:[function(t,e,n){e.exports=function(t){return String(Number(t))===String(t)&&"object"!=typeof t}},{}],222:[function(t,e,n){e.exports=function(t){return t.hasOwnProperty("path")&&t.hasOwnProperty("value")}},{}],223:[function(t,e,n){e.exports=function(t){return t.hasOwnProperty("to")&&t.hasOwnProperty("from")}},{}],224:[function(t,e,n){e.exports=function(t){return t.hasOwnProperty("type")&&t.hasOwnProperty("named")}},{}],225:[function(t,e,n){e.exports=String.fromCharCode(30)},{}],226:[function(t,e,n){var r=t(167);e.exports=function(t){for(var e=0,n=[],o=0,i=t.length;o<i;++o,++e){var s=t[o];"object"==typeof s&&(s=s.type),s===r.integers?n[e]="integers":s===r.ranges?n[e]="ranges":s===r.keys?n[e]="keys":Array.isArray(s)?n[e]=JSON.stringify(s):n[e]=s}return n}},{167:167}],227:[function(t,e,n){e.exports=function(t,e){for(var n=t.length,r=[],o=0,i=e;i<n;)r[o]=t[i],++i,++o;return r}},{}],228:[function(t,e,n){function r(t,e,n,s){if(s=s||[],e===t.length)return void(n[n.length]=i(s));var u=t[e];if("object"!=typeof u)return s[e]=u,void r(t,e+1,n,s);var c={},h=o(u,c);do s[e]=h,r(t,e+1,n,s),s.length=e,h=o(u,c);while(!c.done)}var o=t(155).iterateKeySet,i=t(218);e.exports=function(t){var e=[];return t.forEach(function(t){r(t,0,e)}),e}},{155:155,218:218}],229:[function(t,e,n){e.exports={$ref:"ref",$atom:"atom",$error:"error"}},{}],230:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function s(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function u(){b&&d&&(b=!1,d.length?v=d.concat(v):y=-1,v.length&&c())}function c(){if(!b){var t=i(u);b=!0;for(var e=v.length;e;){for(d=v,v=[];++y<e;)d&&d[y].run();y=-1,e=v.length}d=null,b=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function a(){}var f,p,l=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(t){p=o}}();var d,v=[],b=!1,y=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new h(t,e)),1!==v.length||b||i(c)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.prependListener=a,l.prependOnceListener=a,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],231:[function(t,e,n){"use strict";e.exports=t(236)},{236:236}],232:[function(t,e,n){"use strict";function r(){}function o(t){try{return t.then}catch(e){return b=e,y}}function i(t,e){try{return t(e)}catch(n){return b=n,y}}function s(t,e,n){try{t(e,n)}catch(r){return b=r,y}}function u(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],t!==r&&d(t,this)}function c(t,e,n){return new t.constructor(function(o,i){var s=new u(r);s.then(o,i),h(t,new l(e,n,s))})}function h(t,e){for(;3===t._37;)t=t._12;return 0===t._37?void t._59.push(e):void v(function(){var n=1===t._37?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._37?a(e.promise,t._12):f(e.promise,t._12));var r=i(n,t._12);r===y?f(e.promise,b):a(e.promise,r)})}function a(t,e){if(e===t)return f(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=o(e);if(n===y)return f(t,b);if(n===t.then&&e instanceof u)return t._37=3,t._12=e,void p(t);if("function"==typeof n)return void d(n.bind(e),t)}t._37=1,t._12=e,p(t)}function f(t,e){t._37=2,t._12=e,p(t)}function p(t){for(var e=0;e<t._59.length;e++)h(t,t._59[e]);t._59=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1,r=s(t,function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,f(e,t))});n||r!==y||(n=!0,f(e,b))}var v=t(125),b=null,y={};e.exports=u,u._99=r,u.prototype.then=function(t,e){if(this.constructor!==u)return c(this,t,e);var n=new u(r);return h(this,new l(t,e,n)),n}},{125:125}],233:[function(t,e,n){"use strict";var r=t(232);e.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(t){setTimeout(function(){throw t},0)})}},{232:232}],234:[function(t,e,n){"use strict";function r(t){var e=new o(o._99);return e._37=1,e._12=t,e}var o=t(232);e.exports=o;var i=r(!0),s=r(!1),u=r(null),c=r(void 0),h=r(0),a=r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return u;if(void 0===t)return c;if(t===!0)return i;if(t===!1)return s;if(0===t)return h;if(""===t)return a;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(n){return new o(function(t,e){e(n)})}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(s,u){if(u&&("object"==typeof u||"function"==typeof u)){if(u instanceof o&&u.then===o.prototype.then){for(;3===u._37;)u=u._12;return 1===u._37?r(s,u._12):(2===u._37&&n(u._12),void u.then(function(t){r(s,t)},n))}var c=u.then;if("function"==typeof c){var h=new o(c.bind(u));return void h.then(function(t){r(s,t)},n)}}e[s]=u,0===--i&&t(e)}if(0===e.length)return t([]);for(var i=e.length,s=0;s<e.length;s++)r(s,e[s])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype["catch"]=function(t){return this.then(null,t)}},{232:232}],235:[function(t,e,n){"use strict";var r=t(232);e.exports=r,r.prototype["finally"]=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},{232:232}],236:[function(t,e,n){"use strict";e.exports=t(232),t(233),t(235),t(234),t(237)},{232:232,233:233,234:234,235:235,237:237}],237:[function(t,e,n){"use strict";var r=t(232),o=t(124);e.exports=r,r.denodeify=function(t,e){return e=e||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments,0,e>0?e:0);return new r(function(e,r){o.push(function(t,n){t?r(t):e(n)});var i=t.apply(n,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||e(i)})}},r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(s){if(null===n||"undefined"==typeof n)return new r(function(t,e){e(s)});o(function(){n.call(i,s)})}}},r.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){o(function(){t.call(e,null,n)})},function(n){o(function(){t.call(e,n)})})}},{124:124,232:232}],238:[function(e,n,r){(function(o){(function(i){var s={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},u=s[typeof window]&&window||this,c=s[typeof r]&&r&&!r.nodeType&&r,h=s[typeof n]&&n&&!n.nodeType&&n,a=(h&&h.exports===c&&c,s[typeof o]&&o);!a||a.global!==a&&a.window!==a||(u=a),"function"==typeof t&&t.amd?t(["rx"],function(t,e){return i(u,e,t)}):"object"==typeof n&&n&&n.exports===c?n.exports=i(u,n.exports,e(239)):u.Rx=i(u,{},u.Rx)}).call(this,function(t,e,n,r){function o(){try{return l.apply(this,arguments)}catch(t){return T.e=t,T}}function i(t){if(!C(t))throw new TypeError("fn must be a function");return l=t,o}function s(t,e,n){return new y(function(r){var o=!1,i=null,s=[];return t.subscribe(function(t){var u,c;try{c=e(t)}catch(h){return void r.onError(h)}if(u=0,o)try{u=n(c,i)}catch(a){return void r.onError(a)}else o=!0,i=c;u>0&&(i=c,s=[]),u>=0&&s.push(t)},function(t){r.onError(t)},function(){r.onNext(s),r.onCompleted()})},t)}function u(t){if(0===t.length)throw new q;return t[0]}function c(t,e,n,r){if(e<0)throw new R;return new y(function(o){var i=e;return t.subscribe(function(t){0===i--&&(o.onNext(t),o.onCompleted())},function(t){o.onError(t)},function(){n?(o.onNext(r),o.onCompleted()):o.onError(new R)})},t)}function h(t,e,n){return new y(function(r){var o=n,i=!1;return t.subscribe(function(t){i?r.onError(new Error("Sequence contains more than one element")):(o=t,i=!0)},function(t){r.onError(t)},function(){i||e?(r.onNext(o),r.onCompleted()):r.onError(new q)})},t)}function a(t,e,n){return new y(function(r){return t.subscribe(function(t){r.onNext(t),r.onCompleted()},function(t){r.onError(t)},function(){e?(r.onNext(n),r.onCompleted()):r.onError(new q)})},t)}function f(t,e,n){return new y(function(r){var o=n,i=!1;return t.subscribe(function(t){o=t,i=!0},function(t){r.onError(t)},function(){i||e?(r.onNext(o),r.onCompleted()):r.onError(new q)})},t)}function p(t,e,n,o){var i=j(e,n,3);return new y(function(e){var n=0;return t.subscribe(function(r){var s;try{s=i(r,n,t)}catch(u){return void e.onError(u)}s?(e.onNext(o?n:r),e.onCompleted()):n++},function(t){e.onError(t)},function(){e.onNext(o?-1:r),e.onCompleted()})},t)}var l,d=n.Observable,v=d.prototype,b=n.CompositeDisposable,y=n.AnonymousObservable,_=n.Disposable.empty,m=(n.internals.isEqual,n.helpers),w=m.not,g=m.defaultComparer,x=m.identity,E=m.defaultSubComparer,C=m.isFunction,S=m.isPromise,N=m.isArrayLike,A=m.isIterable,O=n.internals.inherits,k=d.fromPromise,D=d.from,j=n.internals.bindCallback,q=n.EmptyError,P=n.ObservableBase,R=n.ArgumentOutOfRangeError,T={e:{}};v.aggregate=function(){var t,e,n=!1,r=this;return 2===arguments.length?(n=!0,e=arguments[0],t=arguments[1]):t=arguments[0],new y(function(o){var i,s,u;return r.subscribe(function(r){!u&&(u=!0);try{i?s=t(s,r):(s=n?t(e,r):r,i=!0)}catch(c){return o.onError(c)}},function(t){o.onError(t)},function(){u&&o.onNext(s),!u&&n&&o.onNext(e),!u&&!n&&o.onError(new q),o.onCompleted()})},r)};var M=function(t){function e(e,n,r,o){this.source=e,this.acc=n,this.hasSeed=r,this.seed=o,t.call(this)}function n(t,e){this.o=t,this.acc=e.acc,this.hasSeed=e.hasSeed,this.seed=e.seed,this.hasAccumulation=!1,this.result=null,this.hasValue=!1,this.isStopped=!1}return O(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},n.prototype.onNext=function(t){this.isStopped||(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.result=i(this.acc)(this.result,t):(this.result=this.hasSeed?i(this.acc)(this.seed,t):t,this.hasAccumulation=!0),this.result===T&&this.o.onError(this.result.e))},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.hasValue&&this.o.onNext(this.result),!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),!this.hasValue&&!this.hasSeed&&this.o.onError(new q),this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e}(P);return v.reduce=function(t){var e=!1;if(2===arguments.length){e=!0;var n=arguments[1]}return new M(this,t,e,n)},v.some=function(t,e){var n=this;return t?n.filter(t,e).some():new y(function(t){return n.subscribe(function(){t.onNext(!0),t.onCompleted()},function(e){t.onError(e)},function(){t.onNext(!1),t.onCompleted()})},n)},v.any=function(){return this.some.apply(this,arguments)},v.isEmpty=function(){return this.any().map(w)},v.every=function(t,e){return this.filter(function(e){return!t(e)},e).some().map(w)},v.all=function(){return this.every.apply(this,arguments)},v.includes=function(t,e){function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}var r=this;return new y(function(o){var i=0,s=+e||0;return Math.abs(s)===1/0&&(s=0),s<0?(o.onNext(!1),o.onCompleted(),_):r.subscribe(function(e){i++>=s&&n(e,t)&&(o.onNext(!0),o.onCompleted())},function(t){o.onError(t)},function(){o.onNext(!1),o.onCompleted()})},this)},v.contains=function(t,e){v.includes(t,e)},v.count=function(t,e){return t?this.filter(t,e).count():this.reduce(function(t){return t+1},0)},v.indexOf=function(t,e){var n=this;return new y(function(r){var o=0,i=+e||0;return Math.abs(i)===1/0&&(i=0),i<0?(r.onNext(-1),r.onCompleted(),_):n.subscribe(function(e){o>=i&&e===t&&(r.onNext(o),r.onCompleted()),o++},function(t){r.onError(t)},function(){r.onNext(-1),r.onCompleted()})},n)},v.sum=function(t,e){return t&&C(t)?this.map(t,e).sum():this.reduce(function(t,e){return t+e},0)},v.minBy=function(t,e){return e||(e=E),s(this,t,function(t,n){return e(t,n)*-1})},v.min=function(t){return this.minBy(x,t).map(function(t){return u(t)})},v.maxBy=function(t,e){return e||(e=E),s(this,t,e)},v.max=function(t){return this.maxBy(x,t).map(function(t){return u(t)})},v.average=function(t,e){return t&&C(t)?this.map(t,e).average():this.reduce(function(t,e){return{sum:t.sum+e,count:t.count+1}},{sum:0,count:0}).map(function(t){if(0===t.count)throw new q;return t.sum/t.count})},v.sequenceEqual=function(t,e){var n=this;return e||(e=g),new y(function(r){var o=!1,i=!1,s=[],u=[],c=n.subscribe(function(t){var n,o;if(u.length>0){o=u.shift();try{n=e(o,t)}catch(c){return void r.onError(c)}n||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){o=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});(N(t)||A(t))&&(t=D(t)),S(t)&&(t=k(t));var h=t.subscribe(function(t){var n;if(s.length>0){var i=s.shift();try{n=e(i,t)}catch(c){return void r.onError(c)}n||(r.onNext(!1),
r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){i=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new b(c,h)},n)},v.elementAt=function(t){return c(this,t,!1)},v.elementAtOrDefault=function(t,e){return c(this,t,!0,e)},v.single=function(t,e){return t&&C(t)?this.where(t,e).single():h(this,!1)},v.singleOrDefault=function(t,e,n){return t&&C(t)?this.filter(t,n).singleOrDefault(null,e):h(this,!0,e)},v.first=function(t,e){return t?this.where(t,e).first():a(this,!1)},v.firstOrDefault=function(t,e,n){return t?this.where(t).firstOrDefault(null,e):a(this,!0,e)},v.last=function(t,e){return t?this.where(t,e).last():f(this,!1)},v.lastOrDefault=function(t,e,n){return t?this.where(t,n).lastOrDefault(null,e):f(this,!0,e)},v.find=function(t,e){return p(this,t,e,!1)},v.findIndex=function(t,e){return p(this,t,e,!0)},v.toSet=function(){if("undefined"==typeof t.Set)throw new TypeError;var e=this;return new y(function(n){var r=new t.Set;return e.subscribe(function(t){r.add(t)},function(t){n.onError(t)},function(){n.onNext(r),n.onCompleted()})},e)},v.toMap=function(e,n){if("undefined"==typeof t.Map)throw new TypeError;var r=this;return new y(function(o){var i=new t.Map;return r.subscribe(function(t){var r;try{r=e(t)}catch(s){return void o.onError(s)}var u=t;if(n)try{u=n(t)}catch(s){return void o.onError(s)}i.set(r,u)},function(t){o.onError(t)},function(){o.onNext(i),o.onCompleted()})},r)},n})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{239:239}],239:[function(e,n,r){(function(e,o){(function(i){function u(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function c(t,e){if(ht&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(lt)===-1){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+lt+"\n");t.stack=h(o)}}function h(t){for(var e=t.split("\n"),n=[],r=0,o=e.length;r<o;r++){var i=e[r];a(i)||f(i)||!i||n.push(i)}return n.join("\n")}function a(t){var e=l(t);if(!e)return!1;var n=e[0],r=e[1];return n===ft&&r>=pt&&r<=Vn}function f(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function p(){if(ht)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=l(n);if(!r)return;return ft=r[0],r[1]}}function l(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function d(t){var e=[];if(!Kt(t))return e;Ut.nonEnumArgs&&t.length&&Ht(t)&&(t=Yt.call(t));var n=Ut.enumPrototypes&&"function"==typeof t,r=Ut.enumErrorProps&&(t===zt||t instanceof Error);for(var o in t)n&&"prototype"==o||r&&("message"==o||"name"==o)||e.push(o);if(Ut.nonEnumShadows&&t!==Gt){var i=t.constructor,s=-1,u=Ot;if(t===(i&&i.prototype))var c=t===Lt?Vt:t===zt?Pt:Wt.call(t),h=Bt[c];for(;++s<u;)o=At[s],h&&h[o]||!$t.call(t,o)||e.push(o)}return e}function v(t,e,n){for(var r=-1,o=n(t),i=o.length;++r<i;){var s=o[r];if(e(t[s],s,t)===!1)break}return t}function b(t,e){return v(t,e,d)}function y(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function _(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var o=typeof t,i=typeof e;if(t===t&&(null==t||null==e||"function"!=o&&"object"!=o&&"function"!=i&&"object"!=i))return!1;var s=Wt.call(t),u=Wt.call(e);if(s==kt&&(s=Mt),u==kt&&(u=Mt),s!=u)return!1;switch(s){case jt:case qt:return+t==+e;case Tt:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case Ft:case Vt:return t==String(e)}var c=s==Dt;if(!c){if(s!=Mt||!Ut.nodeClass&&(y(t)||y(e)))return!1;var h=!Ut.argsObject&&Ht(t)?Object:t.constructor,a=!Ut.argsObject&&Ht(e)?Object:e.constructor;if(!(h==a||$t.call(t,"constructor")&&$t.call(e,"constructor")||ct(h)&&h instanceof h&&ct(a)&&a instanceof a||!("constructor"in t&&"constructor"in e)))return!1}n||(n=[]),r||(r=[]);for(var f=n.length;f--;)if(n[f]==t)return r[f]==e;var p=0,l=!0;if(n.push(t),r.push(e),c){if(f=t.length,p=e.length,l=p==f)for(;p--;){var d=e[p];if(!(l=_(t[p],d,n,r)))break}}else b(e,function(e,o,i){if($t.call(i,o))return p++,l=$t.call(t,o)&&_(t[o],e,n,r)}),l&&b(t,function(t,e,n){if($t.call(n,e))return l=--p>-1});return n.pop(),r.pop(),l}function m(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}function w(){try{return Qt.apply(this,arguments)}catch(t){return ne.e=t,ne}}function g(t){if(!ct(t))throw new TypeError("fn must be a function");return Qt=t,w}function x(t){throw t}function E(t,e){this.id=t,this.value=e}function C(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function S(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function N(t){this._s=s}function A(t){this._s=s,this._l=s.length,this._i=0}function O(t){this._a=t}function k(t){this._a=t,this._l=P(t),this._i=0}function D(t){return"number"==typeof t&&H.isFinite(t)}function j(t){var e,n=t[gt];if(!n&&"string"==typeof t)return e=new N(t),e[gt]();if(!n&&t.length!==i)return e=new O(t),e[gt]();if(!n)throw new TypeError("Object is not iterable");return t[gt]()}function q(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}function P(t){var e=+t.length;return isNaN(e)?0:0!==e&&D(e)?(e=q(e)*Math.floor(Math.abs(e)),e<=0?0:e>en?en:e):e}function R(t,e){this.observer=t,this.parent=e}function T(t,e){return _e(t)||(t=xe),new rn(e,t)}function M(t,e){this.observer=t,this.parent=e}function F(t,e){this.observer=t,this.parent=e}function V(t,e){return new Pn(function(n){var r=new pe,o=new le;return o.setDisposable(r),r.setDisposable(t.subscribe(function(t){n.onNext(t)},function(t){try{var r=e(t)}catch(i){return n.onError(i)}ut(r)&&(r=He(r));var s=new pe;o.setDisposable(s),s.setDisposable(r.subscribe(n))},function(t){n.onCompleted(t)})),o},t)}function W(){return!1}function $(t,e){var n=this;return new Pn(function(r){var o=0,i=t.length;return n.subscribe(function(n){if(o<i){var s=t[o++],u=g(e)(n,s);if(u===ne)return r.onError(u.e);r.onNext(u)}else r.onCompleted()},function(t){r.onError(t)},function(){r.onCompleted()})},n)}function W(){return!1}function I(){return[]}function W(){return!1}function z(){return[]}function G(t,e){this.observer=t,this.accumulator=e.accumulator,this.hasSeed=e.hasSeed,this.seed=e.seed,this.hasAccumulation=!1,this.accumulation=null,this.hasValue=!1,this.isStopped=!1}function L(t,e,n){var r=Nt(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return ut(o)&&(o=He(o)),(Ct(o)||Et(o))&&(o=nn(o)),o}).concatAll()}function J(t,e,n){for(var r=0,o=t.length;r<o;r++)if(n(t[r],e))return r;return-1}function B(t){this.comparer=t,this.set=[]}function U(t,e,n){var r=Nt(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return ut(o)&&(o=He(o)),(Ct(o)||Et(o))&&(o=nn(o)),o}).mergeAll()}var K={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},H=K[typeof window]&&window||this,Q=K[typeof r]&&r&&!r.nodeType&&r,X=K[typeof n]&&n&&!n.nodeType&&n,Y=X&&X.exports===Q&&Q,Z=K[typeof o]&&o;!Z||Z.global!==Z&&Z.window!==Z||(H=Z);var tt={internals:{},config:{Promise:H.Promise},helpers:{}},et=tt.helpers.noop=function(){},nt=(tt.helpers.notDefined=function(t){return"undefined"==typeof t},tt.helpers.identity=function(t){return t}),rt=(tt.helpers.pluck=function(t){return function(e){return e[t]}},tt.helpers.just=function(t){return function(){return t}},tt.helpers.defaultNow=Date.now),ot=tt.helpers.defaultComparer=function(t,e){return Xt(t,e)},it=tt.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},st=(tt.helpers.defaultKeySerializer=function(t){return t.toString()},tt.helpers.defaultError=function(t){throw t}),ut=tt.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},ct=(tt.helpers.asArray=function(){return Array.prototype.slice.call(arguments)},tt.helpers.not=function(t){return!t},tt.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==Wt.call(t)}),t}());tt.config.longStackSupport=!1;var ht=!1;try{throw new Error}catch(at){ht=!!at.stack}var ft,pt=p(),lt="From previous event:",dt=tt.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};dt.prototype=Error.prototype;var vt=tt.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};vt.prototype=Error.prototype;var bt=tt.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};bt.prototype=Error.prototype;var yt=tt.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};yt.prototype=Error.prototype;var _t=tt.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};_t.prototype=Error.prototype;var mt=tt.helpers.notImplemented=function(){throw new _t},wt=tt.helpers.notSupported=function(){throw new yt},gt="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";H.Set&&"function"==typeof(new H.Set)["@@iterator"]&&(gt="@@iterator");var xt=tt.doneEnumerator={done:!0,value:i},Et=tt.helpers.isIterable=function(t){return t[gt]!==i},Ct=tt.helpers.isArrayLike=function(t){return t&&t.length!==i};tt.helpers.iterator=gt;var St,Nt=tt.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},At=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ot=At.length,kt="[object Arguments]",Dt="[object Array]",jt="[object Boolean]",qt="[object Date]",Pt="[object Error]",Rt="[object Function]",Tt="[object Number]",Mt="[object Object]",Ft="[object RegExp]",Vt="[object String]",Wt=Object.prototype.toString,$t=Object.prototype.hasOwnProperty,It=Wt.call(arguments)==kt,zt=Error.prototype,Gt=Object.prototype,Lt=String.prototype,Jt=Gt.propertyIsEnumerable;try{St=!(Wt.call(document)==Mt&&!({toString:0}+""))}catch(at){St=!0}var Bt={};Bt[Dt]=Bt[qt]=Bt[Tt]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Bt[jt]=Bt[Vt]={constructor:!0,toString:!0,valueOf:!0},Bt[Pt]=Bt[Rt]=Bt[Ft]={constructor:!0,toString:!0},Bt[Mt]={constructor:!0};var Ut={};!function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);Ut.enumErrorProps=Jt.call(zt,"message")||Jt.call(zt,"name"),Ut.enumPrototypes=Jt.call(t,"prototype"),Ut.nonEnumArgs=0!=n,Ut.nonEnumShadows=!/valueOf/.test(e)}(1);var Kt=tt.internals.isObject=function(t){var e=typeof t;return t&&("function"==e||"object"==e)||!1},Ht=function(t){return!(!t||"object"!=typeof t)&&Wt.call(t)==kt};It||(Ht=function(t){return!(!t||"object"!=typeof t)&&$t.call(t,"callee")});var Qt,Xt=tt.internals.isEqual=function(t,e){return _(t,e,[],[])},Yt=({}.hasOwnProperty,Array.prototype.slice),Zt=this.inherits=tt.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n},te=tt.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var o=0,i=e.length;o<i;o++){var s=e[o];for(var u in s)t[u]=s[u]}},ee=tt.internals.addRef=function(t,e){return new Pn(function(n){return new ie(e.getDisposable(),t.subscribe(n))})},ne={e:{}};E.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var re=tt.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},oe=re.prototype;oe.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},oe.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},oe.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var o=this.items[t];this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)}}},oe.peek=function(){return this.items[0].value},oe.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=i,this.heapify()},oe.dequeue=function(){var t=this.peek();return this.removeAt(0),t},oe.enqueue=function(t){var e=this.length++;this.items[e]=new E((re.count++),t),this.percolate(e)},oe.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},re.count=0;var ie=tt.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0],e=n.length;else for(e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];for(t=0;t<e;t++)if(!ae(n[t]))throw new TypeError("Not a disposable");this.disposables=n,this.isDisposed=!1,this.length=n.length},se=ie.prototype;se.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},se.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);n!==-1&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},se.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}};var ue=tt.Disposable=function(t){this.isDisposed=!1,this.action=t||et};ue.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var ce=ue.create=function(t){return new ue(t)},he=ue.empty={dispose:et},ae=ue.isDisposable=function(t){return t&&ct(t.dispose)},fe=ue.checkDisposed=function(t){if(t.isDisposed)throw new vt},pe=tt.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};pe.prototype.getDisposable=function(){return this.current},pe.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},pe.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var le=tt.SerialDisposable=function(){this.isDisposed=!1,this.current=null};le.prototype.getDisposable=function(){return this.current},le.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},le.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var de=tt.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?he:new t(this)},e}();C.prototype.dispose=function(){this.scheduler.scheduleWithState(this,S)};var ve=tt.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||it,this.disposable=new pe};ve.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},ve.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},ve.prototype.isCancelled=function(){return this.disposable.isDisposed},ve.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var be=tt.Scheduler=function(){function t(t,e,n,r){this.now=t,this._schedule=e,this._scheduleRelative=n,this._scheduleAbsolute=r}function e(t,e){return e(),he}t.isScheduler=function(e){return e instanceof t};var n=t.prototype;return n.schedule=function(t){return this._schedule(t,e)},n.scheduleWithState=function(t,e){return this._schedule(t,e)},n.scheduleWithRelative=function(t,n){return this._scheduleRelative(n,t,e)},n.scheduleWithRelativeAndState=function(t,e,n){return this._scheduleRelative(t,e,n)},n.scheduleWithAbsolute=function(t,n){return this._scheduleAbsolute(n,t,e)},n.scheduleWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute(t,e,n)},t.now=rt,t.normalize=function(t){return t<0&&(t=0),t},t}(),ye=be.normalize,_e=be.isScheduler;!function(t){function e(t,e){function n(e){o(e,function(e){var r=!1,o=!1,s=t.scheduleWithState(e,function(t,e){return r?i.remove(s):o=!0,n(e),he});o||(i.add(s),r=!0)})}var r=e[0],o=e[1],i=new ie;return n(r),i}function n(t,e,n){function r(e){i(e,function(e,o){var i=!1,u=!1,c=t[n](e,o,function(t,e){return i?s.remove(c):u=!0,r(e),he});u||(s.add(c),i=!0)})}var o=e[0],i=e[1],s=new ie;return r(o),s}function r(t,e){t(function(n){e(t,n)})}t.scheduleRecursive=function(t){return this.scheduleRecursiveWithState(t,r)},t.scheduleRecursiveWithState=function(t,n){return this.scheduleWithState([t,n],e)},t.scheduleRecursiveWithRelative=function(t,e){return this.scheduleRecursiveWithRelativeAndState(e,t,r)},t.scheduleRecursiveWithRelativeAndState=function(t,e,r){return this._scheduleRelative([t,r],e,function(t,e){return n(t,e,"scheduleWithRelativeAndState")})},t.scheduleRecursiveWithAbsolute=function(t,e){return this.scheduleRecursiveWithAbsoluteAndState(e,t,r)},t.scheduleRecursiveWithAbsoluteAndState=function(t,e,r){return this._scheduleAbsolute([t,r],e,function(t,e){return n(t,e,"scheduleWithAbsoluteAndState")})}}(be.prototype),function(t){be.prototype.schedulePeriodic=function(t,e){return this.schedulePeriodicWithState(null,t,e)},be.prototype.schedulePeriodicWithState=function(t,e,n){if("undefined"==typeof H.setInterval)throw new yt;e=ye(e);var r=t,o=H.setInterval(function(){r=n(r)},e);return ce(function(){H.clearInterval(o)})}}(be.prototype),function(t){t.catchError=t["catch"]=function(t){return new Ne(this,t)}}(be.prototype);var me,we,ge=(tt.internals.SchedulePeriodicRecursive=function(){function t(t,e){e(0,this._period);try{this._state=this._action(this._state)}catch(n){throw this._cancel.dispose(),n}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new pe;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,t.bind(this))),e},e}(),be.immediate=function(){function t(t,e){return e(this,t)}return new be(rt,t,wt,wt)}()),xe=be.currentThread=function(){function t(){for(;n.length>0;){var t=n.dequeue();!t.isCancelled()&&t.invoke()}}function e(e,r){var o=new ve(this,e,r,this.now());if(n)n.enqueue(o);else{n=new re(4),n.enqueue(o);var i=g(t)();if(n=null,i===ne)return x(i.e)}return o.disposable}var n,r=new be(rt,e,wt,wt);return r.scheduleRequired=function(){return!n},r}(),Ee=function(){var t,e=et;if(H.setTimeout)t=H.setTimeout,e=H.clearTimeout;else{if(!H.WScript)throw new yt;t=function(t,e){H.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),Ce=Ee.setTimeout,Se=Ee.clearTimeout;!function(){function t(e){if(s)Ce(function(){t(e)},0);else{var n=i[e];if(n){s=!0;var r=g(n)();if(we(e),s=!1,r===ne)return x(r.e)}}}function n(){if(!H.postMessage||H.importScripts)return!1;var t=!1,e=H.onmessage;return H.onmessage=function(){t=!0},H.postMessage("","*"),H.onmessage=e,t}function r(e){"string"==typeof e.data&&e.data.substring(0,h.length)===h&&t(e.data.substring(h.length))}var o=1,i={},s=!1;we=function(t){delete i[t]};var u=RegExp("^"+String(Wt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),c="function"==typeof(c=Z&&Y&&Z.setImmediate)&&!u.test(c)&&c;if(ct(c))me=function(e){var n=o++;return i[n]=e,c(function(){t(n)}),n};else if("undefined"!=typeof e&&"[object process]"==={}.toString.call(e))me=function(n){var r=o++;return i[r]=n,e.nextTick(function(){t(r)}),r};else if(n()){var h="ms.rx.schedule"+Math.random();H.addEventListener?H.addEventListener("message",r,!1):H.attachEvent?H.attachEvent("onmessage",r):H.onmessage=r,me=function(t){var e=o++;return i[e]=t,H.postMessage(h+currentId,"*"),e}}else if(H.MessageChannel){var a=new H.MessageChannel;a.port1.onmessage=function(e){t(e.data)},me=function(t){var e=o++;return i[e]=t,a.port2.postMessage(e),e}}else me="document"in H&&"onreadystatechange"in H.document.createElement("script")?function(e){var n=H.document.createElement("script"),r=o++;return i[r]=e,n.onreadystatechange=function(){t(r),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},H.document.documentElement.appendChild(n),r}:function(e){var n=o++;return i[n]=e,Ce(function(){t(n)},0),n}}();var Ne=(be.timeout=be["default"]=function(){function t(t,e){var n=this,r=new pe,o=me(function(){!r.isDisposed&&r.setDisposable(e(n,t))});return new ie(r,ce(function(){we(o)}))}function e(t,e,n){var r=this,o=be.normalize(e),i=new pe;if(0===o)return r.scheduleWithState(t,n);var s=Ce(function(){!i.isDisposed&&i.setDisposable(n(r,t))},o);return new ie(i,ce(function(){Se(s)}))}function n(t,e,n){return this.scheduleWithRelativeAndState(t,e-this.now(),n)}return new be(rt,t,e,n)}(),function(t){function e(t,e){return this._scheduler.scheduleWithState(t,this._wrap(e))}function n(t,e,n){return this._scheduler.scheduleWithRelativeAndState(t,e,this._wrap(n))}function r(t,e,n){return this._scheduler.scheduleWithAbsoluteAndState(t,e,this._wrap(n))}function o(o,i){this._scheduler=o,this._handler=i,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this,this._scheduler.now.bind(this._scheduler),e,n,r)}return Zt(o,t),o.prototype._clone=function(t){return new o(t,this._handler)},o.prototype._wrap=function(t){var e=this;return function(n,r){try{return t(e._getRecursiveWrapper(n),r)}catch(o){if(!e._handler(o))throw o;return he}}},o.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},o.prototype.schedulePeriodicWithState=function(t,e,n){var r=this,o=!1,i=new pe;return i.setDisposable(this._scheduler.schedulePeriodicWithState(t,e,function(t){if(o)return null;try{return n(t)}catch(e){if(o=!0,!r._handler(e))throw e;return i.dispose(),null}})),i},o}(be)),Ae=tt.Notification=function(){function t(t,e,n,r,o,i){this.kind=t,this.value=e,this.exception=n,this._accept=r,this._acceptObservable=o,this.toString=i}return t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObservable(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return _e(t)||(t=ge),new Pn(function(n){return t.scheduleWithState(e,function(t,e){e._acceptObservable(n),"N"===e.kind&&n.onCompleted()})})},t}(),Oe=Ae.createOnNext=function(){function t(t){return t(this.value)}function e(t){return t.onNext(this.value)}function n(){return"OnNext("+this.value+")"}return function(r){return new Ae("N",r,null,t,e,n)}}(),ke=Ae.createOnError=function(){function t(t,e){return e(this.exception)}function e(t){return t.onError(this.exception)}function n(){return"OnError("+this.exception+")"}return function(r){return new Ae("E",null,r,t,e,n)}}(),De=Ae.createOnCompleted=function(){function t(t,e,n){return n()}function e(t){return t.onCompleted()}function n(){return"OnCompleted()"}return function(){return new Ae("C",null,null,t,e,n)}}(),je=tt.Observer=function(){};je.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},je.prototype.asObserver=function(){return new Te(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))},je.prototype.checked=function(){return new Me(this)};var qe=je.create=function(t,e,n){return t||(t=et),e||(e=st),n||(n=et),new Te(t,e,n)};je.fromNotifier=function(t,e){return new Te(function(n){return t.call(e,Oe(n))},function(n){return t.call(e,ke(n))},function(){return t.call(e,De())})},je.prototype.notifyOn=function(t){return new Ve(t,this)},je.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var Pe,Re=tt.internals.AbstractObserver=function(t){function e(){this.isStopped=!1,t.call(this)}return Zt(e,t),e.prototype.next=mt,e.prototype.error=mt,e.prototype.completed=mt,e.prototype.onNext=function(t){this.isStopped||this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(je),Te=tt.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Zt(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Re),Me=function(t){function e(e){t.call(this),this._observer=e,this._state=0}Zt(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=g(this._observer.onNext).call(this._observer,t);this._state=0,e===ne&&x(e.e)},n.onError=function(t){this.checkAccess();var e=g(this._observer.onError).call(this._observer,t);this._state=2,e===ne&&x(e.e)},n.onCompleted=function(){this.checkAccess();var t=g(this._observer.onCompleted).call(this._observer);this._state=2,t===ne&&x(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(je),Fe=tt.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new le}return Zt(e,t),e.prototype.next=function(t){var e=this;this.queue.push(function(){e.observer.onNext(t)})},e.prototype.error=function(t){var e=this;this.queue.push(function(){e.observer.onError(t)})},e.prototype.completed=function(){var t=this;this.queue.push(function(){t.observer.onCompleted()})},e.prototype.ensureActive=function(){var t=!1,e=this;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(t){var n;if(!(e.queue.length>0))return void(e.isAcquired=!1);n=e.queue.shift();try{n()}catch(r){throw e.queue=[],e.hasFaulted=!0,r}t()}))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Re),Ve=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return Zt(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(Fe),We=tt.Observable=function(){function t(t){if(tt.config.longStackSupport&&ht){try{throw new Error}catch(e){this.stack=e.stack.substring(e.stack.indexOf("\n")+1)}var n=this;this._subscribe=function(e){var r=e.onError.bind(e);return e.onError=function(t){c(t,n),r(t)},t.call(n,e)}}else this._subscribe=t}return Pe=t.prototype,Pe.subscribe=Pe.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:qe(t,e,n))},Pe.subscribeOnNext=function(t,e){return this._subscribe(qe("undefined"!=typeof e?function(n){t.call(e,n)}:t))},Pe.subscribeOnError=function(t,e){return this._subscribe(qe(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},Pe.subscribeOnCompleted=function(t,e){return this._subscribe(qe(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},t}(),$e=tt.ObservableBase=function(t){function e(t){return t&&ct(t.dispose)?t:ct(t)?ce(t):he}function n(t,n){var r=n[0],o=n[1],i=g(o.subscribeCore).call(o,r);return i!==ne||r.fail(ne.e)?void r.setDisposable(e(i)):x(ne.e)}function r(t){var e=new Rn(t),r=[e,this];return xe.scheduleRequired()?xe.scheduleWithState(r,n):n(null,r),e}function o(){t.call(this,r)}return Zt(o,t),o.prototype.subscribeCore=mt,o}(We),Ie=tt.internals.Enumerable=function(){},ze=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e,n){this.o=t,this.s=e,this.e=n,this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){var e,r=new le,o=ge.scheduleRecursiveWithState(this.sources[gt](),function(o,i){if(!e){var s=g(o.next).call(o);if(s===ne)return t.onError(s.e);if(s.done)return t.onCompleted();var u=s.value;ut(u)&&(u=He(u));var c=new pe;r.setDisposable(c),c.setDisposable(u.subscribe(new n(t,i,o)))}});return new ie(r,o,ce(function(){e=!0}))},n.prototype.onNext=function(t){this.isStopped||this.o.onNext(t)},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.s(this.e))},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e}($e);Ie.prototype.concat=function(){return new ze(this)};var Ge=function(t){function e(e){this.sources=e,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){var e,n=this.sources[gt](),r=new le,o=ge.scheduleRecursiveWithState(null,function(o,i){if(!e){var s=g(n.next).call(n);if(s===ne)return t.onError(s.e);if(s.done)return null!==o?t.onError(o):t.onCompleted();var u=s.value;ut(u)&&(u=He(u));var c=new pe;r.setDisposable(c),c.setDisposable(u.subscribe(function(e){t.onNext(e)},i,function(){t.onCompleted()}))}});return new ie(r,o,ce(function(){e=!0}))},e}($e);Ie.prototype.catchError=function(){return new Ge(this)},Ie.prototype.catchErrorWhen=function(t){var e=this;return new Pn(function(n){var r,o,i=new Mn,s=new Mn,u=t(i),c=u.subscribe(s),h=e[gt](),a=new le,f=ge.scheduleRecursive(function(t){if(!r){var e=g(h.next).call(h);if(e===ne)return n.onError(e.e);if(e.done)return void(o?n.onError(o):n.onCompleted());var u=e.value;ut(u)&&(u=He(u));var c=new pe,f=new pe;a.setDisposable(new ie(f,c)),c.setDisposable(u.subscribe(function(t){n.onNext(t)},function(e){f.setDisposable(s.subscribe(t,function(t){n.onError(t)},function(){n.onCompleted()})),i.onNext(e)},function(){n.onCompleted()}))}});return new ie(c,a,f,ce(function(){r=!0}))})};var Le=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Zt(e,t),e.prototype[gt]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?xt:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Ie),Je=Ie.repeat=function(t,e){return new Le(t,e)},Be=function(t){function e(t,e,n){this.s=t,this.fn=e?Nt(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Zt(e,t),e.prototype[gt]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:xt},e}(Ie),Ue=Ie.of=function(t,e,n){return new Be(t,e,n)};Pe.observeOn=function(t){var e=this;return new Pn(function(n){return e.subscribe(new Ve(t,n))},e)},Pe.subscribeOn=function(t){var e=this;return new Pn(function(n){var r=new pe,o=new le;return o.setDisposable(r),r.setDisposable(t.schedule(function(){o.setDisposable(new C(t,e.subscribe(n)))})),o},e)};var Ke=function(t){function e(e){this.p=e,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){return this.p.then(function(e){t.onNext(e),t.onCompleted()},function(e){t.onError(e)}),he},e}($e),He=We.fromPromise=function(t){return new Ke(t)};Pe.toPromise=function(t){if(t||(t=tt.config.Promise),!t)throw new yt("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){
var r,o=!1;e.subscribe(function(t){r=t,o=!0},n,function(){o&&t(r)})})};var Qe=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=function(t){this.isStopped||this.a.push(t)},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onNext(this.a),this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e}($e);Pe.toArray=function(){return new Qe(this)},We.create=We.createWithDisposable=function(t,e){return new Pn(t,e)};var Xe=(We.defer=function(t){return new Pn(function(e){var n;try{n=t()}catch(r){return dn(r).subscribe(e)}return ut(n)&&(n=He(n)),n.subscribe(e)})},function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.parent=e}function r(t,e){e.onCompleted()}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState(this.observer,r)},e}($e)),Ye=We.empty=function(t){return _e(t)||(t=ge),new Xe(t)},Ze=function(t){function e(e,n,r){this.iterable=e,this.mapper=n,this.scheduler=r,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new tn(t,this);return e.run()},e}($e),tn=function(){function t(t,e){this.observer=t,this.parent=e}return t.prototype.run=function(){function t(t,e){try{var i=n.next()}catch(s){return r.onError(s)}if(i.done)return r.onCompleted();var u=i.value;if(o)try{u=o(u,t)}catch(s){return r.onError(s)}r.onNext(u),e(t+1)}var e=Object(this.parent.iterable),n=j(e),r=this.observer,o=this.parent.mapper;return this.parent.scheduler.scheduleRecursiveWithState(0,t)},t}(),en=Math.pow(2,53)-1;N.prototype[gt]=function(){return new A(this._s)},A.prototype[gt]=function(){return this},A.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:xt},O.prototype[gt]=function(){return new k(this._a)},k.prototype[gt]=function(){return this},k.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:xt};var nn=We.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!ct(e))throw new Error("mapFn when provided must be a function");if(e)var o=Nt(e,n,2);return _e(r)||(r=xe),new Ze(t,o,r)},rn=function(t){function e(e,n){this.args=e,this.scheduler=n,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new R(t,this);return e.run()},e}($e);R.prototype.run=function(){function t(t,o){t<r?(e.onNext(n[t]),o(t+1)):e.onCompleted()}var e=this.observer,n=this.parent.args,r=n.length;return this.parent.scheduler.scheduleRecursiveWithState(0,t)};var on=We.fromArray=function(t,e){return _e(e)||(e=xe),new rn(t,e)};We.generate=function(t,e,n,r,o){return _e(o)||(o=xe),new Pn(function(i){var s=!0;return o.scheduleRecursiveWithState(t,function(t,o){var u,c;try{s?s=!1:t=n(t),u=e(t),u&&(c=r(t))}catch(h){return i.onError(h)}u?(i.onNext(c),o(t)):i.onCompleted()})})};var sn=function(t){function e(){t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){return he},e}($e),un=We.never=function(){return new sn};We.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new rn(e,xe)},We.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new rn(n,t)};var cn=function(t){function e(e,n){this.obj=e,this.keys=Object.keys(e),this.scheduler=n,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new M(t,this);return e.run()},e}($e);M.prototype.run=function(){function t(t,i){if(t<o){var s=r[t];e.onNext([s,n[s]]),i(t+1)}else e.onCompleted()}var e=this.observer,n=this.parent.obj,r=this.parent.keys,o=r.length;return this.parent.scheduler.scheduleRecursiveWithState(0,t)},We.pairs=function(t,e){return e||(e=xe),new cn(t,e)};var hn=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new an(t,this);return e.run()},e}($e),an=function(){function t(t,e){this.observer=t,this.parent=e}return t.prototype.run=function(){function t(t,o){t<n?(r.onNext(e+t),o(t+1)):r.onCompleted()}var e=this.parent.start,n=this.parent.rangeCount,r=this.observer;return this.parent.scheduler.scheduleRecursiveWithState(0,t)},t}();We.range=function(t,e,n){return _e(n)||(n=xe),new hn(t,e,n)};var fn=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new F(t,this);return e.run()},e}($e);F.prototype.run=function(){function t(t,r){return(t===-1||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursiveWithState(this.parent.repeatCount,t)},We.repeat=function(t,e,n){return _e(n)||(n=xe),new fn(t,e,n)};var pn=function(t){function e(e,n){this.value=e,this.scheduler=n,t.call(this)}function n(t,e){this.observer=t,this.parent=e}function r(t,e){var n=e[0],r=e[1];r.onNext(n),r.onCompleted()}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.value,this.observer],r)},e}($e),ln=(We["return"]=We.just=We.returnValue=function(t,e){return _e(e)||(e=ge),new pn(t,e)},function(t){function e(e,n){this.error=e,this.scheduler=n,t.call(this)}function n(t,e){this.o=t,this.p=e}function r(t,e){var n=e[0],r=e[1];r.onError(n)}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()},n.prototype.run=function(){return this.p.scheduler.scheduleWithState([this.p.error,this.o],r)},e}($e)),dn=We["throw"]=We.throwError=We.throwException=function(t,e){return _e(e)||(e=ge),new ln(t,e)};We.using=function(t,e){return new Pn(function(n){var r,o,i=he;try{r=t(),r&&(i=r),o=e(r)}catch(s){return new ie(dn(s).subscribe(n),i)}return new ie(o.subscribe(n),i)})},Pe.amb=function(t){var e=this;return new Pn(function(n){function r(){i||(i=s,h.dispose())}function o(){i||(i=u,c.dispose())}var i,s="L",u="R",c=new pe,h=new pe;return ut(t)&&(t=He(t)),c.setDisposable(e.subscribe(function(t){r(),i===s&&n.onNext(t)},function(t){r(),i===s&&n.onError(t)},function(){r(),i===s&&n.onCompleted()})),h.setDisposable(t.subscribe(function(t){o(),i===u&&n.onNext(t)},function(t){o(),i===u&&n.onError(t)},function(){o(),i===u&&n.onCompleted()})),new ie(c,h)})},We.amb=function(){function t(t,e){return t.amb(e)}var e=un(),n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(var r=0,o=arguments.length;r<o;r++)n.push(arguments[r]);for(var r=0,o=n.length;r<o;r++)e=t(e,n[r]);return e},Pe["catch"]=Pe.catchError=Pe.catchException=function(t){return"function"==typeof t?V(this,t):vn([this,t])};var vn=We.catchError=We["catch"]=We.catchException=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else for(var e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return Ue(t).catchError()};Pe.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),bn.apply(this,e)};var bn=We.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.pop();return Array.isArray(e[0])&&(e=e[0]),new Pn(function(t){function n(e){if(u[e]=!0,c||(c=u.every(nt))){try{var n=r.apply(null,a)}catch(o){return t.onError(o)}t.onNext(n)}else h.filter(function(t,n){return n!==e}).every(nt)&&t.onCompleted()}function o(e){h[e]=!0,h.every(nt)&&t.onCompleted()}for(var i=e.length,s=function(){return!1},u=m(i,s),c=!1,h=m(i,s),a=new Array(i),f=new Array(i),p=0;p<i;p++)!function(r){var i=e[r],s=new pe;ut(i)&&(i=He(i)),s.setDisposable(i.subscribe(function(t){a[r]=t,n(r)},function(e){t.onError(e)},function(){o(r)})),f[r]=s}(p);return new ie(f)},this)};Pe.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),_n.apply(null,t)};var yn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){this.sources=t,this.o=e}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new n(this.sources,t);return e.run()},n.prototype.run=function(){var t,e=new le,n=this.sources,r=n.length,o=this.o,i=ge.scheduleRecursiveWithState(0,function(i,s){if(!t){if(i===r)return o.onCompleted();var u=n[i];ut(u)&&(u=He(u));var c=new pe;e.setDisposable(c),c.setDisposable(u.subscribe(function(t){o.onNext(t)},function(t){o.onError(t)},function(){s(i+1)}))}});return new ie(e,i,ce(function(){t=!0}))},e}($e),_n=We.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e]}return new yn(t)};Pe.concatAll=Pe.concatObservable=function(){return this.merge(1)};var mn=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new ie;return e.add(this.source.subscribe(new wn(t,this.maxConcurrent,e))),e},e}($e),wn=function(){function t(t,e,n){this.o=t,this.max=e,this.g=n,this.done=!1,this.q=[],this.activeCount=0,this.isStopped=!1}function e(t,e){this.parent=t,this.sad=e,this.isStopped=!1}return t.prototype.handleSubscribe=function(t){var n=new pe;this.g.add(n),ut(t)&&(t=He(t)),n.setDisposable(t.subscribe(new e(this,n)))},t.prototype.onNext=function(t){this.isStopped||(this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t))},t.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,0===this.activeCount&&this.o.onCompleted())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e.prototype.onNext=function(t){this.isStopped||this.parent.o.onNext(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.parent.o.onError(t))},e.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var t=this.parent;t.g.remove(this.sad),t.q.length>0?t.handleSubscribe(t.q.shift()):(t.activeCount--,t.done&&0===t.activeCount&&t.o.onCompleted())}},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.parent.o.onError(t),!0)},t}();Pe.merge=function(t){return"number"!=typeof t?gn(this,t):new mn(this,t)};var gn=We.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(_e(arguments[0]))for(t=arguments[0],e=1;e<r;e++)n.push(arguments[e]);else for(t=ge,e=0;e<r;e++)n.push(arguments[e]);else for(t=ge,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),T(t,n).mergeAll()},xn=tt.CompositeError=function(t){this.name="NotImplementedError",this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};xn.prototype=Error.prototype,We.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}var r=T(null,t);return new Pn(function(t){function e(){0===s.length?t.onCompleted():1===s.length?t.onError(s[0]):t.onError(new xn(s))}var n=new ie,o=new pe,i=!1,s=[];return n.add(o),o.setDisposable(r.subscribe(function(r){var o=new pe;n.add(o),ut(r)&&(r=He(r)),o.setDisposable(r.subscribe(function(e){t.onNext(e)},function(t){s.push(t),n.remove(o),i&&1===n.length&&e()},function(){n.remove(o),i&&1===n.length&&e()}))},function(t){s.push(t),i=!0,1===n.length&&e()},function(){i=!0,1===n.length&&e()})),n})};var En=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.g=e,this.isStopped=!1,this.done=!1}function r(t,e,n){this.parent=t,this.g=e,this.sad=n,this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new ie,r=new pe;return e.add(r),r.setDisposable(this.source.subscribe(new n(t,e))),e},n.prototype.onNext=function(t){if(!this.isStopped){var e=new pe;this.g.add(e),ut(t)&&(t=He(t)),e.setDisposable(t.subscribe(new r(this,this.g,e)))}},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,1===this.g.length&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},r.prototype.onNext=function(t){this.isStopped||this.parent.o.onNext(t)},r.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.parent.o.onError(t))},r.prototype.onCompleted=function(){if(!this.isStopped){var t=this.parent;this.isStopped=!0,t.g.remove(this.sad),t.done&&1===t.g.length&&t.o.onCompleted()}},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.parent.o.onError(t),!0)},e}($e);Pe.mergeAll=Pe.mergeObservable=function(){return new En(this)},Pe.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Cn([this,t])};var Cn=We.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else for(var e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return new Pn(function(e){var n=0,r=new le,o=ge.scheduleRecursive(function(o){var i,s;n<t.length?(i=t[n++],ut(i)&&(i=He(i)),s=new pe,r.setDisposable(s),s.setDisposable(i.subscribe(e.onNext.bind(e),o,o))):e.onCompleted()});return new ie(r,o)})};Pe.skipUntil=function(t){var e=this;return new Pn(function(n){var r=!1,o=new ie(e.subscribe(function(t){r&&n.onNext(t)},function(t){n.onError(t)},function(){r&&n.onCompleted()}));ut(t)&&(t=He(t));var i=new pe;return o.add(i),i.setDisposable(t.subscribe(function(){r=!0,i.dispose()},function(t){n.onError(t)},function(){i.dispose()})),o},e)};var Sn=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,this.isStopped=!1}function r(t,e){this.parent=t,this.id=e,this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){var e=new le,r=this.source.subscribe(new n(t,e));return new ie(r,e)},n.prototype.onNext=function(t){if(!this.isStopped){var e=new pe,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),ut(t)&&(t=He(t)),e.setDisposable(t.subscribe(new r(this,n)))}},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.stopped=!0,!this.hasLatest&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},r.prototype.onNext=function(t){this.isStopped||this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&this.parent.o.onError(t))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.isStopped&&this.parent.o.onCompleted()))},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.parent.o.onError(t),!0)},e}($e);Pe["switch"]=Pe.switchLatest=function(){return new Sn(this)};var Nn=function(t){function e(e,n){this.source=e,this.other=ut(n)?He(n):n,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){return new ie(this.source.subscribe(t),this.other.subscribe(new n(t)))},n.prototype.onNext=function(t){this.isStopped||this.o.onCompleted()},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){!this.isStopped&&(this.isStopped=!0)},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e}($e);Pe.takeUntil=function(t){return new Nn(this,t)},Pe.withLatestFrom=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.pop(),o=this;return Array.isArray(e[0])&&(e=e[0]),new Pn(function(t){for(var n=e.length,i=m(n,W),s=!1,u=new Array(n),c=new Array(n+1),h=0;h<n;h++)!function(n){var r=e[n],o=new pe;ut(r)&&(r=He(r)),o.setDisposable(r.subscribe(function(t){u[n]=t,i[n]=!0,s=i.every(nt)},function(e){t.onError(e)},et)),c[n]=o}(h);var a=new pe;return a.setDisposable(o.subscribe(function(e){var n=[e].concat(u);if(s){var o=g(r).apply(null,n);return o===ne?t.onError(o.e):void t.onNext(o)}},function(e){t.onError(e)},function(){t.onCompleted()})),c[n]=a,new ie(c)},this)},Pe.zip=function(){if(Array.isArray(arguments[0]))return $.apply(this,arguments);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this,o=e.pop();return e.unshift(r),new Pn(function(t){for(var n=e.length,i=m(n,I),s=m(n,W),u=new Array(n),c=0;c<n;c++)!function(n){var c=e[n],h=new pe;ut(c)&&(c=He(c)),h.setDisposable(c.subscribe(function(e){if(i[n].push(e),i.every(function(t){return t.length>0})){var u=i.map(function(t){return t.shift()}),c=g(o).apply(r,u);if(c===ne)return t.onError(c.e);t.onNext(c)}else s.filter(function(t,e){return e!==n}).every(nt)&&t.onCompleted()},function(e){t.onError(e)},function(){s[n]=!0,s.every(nt)&&t.onCompleted()})),u[n]=h}(c);return new ie(u)},r)},We.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.shift();return r.zip.apply(r,e)},We.zipArray=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new Pn(function(e){for(var n=t.length,r=m(n,z),o=m(n,W),i=new Array(n),s=0;s<n;s++)!function(n){i[n]=new pe,i[n].setDisposable(t[n].subscribe(function(t){if(r[n].push(t),r.every(function(t){return t.length>0})){var i=r.map(function(t){return t.shift()});e.onNext(i)}else if(o.filter(function(t,e){return e!==n}).every(nt))return e.onCompleted()},function(t){e.onError(t)},function(){o[n]=!0,o.every(nt)&&e.onCompleted()}))}(s);return new ie(i)})},Pe.asObservable=function(){var t=this;return new Pn(function(e){return t.subscribe(e)},t)},Pe.bufferWithCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).selectMany(function(t){return t.toArray()}).where(function(t){return t.length>0})},Pe.dematerialize=function(){var t=this;return new Pn(function(e){return t.subscribe(function(t){return t.accept(e)},function(t){e.onError(t)},function(){e.onCompleted()})},this)},Pe.distinctUntilChanged=function(t,e){var n=this;return e||(e=ot),new Pn(function(r){var o,i=!1;return n.subscribe(function(n){var s=n;if(t&&(s=g(t)(n),s===ne))return r.onError(s.e);if(i){var u=g(e)(o,s);if(u===ne)return r.onError(u.e)}i&&u||(i=!0,o=s,r.onNext(n))},function(t){r.onError(t)},function(){r.onCompleted()})},this)};var An=function(t){function e(e,n,r,o){this.source=e,this.t=!n||ct(n)?qe(n||et,r||et,o||et):n,t.call(this)}function n(t,e){this.o=t,this.t=e,this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.t))},n.prototype.onNext=function(t){if(!this.isStopped){var e=g(this.t.onNext).call(this.t,t);e===ne&&this.o.onError(e.e),this.o.onNext(t)}},n.prototype.onError=function(t){if(!this.isStopped){this.isStopped=!0;var e=g(this.t.onError).call(this.t,t);if(e===ne)return this.o.onError(e.e);this.o.onError(t)}},n.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var t=g(this.t.onCompleted).call(this.t);if(t===ne)return this.o.onError(t.e);this.o.onCompleted()}},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e}($e);Pe["do"]=Pe.tap=Pe.doAction=function(t,e,n){return new An(this,t,e,n)},Pe.doOnNext=Pe.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},Pe.doOnError=Pe.tapOnError=function(t,e){return this.tap(et,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},Pe.doOnCompleted=Pe.tapOnCompleted=function(t,e){return this.tap(et,null,"undefined"!=typeof e?function(){t.call(e)}:t)},Pe["finally"]=Pe.ensure=function(t){var e=this;return new Pn(function(n){var r;try{r=e.subscribe(n)}catch(o){throw t(),o}return ce(function(){try{r.dispose()}catch(e){throw e}finally{t()}})},this)},Pe.finallyAction=function(t){return this.ensure(t)};var On=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=et,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}($e);Pe.ignoreElements=function(){return new On(this)},Pe.materialize=function(){var t=this;return new Pn(function(e){return t.subscribe(function(t){e.onNext(Oe(t))},function(t){e.onNext(ke(t)),e.onCompleted()},function(){e.onNext(De()),e.onCompleted()})},t)},Pe.repeat=function(t){return Je(this,t).concat()},Pe.retry=function(t){return Je(this,t).catchError()},Pe.retryWhen=function(t){return Je(this).catchErrorWhen(t)};var kn=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return Zt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new G(t,this))},e}($e);G.prototype.onNext=function(t){if(!this.isStopped){!this.hasValue&&(this.hasValue=!0);try{this.hasAccumulation?this.accumulation=this.accumulator(this.accumulation,t):(this.accumulation=this.hasSeed?this.accumulator(this.seed,t):t,this.hasAccumulation=!0)}catch(e){return this.observer.onError(e)}this.observer.onNext(this.accumulation)}},G.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.observer.onError(t))},G.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,!this.hasValue&&this.hasSeed&&this.observer.onNext(this.seed),this.observer.onCompleted())},G.prototype.dispose=function(){this.isStopped=!0},G.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},Pe.scan=function(){var t,e,n=!1;return 2===arguments.length?(n=!0,t=arguments[0],e=arguments[1]):e=arguments[0],new kn(this,e,n,t)},Pe.skipLast=function(t){if(t<0)throw new bt;var e=this;return new Pn(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&n.onNext(r.shift())},function(t){n.onError(t)},function(){n.onCompleted()})},e)},Pe.startWith=function(){var t,e=0;arguments.length&&_e(arguments[0])?(t=arguments[0],e=1):t=ge;for(var n=[],r=e,o=arguments.length;r<o;r++)n.push(arguments[r]);return Ue([on(n,t),this]).concat()},Pe.takeLast=function(t){if(t<0)throw new bt;var e=this;return new Pn(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},function(t){n.onError(t)},function(){for(;r.length>0;)n.onNext(r.shift());n.onCompleted()})},e)},Pe.takeLastBuffer=function(t){var e=this;return new Pn(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},function(t){n.onError(t)},function(){n.onNext(r),n.onCompleted()})},e)},Pe.windowWithCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),t<=0)throw new bt;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),e<=0)throw new bt;return new Pn(function(r){function o(){var t=new Mn;c.push(t),r.onNext(ee(t,s))}var i=new pe,s=new de(i),u=0,c=[];return o(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=c.length;r<i;r++)c[r].onNext(n);var s=u-t+1;s>=0&&s%e===0&&c.shift().onCompleted(),++u%e===0&&o()},function(t){for(;c.length>0;)c.shift().onError(t);r.onError(t)},function(){for(;c.length>0;)c.shift().onCompleted();r.onCompleted()})),s},n)},Pe.selectConcat=Pe.concatMap=function(t,e,n){return ct(t)&&ct(e)?this.concatMap(function(n,r){var o=t(n,r);return ut(o)&&(o=He(o)),(Ct(o)||Et(o))&&(o=nn(o)),o.map(function(t,o){return e(n,t,r,o)})}):ct(t)?L(this,t,n):L(this,function(){return t})},Pe.concatMapObserver=Pe.selectConcatObserver=function(t,e,n,r){var o=this,i=Nt(t,r,2),s=Nt(e,r,1),u=Nt(n,r,0);return new Pn(function(t){var e=0;return o.subscribe(function(n){var r;try{r=i(n,e++)}catch(o){return void t.onError(o)}ut(r)&&(r=He(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){return void t.onError(r)}ut(n)&&(n=He(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(n){return void t.onError(n)}ut(e)&&(e=He(e)),t.onNext(e),t.onCompleted()})},this).concatAll()},Pe.defaultIfEmpty=function(t){var e=this;return t===i&&(t=null),new Pn(function(n){var r=!1;return e.subscribe(function(t){r=!0,n.onNext(t)},function(t){n.onError(t)},function(){!r&&n.onNext(t),n.onCompleted()})},e)},B.prototype.push=function(t){var e=J(this.set,t,this.comparer)===-1;return e&&this.set.push(t),e},Pe.distinct=function(t,e){var n=this;return e||(e=ot),new Pn(function(r){var o=new B(e);return n.subscribe(function(e){var n=e;if(t)try{n=t(e)}catch(i){return void r.onError(i)}o.push(n)&&r.onNext(e)},function(t){r.onError(t)},function(){r.onCompleted()})},this)};var Dn=function(t){function e(e,n,r){this.source=e,this.selector=Nt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,this.isStopped=!1}return Zt(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},r.prototype.onNext=function(t){if(!this.isStopped){var e=g(this.selector)(t,this.i++,this.source);return e===ne?this.o.onError(e.e):void this.o.onNext(e)}},r.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e}($e);Pe.map=Pe.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Dn?this.internalMap(n,e):new Dn(this,n,e)},Pe.pluck=function(){var t=arguments,e=arguments.length;if(0===e)throw new Error("List of properties cannot be empty.");return this.map(function(n){for(var r=n,o=0;o<e;o++){var s=r[t[o]];if("undefined"==typeof s)return i;r=s}return r})},Pe.flatMapObserver=Pe.selectManyObserver=function(t,e,n,r){var o=this;return new Pn(function(i){var s=0;return o.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(o){return void i.onError(o)}ut(n)&&(n=He(n)),i.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(o){return void i.onError(o)}ut(n)&&(n=He(n)),i.onNext(n),i.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){return void i.onError(e)}ut(t)&&(t=He(t)),i.onNext(t),i.onCompleted()})},o).mergeAll()},Pe.selectMany=Pe.flatMap=function(t,e,n){return ct(t)&&ct(e)?this.flatMap(function(n,r){var o=t(n,r);return ut(o)&&(o=He(o)),(Ct(o)||Et(o))&&(o=nn(o)),o.map(function(t,o){return e(n,t,r,o)})},n):ct(t)?U(this,t,n):U(this,function(){return t})},Pe.selectSwitch=Pe.flatMapLatest=Pe.switchMap=function(t,e){return this.select(t,e).switchLatest()};var jn=function(t){function e(e,n){this.source=e,this.skipCount=n,t.call(this)}function n(t,e){this.c=e,this.r=e,this.o=t,this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.skipCount))},n.prototype.onNext=function(t){this.isStopped||(this.r<=0?this.o.onNext(t):this.r--)},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e}($e);Pe.skip=function(t){if(t<0)throw new bt;return new jn(this,t)},Pe.skipWhile=function(t,e){var n=this,r=Nt(t,e,3);return new Pn(function(t){var e=0,o=!1;return n.subscribe(function(i){if(!o)try{o=!r(i,e++,n)}catch(s){return void t.onError(s)}o&&t.onNext(i)},function(e){t.onError(e)},function(){t.onCompleted()})},n)},Pe.take=function(t,e){if(t<0)throw new bt;if(0===t)return Ye(e);var n=this;return new Pn(function(e){var r=t;return n.subscribe(function(t){r-- >0&&(e.onNext(t),r<=0&&e.onCompleted())},function(t){e.onError(t)},function(){e.onCompleted()})},n)},Pe.takeWhile=function(t,e){var n=this,r=Nt(t,e,3);return new Pn(function(t){var e=0,o=!0;return n.subscribe(function(i){if(o){try{o=r(i,e++,n)}catch(s){return void t.onError(s)}o?t.onNext(i):t.onCompleted()}},function(e){t.onError(e)},function(){t.onCompleted()})},n)};var qn=function(t){function e(e,n,r){this.source=e,this.predicate=Nt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,this.isStopped=!1}return Zt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},r.prototype.onNext=function(t){if(!this.isStopped){var e=g(this.predicate)(t,this.i++,this.source);return e===ne?this.o.onError(e.e):void(e&&this.o.onNext(t))}},r.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.o.onError(t),!0)},e}($e);Pe.filter=Pe.where=function(t,e){return this instanceof qn?this.internalFilter(t,e):new qn(this,t,e)},Pe.transduce=function(t){function e(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}var n=this;return new Pn(function(r){var o=t(e(r));return n.subscribe(function(t){try{o["@@transducer/step"](r,t)}catch(e){r.onError(e)}},function(t){r.onError(t)},function(){o["@@transducer/result"](r)})},n)};var Pn=tt.AnonymousObservable=function(t){function e(t){return t&&ct(t.dispose)?t:ct(t)?ce(t):he}function n(t,n){var r=n[0],o=n[1],i=g(o)(r);return i!==ne||r.fail(ne.e)?void r.setDisposable(e(i)):x(ne.e)}function r(e,r){function o(t){var r=new Rn(t),o=[r,e];return xe.scheduleRequired()?xe.scheduleWithState(o,n):n(null,o),r}this.source=r,t.call(this,o)}return Zt(r,t),r}(We),Rn=function(t){function e(e){t.call(this),this.observer=e,this.m=new pe}Zt(e,t);var n=e.prototype;return n.next=function(t){var e=g(this.observer.onNext).call(this.observer,t);e===ne&&(this.dispose(),x(e.e))},n.error=function(t){var e=g(this.observer.onError).call(this.observer,t);this.dispose(),e===ne&&x(e.e)},n.completed=function(){var t=g(this.observer.onCompleted).call(this.observer);this.dispose(),t===ne&&x(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Re),Tn=function(t,e){this.subject=t,this.observer=e};Tn.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var t=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(t,1),this.observer=null}};var Mn=tt.Subject=function(t){function e(t){
return fe(this),this.isStopped?this.hasError?(t.onError(this.error),he):(t.onCompleted(),he):(this.observers.push(t),new Tn(this,t))}function n(){t.call(this,e),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Zt(n,t),te(n.prototype,je.prototype,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped)for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),n.create=function(t,e){return new Fn(t,e)},n}(We),Fn=(tt.AsyncSubject=function(t){function e(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),he):(this.observers.push(t),new Tn(this,t))}function n(){t.call(this,e),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Zt(n,t),te(n.prototype,je,{hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){var t,e;if(fe(this),!this.isStopped){this.isStopped=!0;var n=u(this.observers),e=n.length;if(this.hasValue)for(t=0;t<e;t++){var r=n[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<e;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){fe(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null}}),n}(We),tt.AnonymousSubject=function(t){function e(t){return this.observable.subscribe(t)}function n(n,r){this.observer=n,this.observable=r,t.call(this,e)}return Zt(n,t),te(n.prototype,je.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),n}(We));"function"==typeof t&&"object"==typeof t.amd&&t.amd?(H.Rx=tt,t(function(){return tt})):Q&&X?Y?(X.exports=tt).Rx=tt:Q.Rx=tt:H.Rx=tt;var Vn=p()}).call(this)}).call(this,e(230),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{230:230}]},{},[1])(1)});